(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{3535:function(e,t,r){"use strict";r.d(t,{S1:function(){return nk}});var n,i,o,s,u,a,c,l,d,f,h,p,v,g,m,y,b,w,S,E,I,_,x,C,k,P,O,T=r(6200);(n=g||(g={}))[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Verbose=3]="Verbose",n[n.Debug=4]="Debug";var R=function(e){return function(){var t=(0,T.pi)({},e.config);return{logger:t.loggerProvider,logLevel:t.logLevel}}},A=function(e,t){var r,n;t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var i=(0,T.XA)(t.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(s in e))return;e=e[s]}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return e},L=function(e,t){return function(){var r,n,i={};try{for(var o=(0,T.XA)(t),s=o.next();!s.done;s=o.next()){var u=s.value;i[u]=A(e,u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},M=function(e,t,r,n,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=r(),a=u.logger,c=u.logLevel;if(c&&c<g.Debug||!c||!a)return e.apply(i,o);var l={type:"invoke public method",name:t,args:o,stacktrace:(Error().stack||"").split("\n").slice(3).map(function(e){return e.trim()}),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var d=e.apply(i,o);return d&&d.promise?d.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))),d}},U=function(e){return{promise:e||Promise.resolve()}},N=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:void 0},D=function(){var e,t=N();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce(function(e,t){var r=t.split("=",2),n=j(r[0]),i=j(r[1]);return i&&(e[n]=i),e},{}):{}},j=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},q=r(3199),B=function(e){return void 0===e&&(e="$default_instance"),q.V.getInstance(e)},F=function(e,t){B(t).identityStore.editIdentity().setUserId(e).commit()},J=function(e,t){B(t).identityStore.editIdentity().setDeviceId(e).commit()};(i=m||(m={})).Unknown="unknown",i.Skipped="skipped",i.Success="success",i.RateLimit="rate_limit",i.PayloadTooLarge="payload_too_large",i.Invalid="invalid",i.Failed="failed",i.Timeout="Timeout",i.SystemError="SystemError";var G="".concat("AMP","_unsent"),z="https://api2.amplitude.com/2/httpapi",V=function(e,t){var r=Math.max(t,1);return e.reduce(function(e,t,n){var i=Math.floor(n/r);return e[i]||(e[i]=[]),e[i].push(t),e},[])},W=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=m.Unknown),{event:e,code:t,message:r}},$="Amplitude Logger ",K=function(){function e(){this.logLevel=g.None}return e.prototype.disable=function(){this.logLevel=g.None},e.prototype.enable=function(e){void 0===e&&(e=g.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Verbose||console.log("".concat($,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Warn||console.warn("".concat($,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Error||console.error("".concat($,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Debug||console.log("".concat($,"[Debug]: ").concat(e.join(" ")))},e}(),Z=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:g.Warn,loggerProvider:new K,offline:!1,optOut:!1,serverUrl:z,serverZone:"US",useBatch:!1}},X=function(){function e(e){this._optOut=!1;var t,r,n,i,o=Z();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(r=e.logLevel)&&void 0!==r?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!==(n=e.optOut)&&void 0!==n?n:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=Q(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),Q=function(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=Z().serverZone),void 0===r&&(r=Z().useBatch),e)return{serverUrl:e,serverZone:void 0};var n,i=["US","EU"].includes(t)?t:Z().serverZone;return{serverZone:i,serverUrl:(n=r,"EU"===i?n?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":n?"https://api2.amplitude.com/batch":z)}},H=function(){function e(){this.sdk={metrics:{histogram:{}}}}return e.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},e}(),Y=function(e){return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Y)};function ee(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body,null,2))}catch(e){}return t}var et=function(){function e(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[]}return e.prototype.setup=function(e){var t;return(0,T.mG)(this,void 0,void 0,function(){var r,n=this;return(0,T.Jh)(this,function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat(G,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(t=this.config.storageProvider)||void 0===t?void 0:t.get(this.storageKey)];case 1:return(r=i.sent())&&r.length>0&&Promise.all(r.map(function(e){return n.execute(e)})).catch(),[2,Promise.resolve(void 0)]}})})},e.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=Y()),new Promise(function(r){t.queue.push({event:e,attempts:0,callback:function(e){return r(e)},timeout:0}),t.schedule(t.config.flushIntervalMillis),t.saveEvents()})},e.prototype.removeEventsExceedFlushMaxRetries=function(e){var t=this;return e.filter(function(e){return e.attempts+=1,e.attempts<t.config.flushMaxRetries||(t.fulfillRequest([e],500,"Event rejected due to exceeded retry count"),!1)})},e.prototype.scheduleEvents=function(e){var t=this;e.forEach(function(e){t.schedule(0===e.timeout?t.config.flushIntervalMillis:e.timeout)})},e.prototype.schedule=function(e){var t=this;if(!this.config.offline&&(null===this.scheduleId||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){t.queue=t.queue.map(function(e){return e.timeout=0,e}),t.flush(!0)},e);return}},e.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},e.prototype.flush=function(e){return void 0===e&&(e=!1),(0,T.mG)(this,void 0,void 0,function(){var t,r,n=this;return(0,T.Jh)(this,function(i){switch(i.label){case 0:if(this.config.offline)return this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2];if(this.flushId)return this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2];return this.flushId=this.scheduleId,this.resetSchedule(),t=[],r=[],this.queue.forEach(function(e){return 0===e.timeout?t.push(e):r.push(e)}),[4,V(t,this.config.flushQueueSize).reduce(function(t,r){return(0,T.mG)(n,void 0,void 0,function(){return(0,T.Jh)(this,function(n){switch(n.label){case 0:return[4,t];case 1:return n.sent(),[4,this.send(r,e)];case 2:return[2,n.sent()]}})})},Promise.resolve())];case 1:return i.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},e.prototype.send=function(e,t){return void 0===t&&(t=!0),(0,T.mG)(this,void 0,void 0,function(){var r,n,i,o;return(0,T.Jh)(this,function(s){switch(s.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];r={api_key:this.config.apiKey,events:e.map(function(e){var t=e.event;return t.extra,(0,T._T)(t,["extra"])}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new H,s.label=1;case 1:return s.trys.push([1,3,,4]),n=Q(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,r)];case 2:if(null===(i=s.sent()))return this.fulfillRequest(e,0,"Unexpected error occurred"),[2];if(!t)return"body"in i?this.fulfillRequest(e,i.statusCode,"".concat(i.status,": ").concat(ee(i))):this.fulfillRequest(e,i.statusCode,i.status),[2];return this.handleResponse(i,e),[3,4];case 3:var u;return o=(u=s.sent())instanceof Error?u.message:String(u),this.config.loggerProvider.error(o),this.handleResponse({status:m.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},e.prototype.handleResponse=function(e,t){var r=e.status;switch(r){case m.Success:this.handleSuccessResponse(e,t);break;case m.Invalid:this.handleInvalidResponse(e,t);break;case m.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case m.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.config.loggerProvider.warn("{code: 0, error: \"Status '".concat(r,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t)}},e.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},e.prototype.handleInvalidResponse=function(e,t){var r=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key")){this.fulfillRequest(t,e.statusCode,e.body.error);return}var n=new Set((0,T.ev)((0,T.ev)((0,T.ev)((0,T.ev)([],(0,T.CR)(Object.values(e.body.eventsWithInvalidFields)),!1),(0,T.CR)(Object.values(e.body.eventsWithMissingFields)),!1),(0,T.CR)(Object.values(e.body.eventsWithInvalidIdLengths)),!1),(0,T.CR)(e.body.silencedEvents),!1).flat()),i=t.filter(function(t,i){if(n.has(i)){r.fulfillRequest([t],e.statusCode,e.body.error);return}return!0});i.length>0&&this.config.loggerProvider.warn(ee(e));var o=this.removeEventsExceedFlushMaxRetries(i);this.scheduleEvents(o)},e.prototype.handlePayloadTooLargeResponse=function(e,t){if(1===t.length){this.fulfillRequest(t,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(ee(e)),this.config.flushQueueSize/=2;var r=this.removeEventsExceedFlushMaxRetries(t);this.scheduleEvents(r)},e.prototype.handleRateLimitResponse=function(e,t){var r=this,n=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,s=new Set(n),u=new Set(i),a=new Set(o),c=t.filter(function(t,n){if(t.event.user_id&&s.has(t.event.user_id)||t.event.device_id&&u.has(t.event.device_id)){r.fulfillRequest([t],e.statusCode,e.body.error);return}return a.has(n)&&(t.timeout=r.throttleTimeout),!0});c.length>0&&this.config.loggerProvider.warn(ee(e));var l=this.removeEventsExceedFlushMaxRetries(c);this.scheduleEvents(l)},e.prototype.handleOtherResponse=function(e){var t=this,r=e.map(function(e){return e.timeout=e.attempts*t.retryTimeout,e}),n=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(n)},e.prototype.fulfillRequest=function(e,t,r){this.removeEvents(e),e.forEach(function(e){return e.callback(W(e.event,t,r))})},e.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(e){return e.event});this.config.storageProvider.set(this.storageKey,e)}},e.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(t){return!e.some(function(e){return e.event.insert_id===t.event.insert_id})}),this.saveEvents()},e}(),er=function(){function e(){this.name="identity",this.type="before",this.identityStore=B().identityStore}return e.prototype.execute=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]})})},e.prototype.setup=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return e.instanceName&&(this.identityStore=B(e.instanceName).identityStore),[2]})})},e}(),en=function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var r=e[t];if(!ei(t,r))return!1}return!0},ei=function(e,t){var r,n;if("string"!=typeof e)return!1;if(Array.isArray(t)){var i=!0;try{for(var o=(0,T.XA)(t),s=o.next();!s.done;s=o.next()){var u=s.value;if(Array.isArray(u))return!1;if("object"==typeof u)i=i&&en(u);else if(!["number","string"].includes(typeof u))return!1;if(!i)return!1}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else if(null==t)return!1;else if("object"==typeof t)return en(t);else if(!["number","string","boolean"].includes(typeof t))return!1;return!0},eo=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return(0,T.pi)({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(y.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(y.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(y.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(y.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(y.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(y.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(y.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(y.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(y.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[y.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,r){if(this._validate(e,t,r)){var n=this._properties[e];return void 0===n&&(n={},this._properties[e]=n),n[t]=r,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,r){return!(void 0!==this._properties[y.CLEAR_ALL]||this._propertySet.has(t))&&(e===y.ADD?"number"==typeof r:e===y.UNSET||e===y.REMOVE||ei(t,r))},e}();(o=y||(y={})).SET="$set",o.SET_ONCE="$setOnce",o.ADD="$add",o.APPEND="$append",o.PREPEND="$prepend",o.REMOVE="$remove",o.PREINSERT="$preInsert",o.POSTINSERT="$postInsert",o.UNSET="$unset",o.CLEAR_ALL="$clearAll";var es=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(e){return this.productId=e,this},e.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},e.prototype.setPrice=function(e){return this.price=e,this},e.prototype.setRevenueType=function(e){return this.revenueType=e,this},e.prototype.setCurrency=function(e){return this.currency=e,this},e.prototype.setRevenue=function(e){return this.revenue=e,this},e.prototype.setReceipt=function(e){return this.receipt=e,this},e.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},e.prototype.setEventProperties=function(e){return en(e)&&(this.properties=e),this},e.prototype.getEventProperties=function(){var e=this.properties?(0,T.pi)({},this.properties):{};return e[b.REVENUE_PRODUCT_ID]=this.productId,e[b.REVENUE_QUANTITY]=this.quantity,e[b.REVENUE_PRICE]=this.price,e[b.REVENUE_TYPE]=this.revenueType,e[b.REVENUE_CURRENCY]=this.currency,e[b.REVENUE]=this.revenue,e[b.RECEIPT]=this.receipt,e[b.RECEIPT_SIG]=this.receiptSig,e},e}();(s=b||(b={})).REVENUE_PRODUCT_ID="$productId",s.REVENUE_QUANTITY="$quantity",s.REVENUE_PRICE="$price",s.REVENUE_TYPE="$revenueType",s.REVENUE_CURRENCY="$currency",s.REVENUE="$revenue",s.RECEIPT="$receipt",s.RECEIPT_SIG="$receiptSig";var eu=function(e,t){return void 0===t&&(t=Date.now()),Date.now()-t>e},ea=function(){function e(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(e,t){var r,n;return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(i){switch(i.label){case 0:if(this.plugins.some(function(t){return t.name===e.name}))return t.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2];return void 0===e.name&&(e.name=Y(),t.loggerProvider.warn("Plugin name is undefined. \n      Generating a random UUID for plugin name: ".concat(e.name,". \n      Set a name for the plugin to prevent it from being added multiple times."))),e.type=null!==(r=e.type)&&void 0!==r?r:"enrichment",[4,null===(n=e.setup)||void 0===n?void 0:n.call(e,t,this.client)];case 1:return i.sent(),this.plugins.push(e),[2]}})})},e.prototype.deregister=function(e,t){var r;return(0,T.mG)(this,void 0,void 0,function(){var n,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(-1===(n=this.plugins.findIndex(function(t){return t.name===e})))return t.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2];return i=this.plugins[n],this.plugins.splice(n,1),[4,null===(r=i.teardown)||void 0===r?void 0:r.call(i)];case 1:return o.sent(),[2]}})})},e.prototype.reset=function(e){this.applying=!1,this.plugins.map(function(e){var t;return null===(t=e.teardown)||void 0===t?void 0:t.call(e)}),this.plugins=[],this.client=e},e.prototype.push=function(e){var t=this;return new Promise(function(r){t.queue.push([e,r]),t.scheduleApply(0)})},e.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout(function(){t.apply(t.queue.shift()).then(function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)})},e))},e.prototype.apply=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t,r,n,i,o,s,u,a,c,l,d,f,h,p;return(0,T.Jh)(this,function(v){switch(v.label){case 0:if(!e)return[2];t=(0,T.CR)(e,1)[0],r=(0,T.CR)(e,2)[1],n=this.plugins.filter(function(e){return"before"===e.type}),v.label=1;case 1:v.trys.push([1,6,7,8]),o=(i=(0,T.XA)(n)).next(),v.label=2;case 2:if(o.done)return[3,5];if(!(s=o.value).execute)return[3,4];return[4,s.execute((0,T.pi)({},t))];case 3:if(null===(u=v.sent()))return r({event:t,code:0,message:""}),[2];t=u,v.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return d={error:v.sent()},[3,8];case 7:try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(d)throw d.error}return[7];case 8:a=this.plugins.filter(function(e){return"enrichment"===e.type||void 0===e.type}),v.label=9;case 9:v.trys.push([9,14,15,16]),l=(c=(0,T.XA)(a)).next(),v.label=10;case 10:if(l.done)return[3,13];if(!(s=l.value).execute)return[3,12];return[4,s.execute((0,T.pi)({},t))];case 11:if(null===(u=v.sent()))return r({event:t,code:0,message:""}),[2];t=u,v.label=12;case 12:return l=c.next(),[3,10];case 13:return[3,16];case 14:return h={error:v.sent()},[3,16];case 15:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(h)throw h.error}return[7];case 16:return Promise.all(this.plugins.filter(function(e){return"destination"===e.type}).map(function(e){var r=(0,T.pi)({},t);return e.execute(r).catch(function(e){return W(r,0,String(e))})})).then(function(e){var n=(0,T.CR)(e,1)[0]||W(t,100,"Event not tracked, no destination plugins on the instance");r(n)}),[2]}})})},e.prototype.flush=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,t=this;return(0,T.Jh)(this,function(r){switch(r.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(e){return t.apply(e)}))];case 1:return r.sent(),[4,Promise.all(this.plugins.filter(function(e){return"destination"===e.type}).map(function(e){return e.flush&&e.flush()}))];case 2:return r.sent(),[2]}})})},e}();(u=w||(w={})).SET="$set",u.SET_ONCE="$setOnce",u.ADD="$add",u.APPEND="$append",u.PREPEND="$prepend",u.REMOVE="$remove",u.PREINSERT="$preInsert",u.POSTINSERT="$postInsert",u.UNSET="$unset",u.CLEAR_ALL="$clearAll",(a=S||(S={})).IDENTIFY="$identify",a.GROUP_IDENTIFY="$groupidentify",a.REVENUE="revenue_amount";var ec=function(e,t){return(0,T.pi)((0,T.pi)({},t),{event_type:S.IDENTIFY,user_properties:e.getUserProperties()})},el=function(e,t,r,n){var i;return(0,T.pi)((0,T.pi)({},n),{event_type:S.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:((i={})[e]=t,i)})},ed=function(e,t,r){var n,i=new eo;return i.set(e,t),(0,T.pi)((0,T.pi)({},r),{event_type:S.IDENTIFY,user_properties:i.getUserProperties(),groups:((n={})[e]=t,n)})},ef=function(){function e(e){void 0===e&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new ea(this),this.name=e}return e.prototype._init=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}})})},e.prototype.runQueuedFunctions=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t,r,n,i,o,s;return(0,T.Jh)(this,function(u){switch(u.label){case 0:t=this[e],this[e]=[],u.label=1;case 1:u.trys.push([1,8,9,10]),n=(r=(0,T.XA)(t)).next(),u.label=2;case 2:if(n.done)return[3,7];if(!((i=(0,n.value)())&&"promise"in i))return[3,4];return[4,i.promise];case 3:return u.sent(),[3,6];case 4:return[4,i];case 5:u.sent(),u.label=6;case 6:return n=r.next(),[3,2];case 7:return[3,10];case 8:return o={error:u.sent()},[3,10];case 9:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 10:if(!this[e].length)return[3,12];return[4,this.runQueuedFunctions(e)];case 11:u.sent(),u.label=12;case 12:return[2]}})})},e.prototype.track=function(e,t,r){var n=(0,T.pi)((0,T.pi)((0,T.pi)({},"string"==typeof e?{event_type:e}:e),r),t&&{event_properties:t});return U(this.dispatch(n))},e.prototype.identify=function(e,t){var r=ec(e,t);return U(this.dispatch(r))},e.prototype.groupIdentify=function(e,t,r,n){var i=el(e,t,r,n);return U(this.dispatch(i))},e.prototype.setGroup=function(e,t,r){var n=ed(e,t,r);return U(this.dispatch(n))},e.prototype.revenue=function(e,t){var r=(0,T.pi)((0,T.pi)({},t),{event_type:S.REVENUE,event_properties:e.getEventProperties()});return U(this.dispatch(r))},e.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),U())},e.prototype._addPlugin=function(e){return U(this.timeline.register(e,this.config))},e.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),U())},e.prototype._removePlugin=function(e){return U(this.timeline.deregister(e,this.config))},e.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(W(e,0,"Client not initialized"));this.process(e).then(t)},e.prototype.dispatch=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t=this;return(0,T.Jh)(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(r){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,r))})]})})},e.prototype.process=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t,r;return(0,T.Jh)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.config.optOut)return[2,W(e,0,"Event skipped due to optOut config")];return[4,this.timeline.push(e)];case 1:return 200===(t=n.sent()).code?this.config.loggerProvider.log(t.message):100===t.code?this.config.loggerProvider.warn(t.message):this.config.loggerProvider.error(t.message),[2,t];case 2:return r=String(n.sent()),this.config.loggerProvider.error(r),[2,t=W(e,0,r)];case 3:return[2]}})})},e.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},e.prototype._setOptOut=function(e){this.config.optOut=!!e},e.prototype.flush=function(){return U(this.timeline.flush())},e}(),eh=function(e,t){return"boolean"==typeof e?e:(null==e?void 0:e[t])!==!1},ep=function(e){return eh(e,"attribution")},ev=function(e){return eh(e,"pageViews")},eg=function(e){return eh(e,"sessions")},em=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.elementInteractions||"object"==typeof e.elementInteractions)},ey=function(e){if(em(e.autocapture)&&"object"==typeof e.autocapture&&"object"==typeof e.autocapture.elementInteractions)return e.autocapture.elementInteractions},eb=function(e){var t,r=function(){return!1},n=void 0,i=e.pageCounter;return ev(e.defaultTracking)&&(r=void 0,t=void 0,e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.pageViews&&"object"==typeof e.defaultTracking.pageViews&&("trackOn"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(n=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(t=e.defaultTracking.pageViews.eventType))),{trackOn:r,trackHistoryChanges:n,eventType:t,pageCounter:i}},ew=function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.name,o=n.args,s=n.resolve,u=e&&e[i];if("function"==typeof u){var a=u.apply(e,o);"function"==typeof s&&s(null==a?void 0:a.promise)}}return e},eS=function(e){return e&&void 0!==e._q},eE=function(){if("undefined"==typeof navigator)return"";var e,t,r,n,i=navigator.userLanguage;return null!==(n=null!==(r=null!==(t=null===(e=navigator.languages)||void 0===e?void 0:e[0])&&void 0!==t?t:navigator.language)&&void 0!==r?r:i)&&void 0!==n?n:""},eI=function(){function e(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat("amplitude-ts","/").concat("2.12.0"),"undefined"!=typeof navigator&&(this.userAgent=navigator.userAgent)}return e.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},e.prototype.execute=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t,r,n,i,o;return(0,T.Jh)(this,function(s){return t=new Date().getTime(),r=null!==(i=this.config.lastEventId)&&void 0!==i?i:-1,n=null!==(o=e.event_id)&&void 0!==o?o:r+1,this.config.lastEventId=n,e.time||(this.config.lastEventTime=t),[2,(0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:t},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:eE()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:Y(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:n,library:this.library,user_agent:this.userAgent})]})})},e}(),e_=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,!0]})})},e.prototype.get=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return[2,this.memoryStorage.get(e)]})})},e.prototype.getRaw=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return[2,(t=r.sent())?JSON.stringify(t):void 0]}})})},e.prototype.set=function(e,t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(r){return this.memoryStorage.set(e,t),[2]})})},e.prototype.remove=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return this.memoryStorage.delete(e),[2]})})},e.prototype.reset=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return this.memoryStorage.clear(),[2]})})},e}(),ex=function(e,t,r){return void 0===t&&(t=""),void 0===r&&(r=10),["AMP",t,e.substring(0,r)].filter(Boolean).join("_")},eC=function(){function e(e){this.options=(0,T.pi)({},e)}return e.prototype.isEnabled=function(){return(0,T.mG)(this,void 0,void 0,function(){var t,r;return(0,T.Jh)(this,function(n){switch(n.label){case 0:if(!N())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),r="AMP_TEST",n.label=1;case 1:return n.trys.push([1,4,5,7]),[4,t.set(r,e.testValue)];case 2:return n.sent(),[4,t.get(r)];case 3:return[2,n.sent()===e.testValue];case 4:return n.sent(),[2,!1];case 5:return[4,t.remove(r)];case 6:return n.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(e){var t;return(0,T.mG)(this,void 0,void 0,function(){var r,n;return(0,T.Jh)(this,function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(!(r=i.sent()))return[2,void 0];try{if(n=null!==(t=ek(r))&&void 0!==t?t:eP(r),void 0===n)return console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0];return[2,JSON.parse(n)]}catch(t){return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]}return[2]}})})},e.prototype.getRaw=function(e){var t,r;return(0,T.mG)(this,void 0,void 0,function(){var n,i;return(0,T.Jh)(this,function(o){return(i=(null!==(r=null===(t=null==(n=N())?void 0:n.document)||void 0===t?void 0:t.cookie.split("; "))&&void 0!==r?r:[]).find(function(t){return 0===t.indexOf(e+"=")}))?[2,i.substring(e.length+1)]:[2,void 0]})})},e.prototype.set=function(e,t){var r;return(0,T.mG)(this,void 0,void 0,function(){var n,i,o,s,u,a,c;return(0,T.Jh)(this,function(l){try{n=null!==(r=this.options.expirationDays)&&void 0!==r?r:0,i=null!==t?n:-1,o=void 0,i&&((s=new Date).setTime(s.getTime()+864e5*i),o=s),u="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),o&&(u+="; expires=".concat(o.toUTCString())),u+="; path=/",this.options.domain&&(u+="; domain=".concat(this.options.domain)),this.options.secure&&(u+="; Secure"),this.options.sameSite&&(u+="; SameSite=".concat(this.options.sameSite)),(a=N())&&(a.document.cookie=u)}catch(t){c=t instanceof Error?t.message:String(t),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(c))}return[2]})})},e.prototype.remove=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}})})},e.prototype.reset=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2]})})},e}(),ek=function(e){try{return decodeURIComponent(atob(e))}catch(e){return}},eP=function(e){try{return decodeURIComponent(atob(decodeURIComponent(e)))}catch(e){return}},eO=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){if("object"!=typeof e)return null;var t,r,n,i,o,s,u,a,c,l,d,f,h,p,v,g,y,b,w,S,E,I,_=e.code||0,x=this.buildStatus(_);switch(x){case m.Success:return{status:x,statusCode:_,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(r=e.payload_size_bytes)&&void 0!==r?r:0,serverUploadTime:null!==(n=e.server_upload_time)&&void 0!==n?n:0}};case m.Invalid:return{status:x,statusCode:_,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(u=e.events_with_missing_fields)&&void 0!==u?u:{},eventsWithInvalidIdLengths:null!==(a=e.events_with_invalid_id_lengths)&&void 0!==a?a:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=e.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(d=e.silenced_devices)&&void 0!==d?d:[],silencedEvents:null!==(f=e.silenced_events)&&void 0!==f?f:[],throttledDevices:null!==(h=e.throttled_devices)&&void 0!==h?h:{},throttledEvents:null!==(p=e.throttled_events)&&void 0!==p?p:[]}};case m.PayloadTooLarge:return{status:x,statusCode:_,body:{error:null!==(v=e.error)&&void 0!==v?v:""}};case m.RateLimit:return{status:x,statusCode:_,body:{error:null!==(g=e.error)&&void 0!==g?g:"",epsThreshold:null!==(y=e.eps_threshold)&&void 0!==y?y:0,throttledDevices:null!==(b=e.throttled_devices)&&void 0!==b?b:{},throttledUsers:null!==(w=e.throttled_users)&&void 0!==w?w:{},exceededDailyQuotaDevices:null!==(S=e.exceeded_daily_quota_devices)&&void 0!==S?S:{},exceededDailyQuotaUsers:null!==(E=e.exceeded_daily_quota_users)&&void 0!==E?E:{},throttledEvents:null!==(I=e.throttled_events)&&void 0!==I?I:[]}};case m.Timeout:default:return{status:x,statusCode:_}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?m.Success:429===e?m.RateLimit:413===e?m.PayloadTooLarge:408===e?m.Timeout:e>=400&&e<500?m.Invalid:e>=500?m.Failed:m.Unknown},e}(),eT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.ZT)(t,e),t.prototype.send=function(e,t){return(0,T.mG)(this,void 0,void 0,function(){var r,n;return(0,T.Jh)(this,function(i){switch(i.label){case 0:if("undefined"==typeof fetch)throw Error("FetchTransport is not supported");return[4,fetch(e,{headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"})];case 1:return[4,(r=i.sent()).text()];case 2:n=i.sent();try{return[2,this.buildResponse(JSON.parse(n))]}catch(e){return[2,this.buildResponse({code:r.status})]}return[2]}})})},t}(eO),eR=function(){function e(e){this.storage=e}return e.prototype.isEnabled=function(){return(0,T.mG)(this,void 0,void 0,function(){var t,r,n;return(0,T.Jh)(this,function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];t=String(Date.now()),r=new e(this.storage),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,r.set(n,t)];case 2:return i.sent(),[4,r.get(n)];case 3:return[2,i.sent()===t];case 4:return i.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:if(!(t=r.sent()))return[2,void 0];return[2,JSON.parse(t)];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},e.prototype.getRaw=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){return[2,(null===(t=this.storage)||void 0===t?void 0:t.getItem(e))||void 0]})})},e.prototype.set=function(e,t){return(0,T.mG)(this,void 0,void 0,function(){var r;return(0,T.Jh)(this,function(n){try{null===(r=this.storage)||void 0===r||r.setItem(e,JSON.stringify(t))}catch(e){}return[2]})})},e.prototype.remove=function(e){return(0,T.mG)(this,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){try{null===(t=this.storage)||void 0===t||t.removeItem(e)}catch(e){}return[2]})})},e.prototype.reset=function(){return(0,T.mG)(this,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(t){try{null===(e=this.storage)||void 0===e||e.clear()}catch(e){}return[2]})})},e}(),eA=function(e){function t(t){var r,n=e.call(this,null===(r=N())||void 0===r?void 0:r.localStorage)||this;return n.loggerProvider=null==t?void 0:t.loggerProvider,n}return(0,T.ZT)(t,e),t.prototype.set=function(t,r){return(0,T.mG)(this,void 0,void 0,function(){var n,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(!(Array.isArray(r)&&r.length>1e3))return[3,2];return n=r.length-1e3,[4,e.prototype.set.call(this,t,r.slice(0,1e3))];case 1:return o.sent(),null===(i=this.loggerProvider)||void 0===i||i.error("Failed to save ".concat(n," events because the queue length exceeded ").concat(1e3,".")),[3,4];case 2:return[4,e.prototype.set.call(this,t,r)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},t}(eR),eL=function(e){function t(){var t;return e.call(this,null===(t=N())||void 0===t?void 0:t.sessionStorage)||this}return(0,T.ZT)(t,e),t}(eR),eM=function(e){function t(){var t=e.apply(this,(0,T.ev)([],(0,T.CR)(arguments),!1))||this;return t.state={done:4},t}return(0,T.ZT)(t,e),t.prototype.send=function(e,t){return(0,T.mG)(this,void 0,void 0,function(){var r=this;return(0,T.Jh)(this,function(n){return[2,new Promise(function(n,i){"undefined"==typeof XMLHttpRequest&&i(Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=function(){if(o.readyState===r.state.done){var e=o.responseText;try{n(r.buildResponse(JSON.parse(e)))}catch(e){n(r.buildResponse({code:o.status}))}}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(t))})]})})},t}(eO),eU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.ZT)(t,e),t.prototype.send=function(e,t){return(0,T.mG)(this,void 0,void 0,function(){var r=this;return(0,T.Jh)(this,function(n){return[2,new Promise(function(n,i){var o=N();if(!(null==o?void 0:o.navigator.sendBeacon))throw Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(t);if(o.navigator.sendBeacon(e,JSON.stringify(t)))return n(r.buildResponse({code:200,events_ingested:t.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}));return n(r.buildResponse({code:500}))}catch(e){i(e)}})]})})},t}(eO),eN=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return(0,T.mG)(void 0,(0,T.ev)([e,t],(0,T.CR)(r),!1),void 0,function(e,t,r){var n,i,o,s,u,a,c,l,d;return void 0===r&&(r=!0),(0,T.Jh)(this,function(f){switch(f.label){case 0:return n="".concat("amp","_").concat(e.substring(0,6)),[4,t.getRaw(n)];case 1:if(!(i=f.sent()))return[2,{optOut:!1}];if(!r)return[3,3];return[4,t.remove(n)];case 2:f.sent(),f.label=3;case 3:return s=(o=(0,T.CR)(i.split("."),6))[0],u=o[1],a=o[2],c=o[3],l=o[4],d=o[5],[2,{deviceId:s,userId:ej(u),sessionId:eD(c),lastEventId:eD(d),lastEventTime:eD(l),optOut:!!a}]}})})},eD=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},ej=function(e){if(atob&&escape&&e)try{return decodeURIComponent(escape(atob(e)))}catch(e){return}},eq="[Amplitude]",eB="".concat(eq," Form Started"),eF="".concat(eq," Form Submitted"),eJ="".concat(eq," File Downloaded"),eG="session_start",ez="session_end",eV="".concat(eq," File Extension"),eW="".concat(eq," File Name"),e$="".concat(eq," Link ID"),eK="".concat(eq," Link Text"),eZ="".concat(eq," Link URL"),eX="".concat(eq," Form ID"),eQ="".concat(eq," Form Name"),eH="".concat(eq," Form Destination"),eY="cookie",e0=function(e){function t(t,r,n,i,o,s,u,a,c,l,d,f,h,p,v,m,y,b,w,S,E,I,_,x,C,k,P,O,T,R,A,L,M,U){void 0===n&&(n=new e_),void 0===i&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===a&&(a=1e3),void 0===c&&(c=5),void 0===l&&(l=30),void 0===d&&(d=eY),void 0===m&&(m=new K),void 0===y&&(y=g.Warn),void 0===w&&(w=!1),void 0===S&&(S=!1),void 0===_&&(_=""),void 0===x&&(x="US"),void 0===k&&(k=18e5),void 0===P&&(P=new eA({loggerProvider:m})),void 0===O&&(O={ipAddress:!0,language:!0,platform:!0}),void 0===T&&(T="fetch"),void 0===R&&(R=!1),void 0===A&&(A=!1);var N=e.call(this,{apiKey:t,storageProvider:P,transportProvider:e3(T)})||this;return N.apiKey=t,N.appVersion=r,N.cookieOptions=i,N.defaultTracking=o,N.autocapture=s,N.flushIntervalMillis=a,N.flushMaxRetries=c,N.flushQueueSize=l,N.identityStorage=d,N.ingestionMetadata=f,N.instanceName=h,N.loggerProvider=m,N.logLevel=y,N.minIdLength=b,N.offline=w,N.partnerId=E,N.plan=I,N.serverUrl=_,N.serverZone=x,N.sessionTimeout=k,N.storageProvider=P,N.trackingOptions=O,N.transport=T,N.useBatch=R,N.fetchRemoteConfig=A,N._optOut=!1,N._cookieStorage=n,N.deviceId=u,N.lastEventId=p,N.lastEventTime=v,N.optOut=S,N.sessionId=C,N.pageCounter=M,N.userId=L,N.debugLogsEnabled=U,N.loggerProvider.enable(U?g.Debug:N.logLevel),N}return(0,T.ZT)(t,e),Object.defineProperty(t.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(e){this._cookieStorage!==e&&(this._cookieStorage=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId!==e&&(this._deviceId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId!==e&&(this._userId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId!==e&&(this._sessionId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut!==e&&(this._optOut=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(e){this._lastEventTime!==e&&(this._lastEventTime=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(e){this._lastEventId!==e&&(this._lastEventId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(e){this._pageCounter!==e&&(this._pageCounter=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLogsEnabled",{set:function(e){this._debugLogsEnabled!==e&&(this._debugLogsEnabled=e,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var e={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(ex(this.apiKey),e)},t}(X),e1=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return(0,T.mG)(void 0,(0,T.ev)([e],(0,T.CR)(t),!1),void 0,function(e,t,r){var n,i,o,s,u,a,c,l,d,f,h,p,v,g,m,y,b,w,S,E,I,_,x,C,k,P,O,R,A,L,M,U,N,j,q,B,F,J,G,z,V,W,$;return void 0===t&&(t={}),(0,T.Jh)(this,function(K){switch(K.label){case 0:if(n=t.identityStorage||eY,S={},!(n!==eY))return[3,1];return o="",[3,5];case 1:if(!(null!==(I=null===(E=t.cookieOptions)||void 0===E?void 0:E.domain)&&void 0!==I))return[3,2];return s=I,[3,4];case 2:return[4,e4()];case 3:s=K.sent(),K.label=4;case 4:o=s,K.label=5;case 5:return i=T.pi.apply(void 0,[(S.domain=o,S.expiration=365,S.sameSite="Lax",S.secure=!1,S.upgrade=!0,S),t.cookieOptions]),[4,eN(e,u=e2(t.identityStorage,i),null===(x=null===(_=t.cookieOptions)||void 0===_?void 0:_.upgrade)||void 0===x||x)];case 6:return a=K.sent(),[4,u.get(ex(e))];case 7:return c=K.sent(),l=D(),d=null!==(R=null!==(O=null!==(P=null!==(k=null!==(C=t.deviceId)&&void 0!==C?C:l.ampDeviceId)&&void 0!==k?k:l.deviceId)&&void 0!==P?P:null==c?void 0:c.deviceId)&&void 0!==O?O:a.deviceId)&&void 0!==R?R:Y(),f=null!==(A=null==c?void 0:c.lastEventId)&&void 0!==A?A:a.lastEventId,h=null!==(L=null==c?void 0:c.lastEventTime)&&void 0!==L?L:a.lastEventTime,p=null!==(U=null!==(M=t.optOut)&&void 0!==M?M:null==c?void 0:c.optOut)&&void 0!==U?U:a.optOut,v=null!==(N=null==c?void 0:c.sessionId)&&void 0!==N?N:a.sessionId,g=null!==(q=null!==(j=t.userId)&&void 0!==j?j:null==c?void 0:c.userId)&&void 0!==q?q:a.userId,r.previousSessionDeviceId=null!==(B=null==c?void 0:c.deviceId)&&void 0!==B?B:a.deviceId,r.previousSessionUserId=null!==(F=null==c?void 0:c.userId)&&void 0!==F?F:a.userId,m={ipAddress:null===(G=null===(J=t.trackingOptions)||void 0===J?void 0:J.ipAddress)||void 0===G||G,language:null===(V=null===(z=t.trackingOptions)||void 0===z?void 0:z.language)||void 0===V||V,platform:null===($=null===(W=t.trackingOptions)||void 0===W?void 0:W.platform)||void 0===$||$},y=null==c?void 0:c.pageCounter,b=null==c?void 0:c.debugLogsEnabled,void 0!==t.autocapture&&(t.defaultTracking=t.autocapture),[4,(w=new e0(e,t.appVersion,u,i,t.defaultTracking,t.autocapture,d,t.flushIntervalMillis,t.flushMaxRetries,t.flushQueueSize,n,t.ingestionMetadata,t.instanceName,f,h,t.loggerProvider,t.logLevel,t.minIdLength,t.offline,p,t.partnerId,t.plan,t.serverUrl,t.serverZone,v,t.sessionTimeout,t.storageProvider,m,t.transport,t.useBatch,t.fetchRemoteConfig,g,y,b)).storageProvider.isEnabled()];case 8:return K.sent()||(w.loggerProvider.warn("Storage provider ".concat(w.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),w.storageProvider=new e_),[2,w]}})})},e2=function(e,t){switch(void 0===e&&(e=eY),void 0===t&&(t={}),e){case"localStorage":return new eA;case"sessionStorage":return new eL;case"none":return new e_;default:return new eC((0,T.pi)((0,T.pi)({},t),{expirationDays:t.expiration}))}},e3=function(e){return"xhr"===e?new eM:"beacon"===e?new eU:new eT},e4=function(e){return(0,T.mG)(void 0,void 0,void 0,function(){var t,r,n,i,o,s;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return[4,new eC().isEnabled()];case 1:if(!u.sent()||!e&&("undefined"==typeof location||!location.hostname))return[2,""];for(t=(null!=e?e:location.hostname).split("."),r=[],n="AMP_TLDTEST",i=t.length-2;i>=0;--i)r.push(t.slice(i).join("."));i=0,u.label=2;case 2:if(!(i<r.length))return[3,7];return[4,(s=new eC({domain:"."+(o=r[i])})).set(n,1)];case 3:return u.sent(),[4,s.get(n)];case 4:if(!u.sent())return[3,6];return[4,s.remove(n)];case 5:return u.sent(),[2,"."+o];case 6:return i++,[3,2];case 7:return[2,""]}})})},e5=r(8772),e6=function(){var e,t=(0,e5.l)();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce(function(e,t){var r=t.split("=",2),n=e8(r[0]),i=e8(r[1]);return i&&(e[n]=i),e},{}):{}},e8=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},e7="dclid",e9="fbclid",te="gbraid",tt="gclid",tr="ko_click_id",tn="li_fat_id",ti="msclkid",to="rtd_cid",ts="ttclid",tu="twclid",ta="wbraid",tc={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},tl=function(){function e(){}return e.prototype.parse=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,(0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)({},tc),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var e=e6();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=null!==(t=null===(e=r.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(e){}return r},e.prototype.getClickIds=function(){var e,t=e6();return(e={})[e7]=t[e7],e[e9]=t[e9],e[te]=t[te],e[tt]=t[tt],e[tr]=t[tr],e[tn]=t[tn],e[ti]=t[ti],e[to]=t[to],e[ts]=t[ts],e[tu]=t[tu],e[ta]=t[ta],e},e}();(c=E||(E={})).SET="$set",c.SET_ONCE="$setOnce",c.ADD="$add",c.APPEND="$append",c.PREPEND="$prepend",c.REMOVE="$remove",c.PREINSERT="$preInsert",c.POSTINSERT="$postInsert",c.UNSET="$unset",c.CLEAR_ALL="$clearAll",(l=I||(I={})).REVENUE_PRODUCT_ID="$productId",l.REVENUE_QUANTITY="$quantity",l.REVENUE_PRICE="$price",l.REVENUE_TYPE="$revenueType",l.REVENUE_CURRENCY="$currency",l.REVENUE="$revenue",(d=_||(_={})).IDENTIFY="$identify",d.GROUP_IDENTIFY="$groupidentify",d.REVENUE="revenue_amount";var td=function(e){var t={};for(var r in e){var n=e[r];n&&(t[r]=n)}return t},tf=function(e){void 0===e&&(e={});var t,r,n,i=(0,e5.l)(),o=void 0,s=e.trackOn,u=e.trackHistoryChanges,a=e.eventType,c=void 0===a?"[Amplitude] Page Viewed":a,l=function(e){var t=e;try{t=decodeURI(e)}catch(e){null==o||o.error("Malformed URI sequence: ",e)}return t},d=function(){return(0,T.mG)(void 0,void 0,void 0,function(){var e,t,r;return(0,T.Jh)(this,function(n){switch(n.label){case 0:return e=l("undefined"!=typeof location&&location.href||""),r={event_type:c},t=[{}],[4,th()];case 1:return[2,(r.event_properties=T.pi.apply(void 0,[T.pi.apply(void 0,t.concat([n.sent()])),{"[Amplitude] Page Domain":"undefined"!=typeof location&&location.hostname||"","[Amplitude] Page Location":e,"[Amplitude] Page Path":"undefined"!=typeof location&&l(location.pathname)||"","[Amplitude] Page Title":"undefined"!=typeof document&&document.title||"","[Amplitude] Page URL":e.split("?")[0]}]),r)]}})})},f=function(){return void 0===s||"function"==typeof s&&s()},h="undefined"!=typeof location?location.href:null,p=function(){return(0,T.mG)(void 0,void 0,void 0,function(){var e,r,n,i;return(0,T.Jh)(this,function(s){switch(s.label){case 0:if(r=tv(u,e=location.href,h||"")&&f(),h=e,!r)return[3,4];if(null==o||o.log("Tracking page view event"),null!=t)return[3,1];return[3,3];case 1:return i=(n=t).track,[4,d()];case 2:i.apply(n,[s.sent()]),s.label=3;case 3:s.label=4;case 4:return[2]}})})},v=function(){p()};return{name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(e,s){return(0,T.mG)(void 0,void 0,void 0,function(){var u,a;return(0,T.Jh)(this,function(c){switch(c.label){case 0:if(t=s,n=e,(o=e.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",v),r=i.history.pushState,i.history.pushState=new Proxy(i.history.pushState,{apply:function(e,t,r){var n=(0,T.CR)(r,3),i=n[0],o=n[1],s=n[2];e.apply(t,[i,o,s]),p()}})),!f())return[3,2];return o.log("Tracking page view event"),a=(u=t).track,[4,d()];case 1:a.apply(u,[c.sent()]),c.label=2;case 2:return[2]}})})},execute:function(e){return(0,T.mG)(void 0,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){switch(r.label){case 0:if(!("attribution"===s&&tp(e)))return[3,2];return null==o||o.log("Enriching campaign event to page view event with campaign parameters"),[4,d()];case 1:t=r.sent(),e.event_type=t.event_type,e.event_properties=(0,T.pi)((0,T.pi)({},e.event_properties),t.event_properties),r.label=2;case 2:return n&&e.event_type===c&&(n.pageCounter=n.pageCounter?n.pageCounter+1:1,e.event_properties=(0,T.pi)((0,T.pi)({},e.event_properties),{"[Amplitude] Page Counter":n.pageCounter})),[2,e]}})})},teardown:function(){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return i&&(i.removeEventListener("popstate",v),r&&(i.history.pushState=r)),[2]})})}}},th=function(){return(0,T.mG)(void 0,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(t){switch(t.label){case 0:return e=td,[4,new tl().parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},tp=function(e){if("$identify"===e.event_type&&e.user_properties){var t=e.user_properties,r=t[E.SET]||{},n=t[E.UNSET]||{},i=(0,T.ev)((0,T.ev)([],(0,T.CR)(Object.keys(r)),!1),(0,T.CR)(Object.keys(n)),!1);return Object.keys(tc).every(function(e){return i.includes(e)})}return!1},tv=function(e,t,r){if("pathOnly"===e){if(""==r)return!0;var n=new URL(t),i=new URL(r);return n.origin+n.pathname!==i.origin+i.pathname}return t!==r},tg=function(){var e,t=[],r=function(e,r,n){e.addEventListener(r,n),t.push({element:e,type:r,handler:n})},n=function(){t.forEach(function(e){var t=e.element,r=e.type,n=e.handler;null==t||t.removeEventListener(r,n)}),t=[]};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(t,n){return(0,T.mG)(void 0,void 0,void 0,function(){var i;return(0,T.Jh)(this,function(o){return null===(i=N())||void 0===i||i.addEventListener("load",function(){if(!n){t.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if("undefined"!=typeof document){var i=function(e){var t=!1;r(e,"change",function(){var r,i=ty(e);t||n.track(eB,((r={})[eX]=tm(e.id),r[eQ]=tm(e.name),r[eH]=i,r)),t=!0}),r(e,"submit",function(){var r,i,o=ty(e);t||n.track(eB,((r={})[eX]=tm(e.id),r[eQ]=tm(e.name),r[eH]=o,r)),n.track(eF,((i={})[eX]=tm(e.id),i[eQ]=tm(e.name),i[eH]=o,i)),t=!1})};Array.from(document.getElementsByTagName("form")).forEach(i),"undefined"!=typeof MutationObserver&&(e=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){"FORM"===e.nodeName&&i(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("form")).map(i)})})})).observe(document.body,{subtree:!0,childList:!0})}}),[2]})})},execute:function(e){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return[2,e]})})},teardown:function(){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return null==e||e.disconnect(),n(),[2]})})}}},tm=function(e){if("string"==typeof e)return e},ty=function(e){var t=e.getAttribute("action");try{t=new URL(encodeURI(null!=t?t:""),window.location.href).href}catch(e){}return t},tb=function(){var e,t=[],r=function(e,r,n){e.addEventListener(r,n),t.push({element:e,type:r,handler:n})},n=function(){t.forEach(function(e){var t=e.element,r=e.type,n=e.handler;null==t||t.removeEventListener(r,n)}),t=[]};return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(t,n){return(0,T.mG)(void 0,void 0,void 0,function(){var i;return(0,T.Jh)(this,function(o){return null===(i=N())||void 0===i||i.addEventListener("load",function(){if(!n){t.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if("undefined"!=typeof document){var i=function(e){try{t=new URL(e.href,window.location.href)}catch(e){return}var t,i=o.exec(t.href),s=null==i?void 0:i[1];s&&r(e,"click",function(){var r;s&&n.track(eJ,((r={})[eV]=s,r[eW]=t.pathname,r[e$]=e.id,r[eK]=e.text,r[eZ]=e.href,r))})},o=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/;Array.from(document.getElementsByTagName("a")).forEach(i),"undefined"!=typeof MutationObserver&&(e=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){"A"===e.nodeName&&i(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("a")).map(i)})})})).observe(document.body,{subtree:!0,childList:!0})}}),[2]})})},execute:function(e){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return[2,e]})})},teardown:function(){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return null==e||e.disconnect(),n(),[2]})})}}},tw=!1,tS=function(e){tw||void 0!==e.defaultTracking||(e.loggerProvider.warn("`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\n\namplitude.init(<YOUR_API_KEY>, {\n  defaultTracking: true,\n});\n\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details."),tw=!0)},tE=function(){var e=N(),t=[],r=function(r,n){e&&(e.addEventListener(r,n),t.push({type:r,handler:n}))},n=function(){t.forEach(function(t){var r=t.type,n=t.handler;e&&e.removeEventListener(r,n)}),t=[]};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(e,t){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(n){return"undefined"==typeof navigator?(e.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),e.offline=!1):(e.offline=!navigator.onLine,r("online",function(){e.loggerProvider.debug("Network connectivity changed to online."),e.offline=!1,setTimeout(function(){t.flush()},e.flushIntervalMillis)}),r("offline",function(){e.loggerProvider.debug("Network connectivity changed to offline."),e.offline=!0})),[2]})})},teardown:function(){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return n(),[2]})})}}};(f=x||(x={})).Unknown="unknown",f.Skipped="skipped",f.Success="success",f.RateLimit="rate_limit",f.PayloadTooLarge="payload_too_large",f.Invalid="invalid",f.Failed="failed",f.Timeout="Timeout",f.SystemError="SystemError",(h=C||(C={})).US="US",h.EU="EU";var tI="Remote config fetch rejected due to timeout after 5 seconds",t_="Unexpected error occurred",tx=function(){function e(e){var t=e.localConfig,r=e.configKeys,n=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(e,t,r){return(0,T.mG)(n,void 0,void 0,function(){var n,i,o;return(0,T.Jh)(this,function(s){switch(s.label){case 0:return n=Date.now(),[4,this.fetchWithTimeout(r)];case 1:if((i=s.sent())&&(o=i.configs&&i.configs[e]))return this.metrics.fetchTimeAPISuccess=Date.now()-n,[2,o[t]];return this.metrics.fetchTimeAPIFail=Date.now()-n,[2,void 0]}})})},this.fetchWithTimeout=function(e){return(0,T.mG)(n,void 0,void 0,function(){var t,r,n;return(0,T.Jh)(this,function(i){switch(i.label){case 0:return t=new AbortController,r=setTimeout(function(){return t.abort()},5e3),[4,this.fetchRemoteConfig(t.signal,e)];case 1:return n=i.sent(),clearTimeout(r),[2,n]}})})},this.fetchRemoteConfig=function(e,t){return(0,T.mG)(n,void 0,void 0,function(){var r,n,i,o,s,u,a,c,l,d,f;return(0,T.Jh)(this,function(h){switch(h.label){case 0:if(t===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(e.aborted)return[2,this.completeRequest({err:tI})];t!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=t,this.attempts=0),h.label=1;case 1:h.trys.push([1,3,,4]),r=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(i=(n=(0,T.XA)(this.configKeys)).next();!i.done;i=n.next())o=i.value,r.append("config_keys",o)}catch(e){l={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(l)throw l.error}}return t&&r.set("session_id",String(t)),s={headers:{Accept:"*/*"},method:"GET"},u="".concat(this.getServerUrl(),"?").concat(r.toString()),this.attempts+=1,[4,fetch(u,(0,T.pi)((0,T.pi)({},s),{signal:e}))];case 2:if(null===(a=h.sent()))return[2,this.completeRequest({err:t_})];switch(new eO().buildStatus(a.status)){case x.Success:return this.attempts=0,[2,this.parseAndStoreConfig(a)];case x.Failed:return[2,this.retryFetch(e,t)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:if(c=h.sent(),e.aborted)return[2,this.completeRequest({err:tI})];return[2,this.completeRequest({err:null!==(f=c.message)&&void 0!==f?f:t_})];case 4:return[2]}})})},this.retryFetch=function(e,t){return(0,T.mG)(n,void 0,void 0,function(){var r=this;return(0,T.Jh)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){return setTimeout(e,r.attempts*r.retryTimeout)})];case 1:return n.sent(),[2,this.fetchRemoteConfig(e,t)]}})})},this.parseAndStoreConfig=function(e){return(0,T.mG)(n,void 0,void 0,function(){var t;return(0,T.Jh)(this,function(r){switch(r.label){case 0:return[4,e.json()];case 1:return t=r.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,t]}})})},this.localConfig=t,this.configKeys=r}return e.prototype.getServerUrl=function(){return this.localConfig.serverZone===C.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===C.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},e.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw Error(t);r&&this.localConfig.loggerProvider.log(r)},e}(),tC=function(e){var t=e.localConfig,r=e.configKeys;return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,new tx({localConfig:t,configKeys:r})]})})},tk=function(){function e(e){this.config=e,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return e.prototype.initialize=function(){return(0,T.mG)(this,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(t){switch(t.label){case 0:return e=this,[4,tC({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return e.remoteConfigFetch=t.sent(),[2]}})})},e.prototype.generateJoinedConfig=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,t,r,n,i,o,s;return(0,T.Jh)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,3,,4]),!(t=this.remoteConfigFetch))return[3,2];return[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)];case 1:t=u.sent(),u.label=2;case 2:return e=t,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(e,null,2)),e&&"autocapture"in e&&("boolean"==typeof e.autocapture&&(this.config.autocapture=e.autocapture),"object"==typeof e.autocapture&&(void 0===this.config.autocapture&&(this.config.autocapture=e.autocapture),"boolean"==typeof this.config.autocapture&&(this.config.autocapture=(0,T.pi)({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture},e.autocapture)),"object"==typeof this.config.autocapture&&(this.config.autocapture=(0,T.pi)((0,T.pi)({},this.config.autocapture),e.autocapture))),this.config.defaultTracking=this.config.autocapture),this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),null!==(n=(s=this.config).requestMetadata)&&void 0!==n||(s.requestMetadata=new H),(null===(i=this.remoteConfigFetch)||void 0===i?void 0:i.metrics.fetchTimeAPISuccess)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),(null===(o=this.remoteConfigFetch)||void 0===o?void 0:o.metrics.fetchTimeAPIFail)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return r=u.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",r),[3,4];case 4:return[2,this.config]}})})},e}(),tP=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],tO=["div","span","h1","h2","h3","h4","h5","h6"],tT="[Amplitude] Element Clicked",tR="[Amplitude] Element Tag",tA="[Amplitude] Element Text",tL="[Amplitude] Element Selector",tM="[Amplitude] Page URL",tU="https://app.amplitude.com",tN={US:tU,EU:"https://app.eu.amplitude.com",STAGING:"https://apps.stag2.amplitude.com"},tD="amp-visual-tagging-selector-highlight",tj=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function tq(e){return"function"==typeof e}function tB(e){return tq(null==e?void 0:e.then)}function tF(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var tJ=tF(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function tG(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var tz=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,i,o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var s=(0,T.XA)(o),u=s.next();!u.done;u=s.next())u.value.remove(this)}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this)}var a=this.initialTeardown;if(tq(a))try{a()}catch(e){i=e instanceof tJ?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=(0,T.XA)(c),d=l.next();!d.done;d=l.next()){var f=d.value;try{tW(f)}catch(e){i=null!=i?i:[],e instanceof tJ?i=(0,T.ev)((0,T.ev)([],(0,T.CR)(i)),(0,T.CR)(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(i)throw new tJ(i)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)tW(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&tG(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&tG(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function tV(e){return e instanceof tz||e&&"closed"in e&&tq(e.remove)&&tq(e.add)&&tq(e.unsubscribe)}function tW(e){tq(e)?e():e.unsubscribe()}tz.EMPTY;var t$={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},tK={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=tK.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,T.ev)([e,t],(0,T.CR)(r))):setTimeout.apply(void 0,(0,T.ev)([e,t],(0,T.CR)(r)))},clearTimeout:function(e){var t=tK.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function tZ(e){tK.setTimeout(function(){var t=t$.onUnhandledError;if(t)t(e);else throw e})}function tX(){}var tQ=tH("C",void 0,void 0);function tH(e,t,r){return{kind:e,value:t,error:r}}var tY=null,t0=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,tV(t)&&t.add(r)):r.destination=t8,r}return(0,T.ZT)(t,e),t.create=function(e,t,r){return new t4(e,t,r)},t.prototype.next=function(e){this.isStopped?t6(tH("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?t6(tH("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?t6(tQ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(tz),t1=Function.prototype.bind;function t2(e,t){return t1.call(e,t)}var t3=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){t5(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){t5(e)}else t5(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){t5(e)}},e}(),t4=function(e){function t(t,r,n){var i,o,s=e.call(this)||this;return tq(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&t$.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&t2(t.next,o),error:t.error&&t2(t.error,o),complete:t.complete&&t2(t.complete,o)}):i=t,s.destination=new t3(i),s}return(0,T.ZT)(t,e),t}(t0);function t5(e){t$.useDeprecatedSynchronousErrorHandling?t$.useDeprecatedSynchronousErrorHandling&&tY&&(tY.errorThrown=!0,tY.error=e):tZ(e)}function t6(e,t){var r=t$.onStoppedNotification;r&&tK.setTimeout(function(){return r(e,t)})}var t8={closed:!0,next:tX,error:function(e){throw e},complete:tX},t7="function"==typeof Symbol&&Symbol.observable||"@@observable";function t9(e){return e}var re=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,o=(n=e)&&n instanceof t0||n&&tq(n.next)&&tq(n.error)&&tq(n.complete)&&tV(n)?e:new t4(e,t,r);return function(e){if(t$.useDeprecatedSynchronousErrorHandling){var t=!tY;if(t&&(tY={errorThrown:!1,error:null}),e(),t){var r=tY,n=r.errorThrown,i=r.error;if(tY=null,n)throw i}}else e()}(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=rt(t))(function(t,n){var i=new t4({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[t7]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?t9:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=rt(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function rt(e){var t;return null!==(t=null!=e?e:t$.Promise)&&void 0!==t?t:Promise}function rr(e){return Symbol.asyncIterator&&tq(null==e?void 0:e[Symbol.asyncIterator])}function rn(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ri="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ro(e){return tq(null==e?void 0:e[ri])}function rs(e){return(0,T.FC)(this,arguments,function(){var t,r,n;return(0,T.Jh)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,T.qq)(t.read())];case 3:if(n=(r=i.sent()).value,!r.done)return[3,5];return[4,(0,T.qq)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,T.qq)(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function ru(e){return tq(null==e?void 0:e.getReader)}function ra(e){if(e instanceof re)return e;if(null!=e){if(tq(e[t7]))return new re(function(t){var r=e[t7]();if(tq(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(tj(e))return new re(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()});if(tB(e))return new re(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,tZ)});if(rr(e))return rc(e);if(ro(e))return new re(function(t){var r,n;try{for(var i=(0,T.XA)(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()});if(ru(e))return rc(rs(e))}throw rn(e)}function rc(e){return new re(function(t){(function(e,t){var r,n,i,o;return(0,T.mG)(this,void 0,void 0,function(){var s;return(0,T.Jh)(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=(0,T.KL)(e),u.label=1;case 1:return[4,r.next()];case 2:if((n=u.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:u.sent()},[3,11];case 6:if(u.trys.push([6,,9,10]),!(n&&!n.done&&(o=r.return)))return[3,8];return[4,o.call(r)];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function rl(e){return function(t){if(tq(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function rd(e,t,r,n,i){return new rf(e,t,r,n,i)}var rf=function(e){function t(t,r,n,i,o,s){var u=e.call(this,t)||this;return u.onFinalize=o,u.shouldUnsubscribe=s,u._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,u._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,u}return(0,T.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(t0);function rh(e,t){return rl(function(r,n){var i=0;r.subscribe(rd(n,function(r){n.next(e.call(t,r,i++))}))})}function rp(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function rv(e,t,r){return(void 0===r&&(r=1/0),tq(t))?rv(function(r,n){return rh(function(e,i){return t(r,e,n,i)})(ra(e(r,n)))},r):("number"==typeof t&&(r=t),rl(function(t,n){var i,o,s,u,a,c,l,d,f;return i=r,s=[],u=0,a=0,c=!1,l=function(){!c||s.length||u||n.complete()},d=function(e){return u<i?f(e):s.push(e)},f=function(t){u++;var r=!1;ra(e(t,a++)).subscribe(rd(n,function(e){o?d(e):n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(u--;s.length&&u<i;)!function(){var e=s.shift();f(e)}();l()}catch(e){n.error(e)}}))},t.subscribe(rd(n,d,function(){c=!0,l()})),function(){}}))}var rg=Array.isArray,rm=["addListener","removeListener"],ry=["addEventListener","removeEventListener"],rb=["on","off"];function rw(e,t,r,n){if(tq(r)&&(n=r,r=void 0),n)return rw(e,t,r).pipe((i=n,rh(function(e){return rg(e)?i.apply(void 0,(0,T.ev)([],(0,T.CR)(e))):i(e)})));var i,o=(0,T.CR)(tq(e.addEventListener)&&tq(e.removeEventListener)?ry.map(function(n){return function(i){return e[n](t,i,r)}}):tq(e.addListener)&&tq(e.removeListener)?rm.map(rS(e,t)):tq(e.on)&&tq(e.off)?rb.map(rS(e,t)):[],2),s=o[0],u=o[1];if(!s&&tj(e))return rv(function(e){return rw(e,t,r)})(ra(e));if(!s)throw TypeError("Invalid event target");return new re(function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return s(t),function(){return u(t)}})}function rS(e,t){return function(r){return function(n){return e[r](t,n)}}}function rE(e,t,r){for(var n=null,i=[],o=e,s=0;o&&"break"!==function(){var e,u,a,c,l=rT((e=o.getAttribute("id"))&&k.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null)||rT.apply(void 0,(0,T.ev)([],(0,T.CR)(Array.from(o.attributes).filter(function(e){return k.attr(e.name,e.value)}).map(function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}})),!1))||rT.apply(void 0,(0,T.ev)([],(0,T.CR)(Array.from(o.classList).filter(k.className).map(function(e){return{name:"."+CSS.escape(e),penalty:1}})),!1))||rT((u=o.tagName.toLowerCase(),k.tagName(u)?{name:u,penalty:2}:null))||[rk()],d=function(e){var t=e.parentNode;if(!t)return null;var r=t.firstChild;if(!r)return null;for(var n=0;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==e);)r=r.nextSibling;return n}(o);if("all"==t)d&&(l=l.concat(l.filter(rO).map(function(e){return rP(e,d)})));else if("two"==t)l=l.slice(0,1),d&&(l=l.concat(l.filter(rO).map(function(e){return rP(e,d)})));else if("one"==t){var f=(0,T.CR)(l=l.slice(0,1),1)[0];d&&rO(f)&&(l=[rP(f,d)])}else"none"==t&&(l=[rk()],d&&(l=[rP(l[0],d)]));try{for(var h=(a=void 0,(0,T.XA)(l)),p=h.next();!p.done;p=h.next()){var f=p.value;f.level=s}}catch(e){a={error:e}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}if(i.push(l),i.length>=k.seedMinLength&&(n=rI(i,r)))return"break";o=o.parentElement,s++}(););return(n||(n=rI(i,r)),!n&&r)?r():n}function rI(e,t){if(e.reduce(function(e,t){return e*t.length},1)>k.threshold)return t?t():null;var r,n,i=rA(function e(t,r){var n,i,o,s,u;return void 0===r&&(r=[]),(0,T.Jh)(this,function(a){switch(a.label){case 0:if(!(t.length>0))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),i=(n=(0,T.XA)(t[0])).next(),a.label=2;case 2:if(i.done)return[3,5];return o=i.value,[5,(0,T.XA)(e(t.slice(1,t.length),r.concat(o)))];case 3:a.sent(),a.label=4;case 4:return i=n.next(),[3,2];case 5:return[3,8];case 6:return s={error:a.sent()},[3,8];case 7:try{i&&!i.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,r];case 10:a.sent(),a.label=11;case 11:return[2]}})}(e));try{for(var o=(0,T.XA)(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(rC(u))return u}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null}function r_(e){for(var t=e[0],r=t.name,n=1;n<e.length;n++){var i=e[n].level||0;r=t.level===i-1?"".concat(e[n].name," > ").concat(r):"".concat(e[n].name," ").concat(r),t=e[n]}return r}function rx(e){return e.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function rC(e){var t=r_(e);switch(P.querySelectorAll(t).length){case 0:throw Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function rk(){return{name:"*",penalty:3}}function rP(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function rO(e){return"html"!==e.name&&!e.name.startsWith("#")}function rT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.filter(rR);return r.length>0?r:null}function rR(e){return null!=e}function rA(e){return(0,T.ev)([],(0,T.CR)(e),!1).sort(function(e,t){return rx(e)-rx(t)})}var rL=["input","select","textarea"],rM=function(e,t){return function(r,n){var i,o,s,u=e.pageUrlAllowlist,a=e.shouldTrackEventResolver,c=null===(o=null===(i=null==n?void 0:n.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===o?void 0:o.call(i);if(!c)return!1;if(a)return a(r,n);if(!rq(window.location.href,u))return!1;var l=String(null==n?void 0:n.getAttribute("type"))||"";if("string"==typeof l)switch(l.toLowerCase()){case"hidden":case"password":return!1}if(t&&!t.some(function(e){var t;return!!(null===(t=null==n?void 0:n.matches)||void 0===t?void 0:t.call(n,e))}))return!1;switch(c){case"input":case"select":case"textarea":return"change"===r||"click"===r;default:var d=null===(s=null==window?void 0:window.getComputedStyle)||void 0===s?void 0:s.call(window,n);if(d&&"pointer"===d.getPropertyValue("cursor")&&"click"===r)return!0;return"click"===r}}},rU=function(e){return!(null==e||"string"==typeof e&&(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(e)))},rN=function(e){var t,r,n,i=null===(r=null===(t=null==e?void 0:e.tagName)||void 0===t?void 0:t.toLowerCase)||void 0===r?void 0:r.call(t),o=e instanceof HTMLElement&&(null===(n=e.getAttribute("contenteditable"))||void 0===n?void 0:n.toLowerCase())==="true";return!rL.includes(i)&&!o},rD=function(e){var t="";return rN(e)&&e.childNodes&&e.childNodes.length&&e.childNodes.forEach(function(e){var r="";e&&3===e.nodeType?e.textContent&&(r=e.textContent):r=rD(e),t+=r.split(/(\s+)/).filter(rU).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}),t},rj=function(e,t){var r,n,i="";try{return i=function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var r,n={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};P=(r=(k=(0,T.pi)((0,T.pi)({},n),t)).root).nodeType===Node.DOCUMENT_NODE?r:r===n.root?r.ownerDocument:r;var i=rE(e,"all",function(){return rE(e,"two",function(){return rE(e,"one",function(){return rE(e,"none")})})});if(i){var o=rA(function e(t,r,n){var i,o,s;return void 0===n&&(n={counter:0,visited:new Map}),(0,T.Jh)(this,function(u){switch(u.label){case 0:if(!(t.length>2&&t.length>k.optimizedMinLength))return[3,5];i=1,u.label=1;case 1:var a;if(!(i<t.length-1))return[3,5];if(n.counter>k.maxNumberOfTries||(n.counter+=1,(o=(0,T.ev)([],(0,T.CR)(t),!1)).splice(i,1),s=r_(o),n.visited.has(s)))return[2];if(!(rC(o)&&(a=o,P.querySelector(r_(a))===r)))return[3,4];return[4,o];case 2:return u.sent(),n.visited.set(s,!0),[5,(0,T.XA)(e(o,r,n))];case 3:u.sent(),u.label=4;case 4:return i++,[3,1];case 5:return[2]}})}(i,e));return o.length>0&&(i=o[0]),r_(i)}throw Error("Selector was not found.")}(e,{className:function(e){return e!==tD},maxNumberOfTries:1e3})}catch(e){t&&t.warn("Failed to get selector with finder, use fallback strategy instead: ".concat(e.toString()))}var o=null===(n=null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.toLowerCase)||void 0===n?void 0:n.call(r);o&&(i=o);var s=e.getAttribute("id"),u=e.getAttribute("class");if(s)i="#".concat(s);else if(u){var a=u.split(" ").filter(function(e){return e!==tD}).join(".");a&&(i="".concat(i,".").concat(a))}return i},rq=function(e,t){return!t||!t.length||t.some(function(t){return"string"==typeof t?e===t:e.match(t)})},rB=function(e){return Object.keys(e).reduce(function(t,r){var n=e[r];return null==n||"object"==typeof n&&0===Object.keys(n).length||"string"==typeof n&&0===n.trim().length||(t[r]=n),t},{})},rF=function(e){var t,r=e.parentElement;if(!r)return"";try{t=r.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch(e){t=null}if(t){var n=t.textContent||"";return rU(n)?n:""}return rF(r)},rJ=function(e,t){return e?t.some(function(t){var r;return null===(r=null==e?void 0:e.matches)||void 0===r?void 0:r.call(e,t)})?e:rJ(null==e?void 0:e.parentElement,t):null},rG=function(e,t){if(!e)return{};var r,n,i,o=null===(i=null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.toLowerCase)||void 0===i?void 0:i.call(n),s=rj(e,t);return rB(((r={})[tR]=o,r[tA]=rD(e),r[tL]=s,r[tM]=window.location.href.split("?")[0],r))},rz=function(e){return null!==e.event.target&&!!e.closestTrackedAncestor},rV=function(){function e(e){var t=(void 0===e?{}:e).origin,r=this;this.endpoint=tU,this.requestCallbacks={},this.onSelect=function(e){r.notify({action:"element-selected",data:e})},this.onTrack=function(e,t){"selector-mode-changed"===e?r.notify({action:"track-selector-mode-changed",data:t}):"selector-moved"===e&&r.notify({action:"track-selector-moved",data:t})},this.endpoint=void 0===t?tU:t}return e.prototype.notify=function(e){var t,r,n,i;null===(r=null===(t=this.logger)||void 0===t?void 0:t.debug)||void 0===r||r.call(t,"Message sent: ",JSON.stringify(e)),null===(i=null===(n=window.opener)||void 0===n?void 0:n.postMessage)||void 0===i||i.call(n,e,this.endpoint)},e.prototype.sendRequest=function(e,t,r){var n=this;void 0===r&&(r={timeout:15e3});var i="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:i,action:e,args:t};return new Promise(function(t,s){n.requestCallbacks[i]={resolve:t,reject:s},n.notify(o),(null==r?void 0:r.timeout)>0&&setTimeout(function(){s(Error("".concat(e," timed out (id: ").concat(i,")"))),delete n.requestCallbacks[i]},r.timeout)})},e.prototype.handleResponse=function(e){var t;if(!this.requestCallbacks[e.id]){null===(t=this.logger)||void 0===t||t.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},e.prototype.setup=function(e){var t=this,r=void 0===e?{}:e,n=r.logger,i=r.endpoint,o=r.isElementSelectable,s=r.cssSelectorAllowlist,u=r.actionClickAllowlist;this.logger=n,i&&this.endpoint===tU&&(this.endpoint=i);var a=null;window.addEventListener("message",function(e){if(null===(n=null===(r=t.logger)||void 0===r?void 0:r.debug)||void 0===n||n.call(r,"Message received: ",JSON.stringify(e)),t.endpoint===e.origin){var r,n,i,c,l,d=null==e?void 0:e.data,f=null==d?void 0:d.action;if(f){if("id"in d)null===(c=null===(i=t.logger)||void 0===i?void 0:i.debug)||void 0===c||c.call(i,"Received Response to previous request: ",JSON.stringify(e)),t.handleResponse(d);else if("ping"===f)t.notify({action:"pong"});else if("initialize-visual-tagging-selector"===f){var h,p=null==d?void 0:d.data;(h="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",new Promise(function(e,t){var r;try{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=h,n.addEventListener("load",function(){e({status:!0})},{once:!0}),n.addEventListener("error",function(){t({status:!1,message:"Failed to load the script ".concat(h)})}),null===(r=document.head)||void 0===r||r.appendChild(n)}catch(e){t(e)}})).then(function(){var e;a=null===(e=null==window?void 0:window.amplitudeVisualTaggingSelector)||void 0===e?void 0:e.call(window,{getEventTagProps:rG,isElementSelectable:function(e){return!o||o((null==p?void 0:p.actionType)||"click",e)},onTrack:t.onTrack,onSelect:t.onSelect,visualHighlightClass:tD,messenger:t,cssSelectorAllowlist:s,actionClickAllowlist:u}),t.notify({action:"selector-loaded"})}).catch(function(){var e;null===(e=t.logger)||void 0===e||e.warn("Failed to initialize visual tagging selector")})}else"close-visual-tagging-selector"===f&&(null===(l=null==a?void 0:a.close)||void 0===l||l.call(a))}}}),this.notify({action:"page-loaded"})},e}(),rW=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],r$=["type"],rK=["svg","path","g"],rZ=["password","hidden"];function rX(e,t){return rl(function(r,n){var i=0;r.subscribe(rd(n,function(r){return e.call(t,r,i++)&&n.next(r)}))})}var rQ=function(e){function t(t,r){return e.call(this)||this}return(0,T.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(tz),rH={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=rH.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,(0,T.ev)([e,t],(0,T.CR)(r))):setInterval.apply(void 0,(0,T.ev)([e,t],(0,T.CR)(r)))},clearInterval:function(e){var t=rH.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},rY=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,T.ZT)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),rH.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&rH.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,tG(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(rQ),r0={now:function(){return(r0.delegate||Date).now()},delegate:void 0},r1=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=r0.now,e}(),r2=new(function(e){function t(t,r){void 0===r&&(r=r1.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,T.ZT)(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active){r.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(r1))(rY);function r3(e){return void 0===e&&(e=1/0),rv(t9,e)}var r4=new re(function(e){return e.complete()});function r5(e){return e&&tq(e.schedule)}function r6(e){return e[e.length-1]}function r8(e){return r5(r6(e))?e.pop():void 0}function r7(e,t){return void 0===t&&(t=0),rl(function(r,n){r.subscribe(rd(n,function(r){return rp(n,e,function(){return n.next(r)},t)},function(){return rp(n,e,function(){return n.complete()},t)},function(r){return rp(n,e,function(){return n.error(r)},t)}))})}function r9(e,t){return void 0===t&&(t=0),rl(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function ne(e,t){if(!e)throw Error("Iterable cannot be null");return new re(function(r){rp(r,t,function(){var n=e[Symbol.asyncIterator]();rp(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function nt(e,t){return t?function(e,t){if(null!=e){if(tq(e[t7]))return ra(e).pipe(r9(t),r7(t));if(tj(e))return new re(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if(tB(e))return ra(e).pipe(r9(t),r7(t));if(rr(e))return ne(e,t);if(ro(e))return new re(function(r){var n;return rp(r,t,function(){n=e[ri](),rp(r,t,function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){r.error(e);return}i?r.complete():r.next(t)},0,!0)}),function(){return tq(null==n?void 0:n.return)&&n.return()}});if(ru(e))return ne(rs(e),t)}throw rn(e)}(e,t):ra(e)}function nr(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=r8(t),i=(e=1/0,"number"==typeof r6(t)?t.pop():e);return t.length?1===t.length?ra(t[0]):r3(i)(nt(t,n)):r4}function nn(e){return e<=0?function(){return r4}:rl(function(t,r){var n=0;t.subscribe(rd(r,function(t){++n<=e&&(r.next(t),e<=n&&r.complete())}))})}function ni(e){return e instanceof Date&&!isNaN(e)}var no=tF(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function ns(e){throw new no(e)}(p=O||(O={})).ClickObservable="clickObservable",p.ChangeObservable="changeObservable",p.NavigateObservable="navigateObservable",p.MutationObservable="mutationObservable";var nu=function(e){void 0===e&&(e={});var t,r,n,i=e.dataAttributePrefix,o=void 0===i?"data-amp-track-":i,s=e.visualTaggingOptions,u=void 0===s?{enabled:!0,messenger:new rV}:s;e.cssSelectorAllowlist=null!==(t=e.cssSelectorAllowlist)&&void 0!==t?t:tP,e.actionClickAllowlist=null!==(r=e.actionClickAllowlist)&&void 0!==r?r:tO,e.debounceTime=null!==(n=e.debounceTime)&&void 0!==n?n:0;var a="@amplitude/plugin-autocapture-browser",c=[],l=void 0,d=function(){var e,t,r=rw(document,"click",{capture:!0}).pipe(rh(function(e){return h(e,"click")})),n=rw(document,"change",{capture:!0}).pipe(rh(function(e){return h(e,"change")}));window.navigation&&(t=rw(window.navigation,"navigate").pipe(rh(function(e){return h(e,"navigate")})));var i=new re(function(e){var t=new MutationObserver(function(t){e.next(t)});return t.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return t.disconnect()}}).pipe(rh(function(e){return h(e,"mutation")}));return(e={})[O.ClickObservable]=r,e[O.ChangeObservable]=n,e[O.NavigateObservable]=t,e[O.MutationObservable]=i,e},f=function(e,t){var r,n,i,s,u=null===(s=null===(i=null==t?void 0:t.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===s?void 0:s.call(i),a="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:null,top:null},c=t.getAttribute("aria-label"),d=t.getAttributeNames().reduce(function(e,r){if(r.startsWith(o)){var n=r.replace(o,""),i=t.getAttribute(r);n&&(e[n]=i||"")}return e},{}),f=rF(t),h=rj(t,l),p=((n={})["[Amplitude] Element ID"]=t.getAttribute("id")||"",n["[Amplitude] Element Class"]=t.getAttribute("class"),n["[Amplitude] Element Hierarchy"]=(r=t)?function(e,t){for(var r=0,n=0;n<e.length;n++){var i=e[n];if(null===i)r+=4;else{var o=function e(t,r){void 0===r&&(r=!1);try{if(null==t){if(r)return"None";return null}if("string"==typeof t){if(r){if((t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")).includes('"'))return"'".concat(t,"'");if(t.includes("'"))return'"'.concat(t.replace(/'/g,"\\'"),'"');return"'".concat(t,"'")}return t}if("boolean"==typeof t)return t?"True":"False";if(Array.isArray(t)){var n=t.map(function(t){return e(t,!0)});return"[".concat(n.join(", "),"]")}else if("object"==typeof t){var i=Object.entries(t).filter(function(e){var t=(0,T.CR)(e,1)[0];return null!=t}).map(function(t){var r=(0,T.CR)(t,2),n=r[0],i=r[1];return"".concat(String(e(n,!0)),": ").concat(String(e(i,!0)))}),o="{".concat(i.join(", "),"}");return o.includes("\\'")&&(o=o.replace(/'/g,"'").replace(/'/g,"\\'")),o}return t.toString()}catch(e){return null}}(i);r+=o?Array.from(o).length:4}if(r>1024)return e.slice(0,n)}return e}((function(e){var t=[];if(!e)return t;t.push(e);for(var r=e.parentElement;r&&"HTML"!==r.tagName;)t.push(r),r=r.parentElement;return t})(r).map(function(e){return function(e){if(null===e)return null;var t,r,n,i,o,s,u=String(e.tagName).toLowerCase(),a={tag:u},c=Array.from(null!==(i=null===(n=e.parentElement)||void 0===n?void 0:n.children)&&void 0!==i?i:[]);c.length&&(a.index=c.indexOf(e),a.indexOfType=c.filter(function(t){return t.tagName===e.tagName}).indexOf(e));var l=null===(s=null===(o=e.previousElementSibling)||void 0===o?void 0:o.tagName)||void 0===s?void 0:s.toLowerCase();l&&(a.prevSib=String(l));var d=e.getAttribute("id");d&&(a.id=String(d));var f=Array.from(e.classList);f.length&&(a.classes=f);var h={},p=Array.from(e.attributes).filter(function(e){return!rW.includes(e.name)}),v=!rN(e);if(!rZ.includes(String(e.getAttribute("type")))&&!rK.includes(u))try{for(var g=(0,T.XA)(p),m=g.next();!m.done;m=g.next()){var y=m.value;(!v||r$.includes(y.name))&&(h[y.name]=String(y.value).substring(0,128))}}catch(e){t={error:e}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return Object.keys(h).length&&(a.attrs=h),a}(e)}),0):[],n[tR]=u,n[tA]=rD(t),n["[Amplitude] Element Position Left"]=null==a.left?null:Math.round(a.left),n["[Amplitude] Element Position Top"]=null==a.top?null:Math.round(a.top),n["[Amplitude] Element Aria Label"]=c,n["[Amplitude] Element Attributes"]=d,n[tL]=h,n["[Amplitude] Element Parent Label"]=f,n[tM]=window.location.href.split("?")[0],n["[Amplitude] Page Title"]="undefined"!=typeof document&&document.title||"",n["[Amplitude] Viewport Height"]=window.innerHeight,n["[Amplitude] Viewport Width"]=window.innerWidth,n);return"a"===u&&"click"===e&&t instanceof HTMLAnchorElement&&(p["[Amplitude] Element Href"]=t.href),rB(p)},h=function(t,r){var n={event:t,timestamp:Date.now(),type:r};if(("click"===n.type||"change"===n.type)&&null!==n.event.target){var i=rJ(n.event.target,e.cssSelectorAllowlist);i&&(n.closestTrackedAncestor=i,n.targetElementProperties=f(n.type,i))}return n};return{name:a,type:"enrichment",setup:function(t,r){return(0,T.mG)(void 0,void 0,void 0,function(){var n,i,o,s,h,p,v,g,m,y;return(0,T.Jh)(this,function(b){var w,S,E,I,_,x,C,k,P,O,R,A,L,M,U,N,D,j,q,B,F,J,G,z,V,W,$,K,Z,X,Q,H,Y,ee;return l=t.loggerProvider,"undefined"==typeof document||(n=rM(e,e.cssSelectorAllowlist),i=rM(e,e.actionClickAllowlist),S=(w={allObservables:o=d(),options:e,amplitude:r,shouldTrackEvent:n}).amplitude,E=w.allObservables,I=w.options,_=w.shouldTrackEvent,P=nr((x=E.clickObservable).pipe(rl(function(e,t){var r,n=!1;e.subscribe(rd(t,function(e){var i=r;r=e,n&&t.next([i,e]),n=!0}))}),rX(function(e){var t=(0,T.CR)(e,2),r=t[0],n=t[1],i=r.event.target!==n.event.target,o=20>=Math.abs(n.event.screenX-r.event.screenX)&&20>=Math.abs(n.event.screenY-r.event.screenY);return i&&!o})),x.pipe((C=I.debounceTime,void 0===k&&(k=r2),rl(function(e,t){var r=null,n=null,i=null,o=function(){if(r){r.unsubscribe(),r=null;var e=n;n=null,t.next(e)}};function s(){var e=i+C,n=k.now();if(n<e){r=this.schedule(void 0,e-n),t.add(r);return}o()}e.subscribe(rd(t,function(e){n=e,i=k.now(),r||(r=k.schedule(s,C),t.add(r))},function(){o(),t.complete()},void 0,function(){n=r=null}))})),rh(function(){return"timeout"}))),s=x.pipe((void 0===O&&(O=r2),R=0,A=O,void 0===R&&(R=0),void 0===L&&(L=r2),M=-1,null!=A&&(r5(A)?L=A:M=A),U=new re(function(e){var t=ni(R)?+R-L.now():R;t<0&&(t=0);var r=0;return L.schedule(function(){e.closed||(e.next(r++),0<=M?this.schedule(void 0,M):e.complete())},t)}),function e(t,r){return r?function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r3(1)(nt(e,r8(e)))}(r.pipe(nn(1),rl(function(e,t){e.subscribe(rd(t,tX))})),n.pipe(e(t)))}:rv(function(e,r){return ra(t(e,r)).pipe(nn(1),rh(function(){return e}))})}(function(){return U})),rX(rz),rX(function(e){return _("click",e.closestTrackedAncestor)}),rl(function(e,t){var r=[];return e.subscribe(rd(t,function(e){return r.push(e)},function(){t.next(r),t.complete()})),ra(P).subscribe(rd(t,function(){var e=r;r=[],t.next(e)},tX)),function(){r=null}})).subscribe(function(e){var t,r,n=(e.length,tT);try{for(var i=(0,T.XA)(e),o=i.next();!o.done;o=i.next()){var s=o.value;null==S||S.track(n,s.targetElementProperties)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}),c.push(s),D=(N={allObservables:o,getEventProperties:f,amplitude:r,shouldTrackEvent:n}).amplitude,j=N.allObservables,q=N.getEventProperties,B=N.shouldTrackEvent,h=j.changeObservable.pipe(rX(rz),rX(function(e){return B("change",e.closestTrackedAncestor)})).subscribe(function(e){null==D||D.track("[Amplitude] Element Changed",q("change",e.closestTrackedAncestor))}),c.push(h),J=(F={allObservables:o,options:e,getEventProperties:f,amplitude:r,shouldTrackEvent:n,shouldTrackActionClick:i}).amplitude,G=F.allObservables,z=F.options,V=F.getEventProperties,W=F.shouldTrackEvent,$=F.shouldTrackActionClick,K=G.clickObservable,Z=G.mutationObservable,X=G.navigateObservable,Q=K.pipe(rX(function(e){return!W("click",e.closestTrackedAncestor)}),rh(function(e){var t=rJ(e.event.target,z.actionClickAllowlist);return e.closestTrackedAncestor=t,null!==e.closestTrackedAncestor&&(e.targetElementProperties=V(e.type,e.closestTrackedAncestor)),e}),rX(rz),rX(function(e){return $("click",e.closestTrackedAncestor)})),H=[Z],X&&H.push(X),Y=nr.apply(void 0,(0,T.ev)([],(0,T.CR)(H),!1)),p=Q.pipe((ee=function(e){return Y.pipe(nn(1),function(e,t){var r=ni(e)?{first:e}:"number"==typeof e?{each:e}:e,n=r.first,i=r.each,o=r.with,s=void 0===o?ns:o,u=r.scheduler,a=void 0===u?r2:u,c=r.meta,l=void 0===c?null:c;if(null==n&&null==i)throw TypeError("No timeout provided.");return rl(function(e,t){var r,o,u=null,c=0,d=function(e){o=rp(t,a,function(){try{r.unsubscribe(),ra(s({meta:l,lastValue:u,seen:c})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe(rd(t,function(e){null==o||o.unsubscribe(),c++,t.next(u=e),i>0&&d(i)},void 0,void 0,function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),u=null})),c||d(null!=n?"number"==typeof n?n:+n-a.now():i)})}({first:500,with:function(){return r4}}),rh(function(){return e}))},rl(function(e,t){var r=null,n=0,i=!1,o=function(){return i&&!r&&t.complete()};e.subscribe(rd(t,function(e){null==r||r.unsubscribe(),ra(ee(e,n++)).subscribe(r=rd(t,function(e){return t.next(e)},function(){r=null,o()}))},function(){i=!0,o()}))}))).subscribe(function(e){null==J||J.track(tT,V("click",e.closestTrackedAncestor))}),c.push(p),null===(m=null==t?void 0:t.loggerProvider)||void 0===m||m.log("".concat(a," has been successfully added.")),window.opener&&u.enabled&&(v=e.cssSelectorAllowlist,g=e.actionClickAllowlist,null===(y=u.messenger)||void 0===y||y.setup((0,T.pi)((0,T.pi)({logger:null==t?void 0:t.loggerProvider},(null==t?void 0:t.serverZone)&&{endpoint:tN[t.serverZone]}),{isElementSelectable:rM(e,(0,T.ev)((0,T.ev)([],(0,T.CR)(v),!1),(0,T.CR)(g),!1)),cssSelectorAllowlist:v,actionClickAllowlist:g})))),[2]})})},execute:function(e){return(0,T.mG)(void 0,void 0,void 0,function(){return(0,T.Jh)(this,function(t){return[2,e]})})},teardown:function(){return(0,T.mG)(void 0,void 0,void 0,function(){var e,t,r,n;return(0,T.Jh)(this,function(i){try{for(t=(e=(0,T.XA)(c)).next();!t.done;t=e.next())t.value.unsubscribe()}catch(e){r={error:e}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(r)throw r.error}}return[2]})})}}},na="dclid",nc="fbclid",nl="gbraid",nd="gclid",nf="ko_click_id",nh="li_fat_id",np="msclkid",nv="rtd_cid",ng="ttclid",nm="twclid",ny="wbraid",nb={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},nw=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},nS=function(e,t,r,n,i){void 0===i&&(i=!0),e.referrer;var o=e.referring_domain,s=(0,T._T)(e,["referrer","referring_domain"]),u=t||{},a=(u.referrer,u.referring_domain),c=(0,T._T)(u,["referrer","referring_domain"]);if(nE(r.excludeReferrers,e.referring_domain))return n.debug("This is not a new campaign because ".concat(e.referring_domain," is in the exclude referrer list.")),!1;if(!i&&Object.values(e).every(function(e){return!e})&&t)return n.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var l=JSON.stringify(s)!==JSON.stringify(c),d=nw(o||"")!==nw(a||""),f=!t||l||d;return f?n.debug("This is a new campaign. An $identify event will be sent."):n.debug("This is not a new campaign because it's the same as the previous one."),f},nE=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.some(function(e){return e instanceof RegExp?e.test(t):e===t})},nI=function(e){var t=e;return t?(t.startsWith(".")&&(t=t.substring(1)),[new RegExp("".concat(t.replace(".","\\."),"$"))]):[]},n_=function(){function e(){}return e.prototype.parse=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,(0,T.pi)((0,T.pi)((0,T.pi)((0,T.pi)({},nb),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var e=D();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=null!==(t=null===(e=r.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(e){}return r},e.prototype.getClickIds=function(){var e,t=D();return(e={})[na]=t[na],e[nc]=t[nc],e[nl]=t[nl],e[nd]=t[nd],e[nf]=t[nf],e[nh]=t[nh],e[np]=t[np],e[nv]=t[nv],e[ng]=t[ng],e[nm]=t[nm],e[ny]=t[ny],e},e}(),nx=function(){function e(e,t){var r,n,i;this.shouldTrackNewCampaign=!1,this.options=(0,T.pi)({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:nI(null===(r=t.cookieOptions)||void 0===r?void 0:r.domain)},e),this.storage=t.cookieStorage,this.storageKey=(n=t.apiKey,void 0===i&&(i=10),["AMP","MKTG",n.substring(0,i)].filter(Boolean).join("_")),this.currentCampaign=nb,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,this.logger=t.loggerProvider,t.loggerProvider.log("Installing web attribution tracking.")}return e.prototype.init=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,t;return(0,T.Jh)(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:if(t=T.CR.apply(void 0,[r.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=!this.lastEventTime||eu(this.sessionTimeout,this.lastEventTime),!nS(this.currentCampaign,this.previousCampaign,this.options,this.logger,e))return[3,3];return this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.fetchCampaign=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([new n_().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},e.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t,r,n=(t=this.currentCampaign,r=this.options,ec(Object.entries((0,T.pi)((0,T.pi)({},nb),t)).reduce(function(e,t){var n,i=(0,T.CR)(t,2),o=i[0],s=i[1];return(e.setOnce("initial_".concat(o),null!==(n=null!=s?s:r.initialEmptyValue)&&void 0!==n?n:"EMPTY"),s)?e.set(o,s):e.unset(o)},new eo)));return e&&(n.event_id=e),n},e.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},e}(),nC={init:M((v=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.ZT)(t,e),t.prototype.init=function(e,t,r){var n,i;return void 0===e&&(e=""),arguments.length>2?(n=t,i=r):"string"==typeof t?(n=t,i=void 0):(n=null==t?void 0:t.userId,i=t),U(this._init((0,T.pi)((0,T.pi)({},i),{userId:n,apiKey:e})))},t.prototype._init=function(t){return(0,T.mG)(this,void 0,void 0,function(){var r,n,i,o,s,u,a,c,l=this;return(0,T.Jh)(this,function(d){var f,h;switch(d.label){case 0:if(this.initializing)return[2];return this.initializing=!0,[4,e1(t.apiKey,t,this)];case 1:if(r=d.sent(),!t.fetchRemoteConfig)return[3,4];return[4,(f=r,(0,T.mG)(void 0,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(t){switch(t.label){case 0:return[4,(e=new tk(f)).initialize()];case 1:return t.sent(),[2,e]}})}))];case 2:return[4,d.sent().generateJoinedConfig()];case 3:r=d.sent(),d.label=4;case 4:return[4,e.prototype._init.call(this,r)];case 5:if(d.sent(),this.logBrowserOptions(r),!ep(this.config.defaultTracking))return[3,7];return n=ep((h=this.config).defaultTracking)&&h.defaultTracking&&"object"==typeof h.defaultTracking&&h.defaultTracking.attribution&&"object"==typeof h.defaultTracking.attribution?(0,T.pi)({},h.defaultTracking.attribution):{},this.webAttribution=new nx(n,this.config),[4,this.webAttribution.init()];case 6:d.sent(),d.label=7;case 7:if(o=Number.isNaN(Number((i=D()).ampSessionId))?void 0:Number(i.ampSessionId),this.setSessionId(null!==(c=null!==(a=null!==(u=t.sessionId)&&void 0!==u?u:o)&&void 0!==a?a:this.config.sessionId)&&void 0!==c?c:Date.now()),(s=B(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),!(null!==this.config.offline))return[3,9];return[4,this.add(tE()).promise];case 8:d.sent(),d.label=9;case 9:return[4,this.add(new et).promise];case 10:return d.sent(),[4,this.add(new eI).promise];case 11:return d.sent(),[4,this.add(new er).promise];case 12:if(d.sent(),tS(this.config),!eh(this.config.defaultTracking,"fileDownloads"))return[3,14];return this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(tb()).promise];case 13:d.sent(),d.label=14;case 14:if(!eh(this.config.defaultTracking,"formInteractions"))return[3,16];return this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(tg()).promise];case 15:d.sent(),d.label=16;case 16:if(!ev(this.config.defaultTracking))return[3,18];return this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(tf(eb(this.config))).promise];case 17:d.sent(),d.label=18;case 18:if(!em(this.config.autocapture))return[3,20];return this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(nu(ey(this.config))).promise];case 19:d.sent(),d.label=20;case 20:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 21:return d.sent(),s.eventBridge.setEventReceiver(function(e){l.track(e.eventType,e.eventProperties)}),[2]}})})},t.prototype.getUserId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.userId},t.prototype.setUserId=function(e){if(!this.config){this.q.push(this.setUserId.bind(this,e));return}this.config.loggerProvider.debug("function setUserId: ",e),(e!==this.config.userId||void 0===e)&&(this.config.userId=e,F(e,this.config.instanceName))},t.prototype.getDeviceId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.deviceId},t.prototype.setDeviceId=function(e){if(!this.config){this.q.push(this.setDeviceId.bind(this,e));return}this.config.loggerProvider.debug("function setDeviceId: ",e),this.config.deviceId=e,J(e,this.config.instanceName)},t.prototype.reset=function(){this.setDeviceId(Y()),this.setUserId(void 0)},t.prototype.getSessionId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.sessionId},t.prototype.setSessionId=function(e){var t,r=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,e)),U(Promise.resolve());if(e===this.config.sessionId)return U(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",e);var n=this.getSessionId(),i=this.config.lastEventTime,o=null!==(t=this.config.lastEventId)&&void 0!==t?t:-1;this.config.sessionId=e,this.config.lastEventTime=void 0,this.config.pageCounter=0,eg(this.config.defaultTracking)&&(n&&i&&r.push(this.track(ez,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:n,time:i+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var s=this.trackCampaignEventIfNeeded(++o,r);return eg(this.config.defaultTracking)&&r.push(this.track(eG,void 0,{event_id:s?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,U(Promise.all(r))},t.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},t.prototype.setTransport=function(e){if(!this.config){this.q.push(this.setTransport.bind(this,e));return}this.config.transportProvider=e3(e)},t.prototype.identify=function(t,r){if(eS(t)){var n=t._q;t._q=[],t=ew(new eo,n)}return(null==r?void 0:r.user_id)&&this.setUserId(r.user_id),(null==r?void 0:r.device_id)&&this.setDeviceId(r.device_id),e.prototype.identify.call(this,t,r)},t.prototype.groupIdentify=function(t,r,n,i){if(eS(n)){var o=n._q;n._q=[],n=ew(new eo,o)}return e.prototype.groupIdentify.call(this,t,r,n,i)},t.prototype.revenue=function(t,r){if(eS(t)){var n=t._q;t._q=[],t=ew(new es,n)}return e.prototype.revenue.call(this,t,r)},t.prototype.trackCampaignEventIfNeeded=function(e,t){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var r=this.webAttribution.generateCampaignEvent(e);return t?t.push(this.track(r).promise):this.track(r),this.config.loggerProvider.log("Tracking attribution."),!0},t.prototype.process=function(t){return(0,T.mG)(this,void 0,void 0,function(){var r,n,i;return(0,T.Jh)(this,function(o){return r=Date.now(),n=eu(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type===eG||t.event_type===ez||t.session_id&&t.session_id!==this.getSessionId()||(n||i?(this.setSessionId(r),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):n||this.trackCampaignEventIfNeeded()),[2,e.prototype.process.call(this,t)]})})},t.prototype.logBrowserOptions=function(e){try{var t=(0,T.pi)((0,T.pi)({},e),{apiKey:e.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(t))}catch(e){this.config.loggerProvider.error("Error logging browser config",e)}},t}(ef))).init.bind(v),"init",R(v),L(v,["config"])),add:M(v.add.bind(v),"add",R(v),L(v,["config.apiKey","timeline.plugins"])),remove:M(v.remove.bind(v),"remove",R(v),L(v,["config.apiKey","timeline.plugins"])),track:M(v.track.bind(v),"track",R(v),L(v,["config.apiKey","timeline.queue.length"])),logEvent:M(v.logEvent.bind(v),"logEvent",R(v),L(v,["config.apiKey","timeline.queue.length"])),identify:M(v.identify.bind(v),"identify",R(v),L(v,["config.apiKey","timeline.queue.length"])),groupIdentify:M(v.groupIdentify.bind(v),"groupIdentify",R(v),L(v,["config.apiKey","timeline.queue.length"])),setGroup:M(v.setGroup.bind(v),"setGroup",R(v),L(v,["config.apiKey","timeline.queue.length"])),revenue:M(v.revenue.bind(v),"revenue",R(v),L(v,["config.apiKey","timeline.queue.length"])),flush:M(v.flush.bind(v),"flush",R(v),L(v,["config.apiKey","timeline.queue.length"])),getUserId:M(v.getUserId.bind(v),"getUserId",R(v),L(v,["config","config.userId"])),setUserId:M(v.setUserId.bind(v),"setUserId",R(v),L(v,["config","config.userId"])),getDeviceId:M(v.getDeviceId.bind(v),"getDeviceId",R(v),L(v,["config","config.deviceId"])),setDeviceId:M(v.setDeviceId.bind(v),"setDeviceId",R(v),L(v,["config","config.deviceId"])),reset:M(v.reset.bind(v),"reset",R(v),L(v,["config","config.userId","config.deviceId"])),getSessionId:M(v.getSessionId.bind(v),"getSessionId",R(v),L(v,["config"])),setSessionId:M(v.setSessionId.bind(v),"setSessionId",R(v),L(v,["config"])),extendSession:M(v.extendSession.bind(v),"extendSession",R(v),L(v,["config"])),setOptOut:M(v.setOptOut.bind(v),"setOptOut",R(v),L(v,["config"])),setTransport:M(v.setTransport.bind(v),"setTransport",R(v),L(v,["config"]))};nC.add,nC.extendSession,nC.flush,nC.getDeviceId,nC.getSessionId,nC.getUserId,nC.groupIdentify,nC.identify;var nk=nC.init;nC.logEvent,nC.remove,nC.reset,nC.revenue,nC.setDeviceId,nC.setGroup,nC.setOptOut,nC.setSessionId,nC.setTransport,nC.setUserId,nC.track},8772:function(e,t,r){"use strict";r.d(t,{l:function(){return n}});var n=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:void 0}},3199:function(e,t,r){"use strict";r.d(t,{V:function(){return f}});var n=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:i(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),i=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},o=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},e}(),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}"function"==typeof SuppressedError&&SuppressedError;var c=function(e,t){var r,n,i=typeof e;if(i!==typeof t)return!1;try{for(var o=u(["string","number","boolean","undefined"]),s=o.next();!s.done;s=o.next())if(s.value===i)return e===t}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;var a=Array.isArray(e),l=Array.isArray(t);if(a!==l)return!1;if(a&&l){for(var d=0;d<e.length;d++)if(!c(e[d],t[d]))return!1}else{if(!c(Object.keys(e).sort(),Object.keys(t).sort()))return!1;var f=!0;return Object.keys(e).forEach(function(r){c(e[r],t[r])||(f=!1)}),f}return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=Array(r);r--;)n[r]=[t[r],e[t[r]]];return n});var l=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=s({},this.identity.userProperties),r=s(s({},this.identity),{userProperties:t});return{setUserId:function(e){return r.userId=e,this},setDeviceId:function(e){return r.deviceId=e,this},setUserProperties:function(e){return r.userProperties=e,this},setOptOut:function(e){return r.optOut=e,this},updateUserProperties:function(e){var t,n,i,o,s,c,l=r.userProperties||{};try{for(var d=u(Object.entries(e)),f=d.next();!f.done;f=d.next()){var h=a(f.value,2),p=h[0],v=h[1];switch(p){case"$set":try{for(var g=(i=void 0,u(Object.entries(v))),m=g.next();!m.done;m=g.next()){var y=a(m.value,2),b=y[0],w=y[1];l[b]=w}}catch(e){i={error:e}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}break;case"$unset":try{for(var S=(s=void 0,u(Object.keys(v))),E=S.next();!E.done;E=S.next()){var b=E.value;delete l[b]}}catch(e){s={error:e}}finally{try{E&&!E.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}break;case"$clearAll":l={}}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return r.userProperties=l,this},commit:function(){return e.setIdentity(r),this}}},e.prototype.getIdentity=function(){return s({},this.identity)},e.prototype.setIdentity=function(e){var t=s({},this.identity);this.identity=s({},e),c(t,this.identity)||this.listeners.forEach(function(t){t(e)})},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),d="undefined"!=typeof globalThis?globalThis:void 0!==r.g?r.g:self,f=function(){function e(){this.identityStore=new l,this.eventBridge=new o,this.applicationContextProvider=new n}return e.getInstance=function(t){return d.analyticsConnectorInstances||(d.analyticsConnectorInstances={}),d.analyticsConnectorInstances[t]||(d.analyticsConnectorInstances[t]=new e),d.analyticsConnectorInstances[t]},e}()},4872:function(e,t,r){"use strict";let n,i,o,s,u,a,c,l,d,f,h,p;r.d(t,{S1:function(){return np},xr:function(){return nv}}),(v=g||(g={}))[v.None=0]="None",v[v.Error=1]="Error",v[v.Warn=2]="Warn",v[v.Verbose=3]="Verbose",v[v.Debug=4]="Debug";var v,g,m,y,b,w,S,E,I,_,x,C,k,P,O,T,R,A,L,M,U,N,D,j,q=function(e,t,r,n,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=r(),a=u.logger,c=u.logLevel;if(c&&c<g.Debug||!c||!a)return e.apply(i,o);var l={type:"invoke public method",name:t,args:o,stacktrace:(Error().stack||"").split("\n").slice(3).map(function(e){return e.trim()}),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var d=e.apply(i,o);return d&&d.promise?d.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))),d}},B=r(6200);(x=m||(m={})).Unknown="unknown",x.Skipped="skipped",x.Success="success",x.RateLimit="rate_limit",x.PayloadTooLarge="payload_too_large",x.Invalid="invalid",x.Failed="failed",x.Timeout="Timeout",x.SystemError="SystemError";var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,B.ZT)(t,e),t.prototype.send=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){var r,n;return(0,B.Jh)(this,function(i){switch(i.label){case 0:if("undefined"==typeof fetch)throw Error("FetchTransport is not supported");return[4,fetch(e,{headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"})];case 1:return[4,(r=i.sent()).text()];case 2:n=i.sent();try{return[2,this.buildResponse(JSON.parse(n))]}catch(e){return[2,this.buildResponse({code:r.status})]}return[2]}})})},t}(function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){if("object"!=typeof e)return null;var t,r,n,i,o,s,u,a,c,l,d,f,h,p,v,g,y,b,w,S,E,I,_=e.code||0,x=this.buildStatus(_);switch(x){case m.Success:return{status:x,statusCode:_,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(r=e.payload_size_bytes)&&void 0!==r?r:0,serverUploadTime:null!==(n=e.server_upload_time)&&void 0!==n?n:0}};case m.Invalid:return{status:x,statusCode:_,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(u=e.events_with_missing_fields)&&void 0!==u?u:{},eventsWithInvalidIdLengths:null!==(a=e.events_with_invalid_id_lengths)&&void 0!==a?a:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=e.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(d=e.silenced_devices)&&void 0!==d?d:[],silencedEvents:null!==(f=e.silenced_events)&&void 0!==f?f:[],throttledDevices:null!==(h=e.throttled_devices)&&void 0!==h?h:{},throttledEvents:null!==(p=e.throttled_events)&&void 0!==p?p:[]}};case m.PayloadTooLarge:return{status:x,statusCode:_,body:{error:null!==(v=e.error)&&void 0!==v?v:""}};case m.RateLimit:return{status:x,statusCode:_,body:{error:null!==(g=e.error)&&void 0!==g?g:"",epsThreshold:null!==(y=e.eps_threshold)&&void 0!==y?y:0,throttledDevices:null!==(b=e.throttled_devices)&&void 0!==b?b:{},throttledUsers:null!==(w=e.throttled_users)&&void 0!==w?w:{},exceededDailyQuotaDevices:null!==(S=e.exceeded_daily_quota_devices)&&void 0!==S?S:{},exceededDailyQuotaUsers:null!==(E=e.exceeded_daily_quota_users)&&void 0!==E?E:{},throttledEvents:null!==(I=e.throttled_events)&&void 0!==I?I:[]}};case m.Timeout:default:return{status:x,statusCode:_}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?m.Success:429===e?m.RateLimit:413===e?m.PayloadTooLarge:408===e?m.Timeout:e>=400&&e<500?m.Invalid:e>=500?m.Failed:m.Unknown},e}()),J="Amplitude Logger ",G=function(){function e(){this.logLevel=g.None}return e.prototype.disable=function(){this.logLevel=g.None},e.prototype.enable=function(e){void 0===e&&(e=g.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Verbose||console.log("".concat(J,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Warn||console.warn("".concat(J,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Error||console.error("".concat(J,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<g.Debug||console.log("".concat(J,"[Debug]: ").concat(e.join(" ")))},e}();(C=y||(y={})).US="US",C.EU="EU",C.STAGING="STAGING";var z="".concat("AMP","_unsent"),V="https://api2.amplitude.com/2/httpapi",W=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:g.Warn,loggerProvider:new G,optOut:!1,serverUrl:V,serverZone:y.US,useBatch:!1}},$=function(){function e(e){this._optOut=!1;var t,r,n,i,o=W();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(r=e.logLevel)&&void 0!==r?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.optOut=null!==(n=e.optOut)&&void 0!==n?n:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=K(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),K=function(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=W().serverZone),void 0===r&&(r=W().useBatch),e)return{serverUrl:e,serverZone:void 0};var n,i=["US","EU"].includes(t)?t:W().serverZone;return{serverZone:i,serverUrl:(n=r,i===y.EU?n?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":n?"https://api2.amplitude.com/batch":V)}},Z="[Amplitude]",X="".concat(Z," Session Replay ID"),Q=y.US,H="".concat(Z," Session Replay Debug"),Y="amp-mask";(k=b||(b={})).GET_SR_PROPS="get-sr-props",k.DEBUG_INFO="debug-info";var ee=function(){return{flushMaxRetries:2,logLevel:g.Warn,loggerProvider:new G,transportProvider:new F}},et=function(e){function t(t,r){var n,i=this,o=ee();return(i=e.call(this,(0,B.pi)((0,B.pi)({transportProvider:o.transportProvider},r),{apiKey:t}))||this).flushMaxRetries=void 0!==r.flushMaxRetries&&r.flushMaxRetries<=o.flushMaxRetries?r.flushMaxRetries:o.flushMaxRetries,i.apiKey=t,i.sampleRate=r.sampleRate||0,i.serverZone=r.serverZone||Q,i.configServerUrl=r.configServerUrl,i.trackServerUrl=r.trackServerUrl,i.shouldInlineStylesheet=r.shouldInlineStylesheet,i.version=r.version,i.performanceConfig=r.performanceConfig,i.storeType=null!==(n=r.storeType)&&void 0!==n?n:"idb",r.privacyConfig&&(i.privacyConfig=r.privacyConfig),r.debugMode&&(i.debugMode=r.debugMode),r.experimental&&(i.experimental=r.experimental),i}return(0,B.ZT)(t,e),t}($),er=r(8772),en=r(3199),ei=function(e){return{promise:e||Promise.resolve()}},eo=r(453);(P=w||(w={})).Unknown="unknown",P.Skipped="skipped",P.Success="success",P.RateLimit="rate_limit",P.PayloadTooLarge="payload_too_large",P.Invalid="invalid",P.Failed="failed",P.Timeout="Timeout",P.SystemError="SystemError";var es=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){if("object"!=typeof e)return null;var t,r,n,i,o,s,u,a,c,l,d,f,h,p,v,g,m,y,b,S,E,I,_=e.code||0,x=this.buildStatus(_);switch(x){case w.Success:return{status:x,statusCode:_,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(r=e.payload_size_bytes)&&void 0!==r?r:0,serverUploadTime:null!==(n=e.server_upload_time)&&void 0!==n?n:0}};case w.Invalid:return{status:x,statusCode:_,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(u=e.events_with_missing_fields)&&void 0!==u?u:{},eventsWithInvalidIdLengths:null!==(a=e.events_with_invalid_id_lengths)&&void 0!==a?a:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=e.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(d=e.silenced_devices)&&void 0!==d?d:[],silencedEvents:null!==(f=e.silenced_events)&&void 0!==f?f:[],throttledDevices:null!==(h=e.throttled_devices)&&void 0!==h?h:{},throttledEvents:null!==(p=e.throttled_events)&&void 0!==p?p:[]}};case w.PayloadTooLarge:return{status:x,statusCode:_,body:{error:null!==(v=e.error)&&void 0!==v?v:""}};case w.RateLimit:return{status:x,statusCode:_,body:{error:null!==(g=e.error)&&void 0!==g?g:"",epsThreshold:null!==(m=e.eps_threshold)&&void 0!==m?m:0,throttledDevices:null!==(y=e.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(b=e.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(S=e.exceeded_daily_quota_devices)&&void 0!==S?S:{},exceededDailyQuotaUsers:null!==(E=e.exceeded_daily_quota_users)&&void 0!==E?E:{},throttledEvents:null!==(I=e.throttled_events)&&void 0!==I?I:[]}};case w.Timeout:default:return{status:x,statusCode:_}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?w.Success:429===e?w.RateLimit:413===e?w.PayloadTooLarge:408===e?w.Timeout:e>=400&&e<500?w.Invalid:e>=500?w.Failed:w.Unknown},e}(),eu="Remote config fetch rejected due to timeout after 5 seconds",ea="Unexpected error occurred",ec=function(){function e(e){var t=e.localConfig,r=e.configKeys,n=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(e,t,r){return(0,B.mG)(n,void 0,void 0,function(){var n,i,o;return(0,B.Jh)(this,function(s){switch(s.label){case 0:return n=Date.now(),[4,this.fetchWithTimeout(r)];case 1:if((i=s.sent())&&(o=i.configs&&i.configs[e]))return this.metrics.fetchTimeAPISuccess=Date.now()-n,[2,o[t]];return this.metrics.fetchTimeAPIFail=Date.now()-n,[2,void 0]}})})},this.fetchWithTimeout=function(e){return(0,B.mG)(n,void 0,void 0,function(){var t,r,n;return(0,B.Jh)(this,function(i){switch(i.label){case 0:return t=new AbortController,r=setTimeout(function(){return t.abort()},5e3),[4,this.fetchRemoteConfig(t.signal,e)];case 1:return n=i.sent(),clearTimeout(r),[2,n]}})})},this.fetchRemoteConfig=function(e,t){return(0,B.mG)(n,void 0,void 0,function(){var r,n,i,o,s,u,a,c,l,d,f;return(0,B.Jh)(this,function(h){switch(h.label){case 0:if(t===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(e.aborted)return[2,this.completeRequest({err:eu})];t!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=t,this.attempts=0),h.label=1;case 1:h.trys.push([1,3,,4]),r=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(i=(n=(0,B.XA)(this.configKeys)).next();!i.done;i=n.next())o=i.value,r.append("config_keys",o)}catch(e){l={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(l)throw l.error}}return t&&r.set("session_id",String(t)),s={headers:{Accept:"*/*"},method:"GET"},u="".concat(this.getServerUrl(),"?").concat(r.toString()),this.attempts+=1,[4,fetch(u,(0,B.pi)((0,B.pi)({},s),{signal:e}))];case 2:if(null===(a=h.sent()))return[2,this.completeRequest({err:ea})];switch(new es().buildStatus(a.status)){case w.Success:return this.attempts=0,[2,this.parseAndStoreConfig(a)];case w.Failed:return[2,this.retryFetch(e,t)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:if(c=h.sent(),e.aborted)return[2,this.completeRequest({err:eu})];return[2,this.completeRequest({err:null!==(f=c.message)&&void 0!==f?f:ea})];case 4:return[2]}})})},this.retryFetch=function(e,t){return(0,B.mG)(n,void 0,void 0,function(){var r=this;return(0,B.Jh)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){return setTimeout(e,r.attempts*r.retryTimeout)})];case 1:return n.sent(),[2,this.fetchRemoteConfig(e,t)]}})})},this.parseAndStoreConfig=function(e){return(0,B.mG)(n,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(r){switch(r.label){case 0:return[4,e.json()];case 1:return t=r.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,t]}})})},this.localConfig=t,this.configKeys=r}return e.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===y.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===y.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},e.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw Error(t);r&&this.localConfig.loggerProvider.log(r)},e}(),el=function(e){var t=e.localConfig,r=e.configKeys;return(0,B.mG)(void 0,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return[2,new ec({localConfig:t,configKeys:r})]})})},ed=r(6434).Buffer,ef=r(257),eh=((O=eh||{})[O.Document=0]="Document",O[O.DocumentType=1]="DocumentType",O[O.Element=2]="Element",O[O.Text=3]="Text",O[O.CDATA=4]="CDATA",O[O.Comment=5]="Comment",O);RegExp(/(max|min)-device-(width|height)/.source,"g");var ep={exports:{}},ev=String,eg=function(){return{isColorSupported:!1,reset:ev,bold:ev,dim:ev,italic:ev,underline:ev,inverse:ev,hidden:ev,strikethrough:ev,black:ev,red:ev,green:ev,yellow:ev,blue:ev,magenta:ev,cyan:ev,white:ev,gray:ev,bgBlack:ev,bgRed:ev,bgGreen:ev,bgYellow:ev,bgBlue:ev,bgMagenta:ev,bgCyan:ev,bgWhite:ev}};ep.exports=eg(),ep.exports.createColors=eg;var em=ep.exports;let ey=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),eb=class e extends Error{constructor(t,r,n,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){let t,r;if(!this.source)return"";let n=this.source;null==e&&(e=em.isColorSupported),ey&&e&&(n=ey(n));let i=n.split(/\r?\n/),o=Math.max(this.line-3,0),s=Math.min(this.line+2,i.length),u=String(s).length;if(e){let{bold:e,gray:n,red:i}=em.createColors(!0);t=t=>e(i(t)),r=e=>n(e)}else t=r=e=>e;return i.slice(o,s).map((e,n)=>{let i=o+1+n,s=" "+(" "+i).slice(-u)+" | ";if(i===this.line){let n=r(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return t(">")+r(s)+e+"\n "+n+t("^")}return" "+r(s)+e}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};eb.default=eb;var ew={};ew.isClean=Symbol("isClean"),ew.my=Symbol("my");let eS={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1},eE=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&void 0!==(n=e.raws[t]))return n;let i=e.parent;if("before"===r&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return eS[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{var s;let i="raw"+((s=r)[0].toUpperCase()+s.slice(1));this[i]?n=this[i](o,e):o.walk(e=>{if(void 0!==(n=e.raws[t]))return!1})}return void 0===n&&(n=eS[r]),o.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return(t=r.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1}),t}rawIndent(e){let t;return e.raws.indent?e.raws.indent:(e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=(t=e[e.length-1]).replace(/\S/g,""),!1}}),t)}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1}),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};function eI(e,t){new eE(t).stringify(e)}eE.default=eE,eI.default=eI;let{isClean:e_,my:ex}=ew,eC=class{constructor(e={}){for(let t in this.raws={},this[e_]=!1,this[ex]=!0,e)if("nodes"===t)for(let r of(this.nodes=[],e[t]))"function"==typeof r.clone?this.append(r.clone()):this.append(r);else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=function e(t,r){let n=new t.constructor;for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i)||"proxyCache"===i)continue;let o=t[i],s=typeof o;"parent"===i&&"object"===s?r&&(n[i]=r):"source"===i?n[i]=o:Array.isArray(o)?n[i]=o.map(t=>e(t,n)):("object"===s&&null!==o&&(o=e(o)),n[i]=o)}return n}(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new eb(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>e[t]===r||(e[t]=r,("prop"===t||"value"===t||"name"===t||"params"===t||"important"===t||"text"===t)&&e.markDirty(),!0)}}markDirty(){if(this[e_]){this[e_]=!1;let e=this;for(;e=e.parent;)e[e_]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new eE().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e)||"parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let o=t.get(n.input);null==o&&(o=i,t.set(n.input,i),i++),r[e]={end:n.end,inputId:o,start:n.start}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=eI){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}get proxyOf(){return this}};eC.default=eC;let ek=eC,eP=class extends ek{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};eP.default=eP;let{SourceMapConsumer:eO,SourceMapGenerator:eT}=ey,{existsSync:eR,readFileSync:eA}=ey,{dirname:eL,join:eM}=ey,eU=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=eL(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new eO(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e)){var t;return t=e.substr(RegExp.lastMatch.length),ed?ed.from(t,"base64").toString():window.atob(t)}throw Error("Unsupported source map encoding "+e.match(/data:application\/json;([^,]+),/)[1])}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=eL(e),eR(e))return this.mapFile=e,eA(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"==typeof t){let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw Error("Unable to load previous source map: "+r.toString());return e}}else if(t instanceof eO)return eT.fromSourceMap(t).toString();else if(t instanceof eT)return t.toString();else if(this.isMap(t))return JSON.stringify(t);else throw Error("Unsupported previous source map format: "+t.toString())}else if(this.inline)return this.decodeInline(this.annotation);else if(this.annotation){let t=this.annotation;return e&&(t=eM(eL(e),t)),this.loadFile(t)}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};eU.default=eU;let{SourceMapConsumer:eN,SourceMapGenerator:eD}=ey,{fileURLToPath:ej,pathToFileURL:eq}=ey,{isAbsolute:eB,resolve:eF}=ey,{nanoid:eJ}={nanoid:(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",i=r;for(;i--;)n+=e[Math.random()*e.length|0];return n}},eG=Symbol("fromOffsetCache"),ez=!!(eN&&eD),eV=!!(eF&&eB),eW=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\uFEFF"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!eV||/^\w+:\/\//.test(t.from)||eB(t.from)?this.file=t.from:this.file=eF(t.from)),eV&&ez){let e=new eU(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+eJ(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,o,s;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);o=e.line,s=e.col}else o=n.line,s=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let u=this.origin(t,r,o,s);return(i=u?new eb(e,void 0===u.endLine?u.line:{column:u.column,line:u.line},void 0===u.endLine?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,n.plugin):new eb(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin)).input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(eq&&(i.input.url=eq(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[eG])r=this[eG];else{let e=this.css.split("\n");r=Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[eG]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,i=r.length-2;for(;n<i;)if(e<r[t=n+(i-n>>1)])i=t-1;else if(e>=r[t+1])n=t+1;else{n=t;break}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:eF(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){let i,o;if(!this.map)return!1;let s=this.map.consumer(),u=s.originalPositionFor({column:t,line:e});if(!u.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=eB(u.source)?eq(u.source):new URL(u.source,this.map.consumer().sourceRoot||eq(this.map.mapFile));let a={column:u.column,endColumn:i&&i.column,endLine:i&&i.line,line:u.line,url:o.toString()};if("file:"===o.protocol){if(ej)a.file=ej(o);else throw Error("file: protocol is not available in this PostCSS build")}let c=s.sourceContentFor(u.source);return c&&(a.source=c),a}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};eW.default=eW,ey&&ey.registerInput&&ey.registerInput(eW);let{SourceMapConsumer:e$,SourceMapGenerator:eK}=ey,{dirname:eZ,relative:eX,resolve:eQ,sep:eH}=ey,{pathToFileURL:eY}=ey,e0=!!(e$&&eK),e1=!!(eZ&&eQ&&eX&&eH),e2=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),n=e.root||eZ(e.file);!1===this.mapOpts.sourcesContent?(t=new e$(e.text)).sourcesContent&&(t.sourcesContent=null):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation){if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}}generate(){if(this.clearAnnotation(),e1&&e0&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=eK.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new eK({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return(this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline())?[this.css]:[this.css,this.map]}generateString(){let e,t;this.css="",this.map=new eK({file:this.outputFile(),ignoreInvalidMapping:!0});let r=1,n=1,i="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(s,u,a)=>{if(this.css+=s,u&&"end"!==a&&(o.generated.line=r,o.generated.column=n-1,u.source&&u.source.start?(o.source=this.sourcePath(u),o.original.line=u.source.start.line,o.original.column=u.source.start.column-1):(o.source=i,o.original.line=1,o.original.column=0),this.map.addMapping(o)),(e=s.match(/\n/g))?(r+=e.length,t=s.lastIndexOf("\n"),n=s.length-t):n+=s.length,u&&"start"!==a){let e=u.parent||{raws:{}};(!("decl"===u.type||"atrule"===u.type&&!u.nodes)||u!==e.last||e.raws.semicolon)&&(u.source&&u.source.end?(o.source=this.sourcePath(u),o.original.line=u.source.end.line,o.original.column=u.source.end.column-1,o.generated.line=r,o.generated.column=n-2):(o.source=i,o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=n-1),this.map.addMapping(o))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||60===e.charCodeAt(0)||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?eZ(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=eZ(eQ(r,this.mapOpts.annotation)));let n=eX(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps){if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new eW(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return ed?ed.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(eY){let t=eY(e).toString();return this.memoizedFileURLs.set(e,t),t}throw Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===eH&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},e3=eC,e4=class extends e3{constructor(e){super(e),this.type="comment"}};e4.default=e4;let{isClean:e5,my:e6}=ew,e8=eC,e7=class e extends e8{append(...e){for(let t of e)for(let e of this.normalize(t,this.last))this.proxyOf.nodes.push(e);return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){let t,r;if(!this.proxyOf.nodes)return;let n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(r=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){if("proxyOf"===t)return e;if(!e[t])return e[t];if("each"===t||"string"==typeof t&&t.startsWith("walk"))return(...r)=>e[t](...r.map(e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e));if("every"===t||"some"===t)return r=>e[t]((e,...t)=>r(e.toProxy(),...t));if("root"===t)return()=>e.root().toProxy();if("nodes"===t)return e.nodes.map(e=>e.toProxy());if("first"===t||"last"===t)return e[t].toProxy();else return e[t]},set:(e,t,r)=>e[t]===r||(e[t]=r,("name"===t||"params"===t||"selector"===t)&&e.markDirty(),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();for(let t of(n=this.index(e),i))this.proxyOf.nodes.splice(n+1,0,t);for(let e in this.indexes)n<(r=this.indexes[e])&&(this.indexes[e]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();for(let t of(n=this.index(e),o))this.proxyOf.nodes.splice(n,0,t);for(let e in this.indexes)n<=(r=this.indexes[e])&&(this.indexes[e]=r+o.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(n(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t))for(let e of t=t.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if("root"===t.type&&"document"!==this.type)for(let e of t=t.nodes.slice(0))e.parent&&e.parent.removeChild(e,"ignore");else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new eP(t)]}else if(t.selector)t=[new i(t)];else if(t.name)t=[new o(t)];else if(t.text)t=[new e4(t)];else throw Error("Unknown node type in node creation");return t.map(t=>(t[e6]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e5]&&function e(t){if(t[e5]=!1,t.proxyOf.nodes)for(let r of t.proxyOf.nodes)e(r)}(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...e){for(let t of e=e.reverse()){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;for(let r in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(n=>{(!t.props||t.props.includes(n.prop))&&(!t.fast||n.value.includes(t.fast))&&(n.value=n.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("atrule"===e.type)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if("comment"===t.type)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("decl"===e.type)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("rule"===e.type)return t(e,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};e7.registerParse=e=>{n=e},e7.registerRule=e=>{i=e},e7.registerAtRule=e=>{o=e},e7.registerRoot=e=>{s=e},e7.default=e7,e7.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,o.prototype):"rule"===e.type?Object.setPrototypeOf(e,i.prototype):"decl"===e.type?Object.setPrototypeOf(e,eP.prototype):"comment"===e.type?Object.setPrototypeOf(e,e4.prototype):"root"===e.type&&Object.setPrototypeOf(e,s.prototype),e[e6]=!0,e.nodes&&e.nodes.forEach(e=>{e7.rebuild(e)})};let e9=e7,te=class extends e9{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new u(new a,this,e).stringify()}};te.registerLazyResult=e=>{u=e},te.registerProcessor=e=>{a=e},te.default=te;let tt=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};tt.default=tt;let tr=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){!t.plugin&&this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new tt(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>"warning"===e.type)}get content(){return this.css}};tr.default=tr;let tn=/[\t\n\f\r "#'()/;[\\\]{}]/g,ti=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,to=/.[\r\n"'(/\\]/,ts=/[\da-f]/i,tu=e7,ta=class extends tu{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};ta.default=ta,tu.registerAtRule(ta);let tc=e7,tl=class extends tc{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t){if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before}return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new c(new l,this,e).stringify()}};tl.registerLazyResult=e=>{c=e},tl.registerProcessor=e=>{l=e},tl.default=tl,tc.registerRoot(tl);let td={comma:e=>td.split(e,[","],!0),space:e=>td.split(e,[" ","\n","	"]),split(e,t,r){let n=[],i="",o=!1,s=0,u=!1,a="",c=!1;for(let r of e)c?c=!1:"\\"===r?c=!0:u?r===a&&(u=!1):'"'===r||"'"===r?(u=!0,a=r):"("===r?s+=1:")"===r?s>0&&(s-=1):0===s&&t.includes(r)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=r;return(r||""!==i)&&n.push(i.trim()),n}};td.default=td;let tf=e7,th=class extends tf{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return td.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};th.default=th,tf.registerRule(th);let tp=function(e,t={}){let r,n,i,o,s,u,a,c,l,d,f=e.css.valueOf(),h=t.ignoreErrors,p=f.length,v=0,g=[],m=[];function y(t){throw e.error("Unclosed "+t,v)}return{back:function(e){m.push(e)},endOfFile:function(){return 0===m.length&&v>=p},nextToken:function(e){if(m.length)return m.pop();if(v>=p)return;let t=!!e&&e.ignoreUnclosed;switch(r=f.charCodeAt(v)){case 10:case 32:case 9:case 13:case 12:n=v;do n+=1,r=f.charCodeAt(n);while(32===r||10===r||9===r||13===r||12===r);d=["space",f.slice(v,n)],v=n-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let e=String.fromCharCode(r);d=[e,e,v];break}case 40:if(c=g.length?g.pop()[1]:"",l=f.charCodeAt(v+1),"url"===c&&39!==l&&34!==l&&32!==l&&10!==l&&9!==l&&12!==l&&13!==l){n=v;do{if(u=!1,-1===(n=f.indexOf(")",n+1))){if(h||t){n=v;break}y("bracket")}for(a=n;92===f.charCodeAt(a-1);)a-=1,u=!u}while(u);d=["brackets",f.slice(v,n+1),v,n],v=n}else n=f.indexOf(")",v+1),o=f.slice(v,n+1),-1===n||to.test(o)?d=["(","(",v]:(d=["brackets",o,v,n],v=n);break;case 39:case 34:i=39===r?"'":'"',n=v;do{if(u=!1,-1===(n=f.indexOf(i,n+1))){if(h||t){n=v+1;break}y("string")}for(a=n;92===f.charCodeAt(a-1);)a-=1,u=!u}while(u);d=["string",f.slice(v,n+1),v,n],v=n;break;case 64:tn.lastIndex=v+1,tn.test(f),n=0===tn.lastIndex?f.length-1:tn.lastIndex-2,d=["at-word",f.slice(v,n+1),v,n],v=n;break;case 92:for(n=v,s=!0;92===f.charCodeAt(n+1);)n+=1,s=!s;if(r=f.charCodeAt(n+1),s&&47!==r&&32!==r&&10!==r&&9!==r&&13!==r&&12!==r&&(n+=1,ts.test(f.charAt(n)))){for(;ts.test(f.charAt(n+1));)n+=1;32===f.charCodeAt(n+1)&&(n+=1)}d=["word",f.slice(v,n+1),v,n],v=n;break;default:47===r&&42===f.charCodeAt(v+1)?(0===(n=f.indexOf("*/",v+2)+1)&&(h||t?n=f.length:y("comment")),d=["comment",f.slice(v,n+1),v,n]):(ti.lastIndex=v+1,ti.test(f),n=0===ti.lastIndex?f.length-1:ti.lastIndex-2,d=["word",f.slice(v,n+1),v,n],g.push(d)),v=n}return v++,d},position:function(){return v}}},tv={empty:!0,space:!0},tg=class{constructor(e){this.input=e,this.root=new tl,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,n,i=new ta;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);let o=!1,s=!1,u=[],a=[];for(;!this.tokenizer.endOfFile();){if("("===(t=(e=this.tokenizer.nextToken())[0])||"["===t?a.push("("===t?")":"]"):"{"===t&&a.length>0?a.push("}"):t===a[a.length-1]&&a.pop(),0===a.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(u.length>0){for(n=u.length-1,r=u[n];r&&"space"===r[0];)r=u[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}u.push(e)}else u.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(u),u.length?(i.raws.afterName=this.spacesAndCommentsFromStart(u),this.raw(i,"params",u),o&&(e=u[u.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t,r=this.colon(e);if(!1===r)return;let n=0;for(let i=r-1;i>=0&&("space"===(t=e[i])[0]||2!==(n+=1));i--);throw this.input.error("Missed semicolon","word"===t[0]?t[3]+1:t[2])}colon(e){let t,r,n=0;for(let[i,o]of e.entries()){if("("===(t=o[0])&&(n+=1),")"===t&&(n-=1),0===n&&":"===t){if(r){if("word"===r[0]&&"progid"===r[1])continue;return i}this.doubleColon(o)}r=o}return!1}comment(e){let t=new e4;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tp(this.input)}decl(e,t){let r,n,i=new eP;this.init(i,e[0][2]);let o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),i.source.end=this.getPosition(o[3]||o[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),i.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),i.raws.before+=e.shift()[1];for(i.source.start=this.getPosition(e[0][2]),i.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;i.prop+=e.shift()[1]}for(i.raws.between="";e.length;){if(":"===(r=e.shift())[0]){i.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),i.raws.between+=r[1]}("_"===i.prop[0]||"*"===i.prop[0])&&(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1));let s=[];for(;e.length&&("space"===(n=e[0][0])||"comment"===n);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if("!important"===(r=e[t])[1].toLowerCase()){i.important=!0;let r=this.stringFrom(e,t);" !important"!==(r=this.spacesFromEnd(e)+r)&&(i.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),n="";for(let e=t;e>0;e--){let t=r[e][0];if(0===n.trim().indexOf("!")&&"space"!==t)break;n=r.pop()[1]+n}0===n.trim().indexOf("!")&&(i.important=!0,i.raws.important=n,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(i.raws.between+=s.map(e=>e[1]).join(""),s=[]),this.raw(i,"value",s.concat(e),t),i.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new th;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),u=[],a=e;for(;a;){if(r=a[0],u.push(a),"("===r||"["===r)i||(i=a),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=a),o.push("}");else if(0===o.length){if(";"===r){if(n){this.decl(u,s);return}break}if("{"===r){this.rule(u);return}if("}"===r){this.tokenizer.back(u.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));a=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;u.length&&("space"===(a=u[u.length-1][0])||"comment"===a);)this.tokenizer.back(u.pop());this.decl(u,s)}else this.unknownWord(u)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,s,u;let a=r.length,c="",l=!0;for(let e=0;e<a;e+=1)"space"!==(o=(i=r[e])[0])||e!==a-1||n?"comment"===o?(u=r[e-1]?r[e-1][0]:"empty",s=r[e+1]?r[e+1][0]:"empty",tv[u]||tv[s]?l=!1:","===c.slice(-1)?l=!1:c+=i[1]):c+=i[1]:l=!1;if(!l){let n=r.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:n,value:c}}e[t]=c}rule(e){e.pop();let t=new th;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t;let r="";for(;e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t;let r="";for(;e.length&&("space"===(t=e[0][0])||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t="";for(;e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};function tm(e,t){let r=new tg(new eW(e,t));try{r.parse()}catch(e){throw e}return r.root}tm.default=tm,e7.registerParse(tm);let{isClean:ty,my:tb}=ew,tw={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},tS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},tE={Once:!0,postcssPlugin:!0,prepare:!0};function tI(e){return"object"==typeof e&&"function"==typeof e.then}function t_(e){let t=!1,r=tw[e.type];return("decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append)?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function tx(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:t_(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function tC(e){return e[ty]=!1,e.nodes&&e.nodes.forEach(e=>tC(e)),e}let tk={},tP=class e{constructor(t,r,n){let i;if(this.stringified=!1,this.processed=!1,"object"==typeof r&&null!==r&&("root"===r.type||"document"===r.type))i=tC(r);else if(r instanceof e||r instanceof tr)i=tC(r.root),r.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let e=tm;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(r,n)}catch(e){this.processed=!0,this.error=e}i&&!i[tb]&&e7.rebuild(i)}this.result=new tr(t,i,n),this.helpers={...tk,postcss:tk,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!tS[r]&&/^[A-Z]/.test(r))throw Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!tE[r]){if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(tI(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ty];){e[ty]=!0;let t=[tx(e)];for(;t.length>0;){let e=this.visitTick(t);if(tI(e))try{await e}catch(r){let e=t[t.length-1].node;throw this.handleError(r,e)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>r(e,this.helpers));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));if(tI(t[0]))return Promise.all(t);return t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=eI;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new e2(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(tI(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ty];)e[ty]=!0,this.walkSync(e);if(this.listeners.OnceExit){if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(tI(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent){e.pop();return}if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let n,i=t.iterator;for(;n=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!n[ty]){n[ty]=!0,e.push(tx(n));return}t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e){r.nodes&&r.nodes.length&&(r[ty]=!0,t.iterator=r.getIterator());return}if(this.listeners[e]){t.visitors=this.listeners[e];return}}e.pop()}walkSync(e){for(let t of(e[ty]=!0,t_(e)))if(0===t)e.nodes&&e.each(e=>{e[ty]||this.walkSync(e)});else{let r=this.listeners[t];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};tP.registerPostcss=e=>{tk=e},tP.default=tP,tl.registerLazyResult(tP),te.registerLazyResult(tP);let tO=class{constructor(e,t,r){let n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0,this.result=new tr(this._processor,n,this._opts),this.result.css=t;let i=this;Object.defineProperty(this.result,"root",{get:()=>i.root});let o=new e2(eI,n,this._opts,t);if(o.isMap()){let[e,t]=o.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else o.clearAnnotation(),this.result.css=o.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){let e;if(this._root)return this._root;try{e=tm(this._css,this._opts)}catch(e){this.error=e}if(!this.error)return this._root=e,e;throw this.error}get[Symbol.toStringTag](){return"NoWorkResult"}};tO.default=tO;let tT=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else if("object"==typeof r&&(r.parse||r.stringify));else throw Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new tP(this,e,t):new tO(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};function tR(e,t){if(Array.isArray(e))return e.map(e=>tR(e));let{inputs:r,...n}=e;if(r)for(let e of(t=[],r)){let r={...e,__proto__:eW.prototype};r.map&&(r.map={...r.map,__proto__:eU.prototype}),t.push(r)}if(n.nodes&&(n.nodes=e.nodes.map(e=>tR(e,t))),n.source){let{inputId:e,...r}=n.source;n.source=r,null!=e&&(n.source.input=t[e])}if("root"===n.type)return new tl(n);if("decl"===n.type)return new eP(n);if("rule"===n.type)return new th(n);if("comment"===n.type)return new e4(n);if("atrule"===n.type)return new ta(n);throw Error("Unknown node type: "+e.type)}function tA(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new tT(e)}tT.default=tT,tl.registerProcessor(tT),te.registerProcessor(tT),tR.default=tR,tA.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),ef.env.LANG&&ef.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let o=t(...r);return o.postcssPlugin=e,o.postcssVersion=new tT().version,o}return Object.defineProperty(i,"postcss",{get:()=>(r||(r=i()),r)}),i.process=function(e,t,r){return tA([i(r)]).process(e,t)},i},tA.stringify=eI,tA.parse=tm,tA.fromJSON=tR,tA.list=td,tA.comment=e=>new e4(e),tA.atRule=e=>new ta(e),tA.decl=e=>new eP(e),tA.rule=e=>new th(e),tA.root=e=>new tl(e),tA.document=e=>new te(e),tA.CssSyntaxError=eb,tA.Declaration=eP,tA.Container=e7,tA.Processor=tT,tA.Document=te,tA.Comment=e4,tA.Warning=tt,tA.AtRule=ta,tA.Result=tr,tA.Input=eW,tA.Rule=th,tA.Root=tl,tA.Node=eC,tP.registerPostcss(tA),tA.default=tA;let tL=tA&&tA.__esModule&&Object.prototype.hasOwnProperty.call(tA,"default")?tA.default:tA;tL.stringify,tL.fromJSON,tL.plugin,tL.parse,tL.list,tL.document,tL.comment,tL.atRule,tL.rule,tL.decl,tL.root,tL.CssSyntaxError,tL.Declaration,tL.Container,tL.Processor,tL.Document,tL.Comment,tL.Warning,tL.AtRule,tL.Result,tL.Input,tL.Rule,tL.Root,tL.Node;var tM="medium",tU=function(e,t,r){switch(t){case"light":if("input"!==e)return!0;var n=r?function(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}(r):"";if(!n)return!1;if(["password","hidden","email","tel"].includes(n)||r.autocomplete.startsWith("cc-"))return!0;return!1;case"medium":case"conservative":return!0;default:return tU(e,tM,r)}},tN=function(e,t,r){var n,i,o;if(void 0===t&&(t={defaultMaskLevel:tM}),r){if(r.closest("."+Y)||(null!==(n=t.maskSelector)&&void 0!==n?n:[]).some(function(e){return r.closest(e)}))return!0;if(r.closest(".amp-unmask")||(null!==(i=t.unmaskSelector)&&void 0!==i?i:[]).some(function(e){return r.closest(e)}))return!1}return tU(e,null!==(o=t.defaultMaskLevel)&&void 0!==o?o:tM,r)},tD=function(e,t){return function(r,n){return tN(e,t,n)?r.replace(/[^\s]/g,"*"):r}},tj=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t},tq=function(){var e=(0,er.l)();return(null==e?void 0:e.location)?e.location.href:""},tB=function(e,t){return t||(e===y.STAGING?"https://api-sr.stag2.amplitude.com/sessions/v2/track":e===y.EU?"https://api-sr.eu.amplitude.com/sessions/v2/track":"https://api-sr.amplitude.com/sessions/v2/track")},tF=function(){return(0,B.mG)(void 0,void 0,void 0,function(){var e,t,r,n;return(0,B.Jh)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!(e=(0,er.l)()))return[3,2];return[4,e.navigator.storage.estimate()];case 1:return r=(t=i.sent()).usage,n=t.quota,[2,{totalStorageSize:r?Math.round(r/1024):0,percentOfQuota:r&&n?Math.round((r/n+Number.EPSILON)*1e3)/1e3:0,usageDetails:JSON.stringify(t.usageDetails)}];case 2:return[3,4];case 3:return i.sent(),[3,4];case 4:return[2,{totalStorageSize:0,percentOfQuota:0,usageDetails:""}]}})})},tJ=function(e){var t=(0,B.pi)({},e),r=t.apiKey;return t.apiKey="****".concat(r.substring(r.length-4)),t},tG=function(e,t){var r=document.createDocumentFragment(),n=function(e){if(void 0===e&&(e=[]),"string"==typeof e&&(e=[e]),0!==(e=e.filter(function(e){try{r.querySelector(e)}catch(r){return t.warn('[session-replay-browser] omitting selector "'.concat(e,'" because it is invalid')),!1}return!0})).length)return e};return e.blockSelector=n(e.blockSelector),e.maskSelector=n(e.maskSelector),e.unmaskSelector=n(e.unmaskSelector),e},tz=function(){function e(e,t){this.localConfig=t,this.remoteConfigFetch=e}return e.prototype.generateJoinedConfig=function(e){var t,r,n;return(0,B.mG)(this,void 0,void 0,function(){var i,o,s,u,a,c,l,d,f,h,p,v,g,m,y,b,w,S,E;return(0,B.Jh)(this,function(I){switch(I.label){case 0:(i=(0,B.pi)({},this.localConfig)).optOut=this.localConfig.optOut,i.captureEnabled=!0,I.label=1;case 1:return I.trys.push([1,5,,6]),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_sampling_config",e)];case 2:return s=I.sent(),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_privacy_config",e)];case 3:return u=I.sent(),a=i,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_interaction_config",e)];case 4:return a.interactionConfig=I.sent(),(s||u)&&(o={},s&&(o.sr_sampling_config=s),u&&(o.sr_privacy_config=u)),[3,6];case 5:return c=I.sent(),this.localConfig.loggerProvider.warn(c.message),i.captureEnabled=!1,[3,6];case 6:if(!o)return[2,i];if(l=o.sr_sampling_config,d=o.sr_privacy_config,l&&Object.keys(l).length>0?(Object.prototype.hasOwnProperty.call(l,"capture_enabled")?i.captureEnabled=l.capture_enabled:i.captureEnabled=!1,Object.prototype.hasOwnProperty.call(l,"sample_rate")&&(i.sampleRate=l.sample_rate)):(i.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),d){f=null!==(t=i.privacyConfig)&&void 0!==t?t:{},h={defaultMaskLevel:null!==(n=null!==(r=d.defaultMaskLevel)&&void 0!==r?r:f.defaultMaskLevel)&&void 0!==n?n:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},p=function(e){var t,r,n,i,o,s,u,a,c,l={};"string"==typeof e.blockSelector&&(e.blockSelector=[e.blockSelector]);try{for(var d=(0,B.XA)(null!==(u=e.blockSelector)&&void 0!==u?u:[]),f=d.next();!f.done;f=d.next()){var h=f.value;l[h]="block"}}catch(e){t={error:e}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}try{for(var p=(0,B.XA)(null!==(a=e.maskSelector)&&void 0!==a?a:[]),v=p.next();!v.done;v=p.next()){var h=v.value;l[h]="mask"}}catch(e){n={error:e}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var g=(0,B.XA)(null!==(c=e.unmaskSelector)&&void 0!==c?c:[]),m=g.next();!m.done;m=g.next()){var h=m.value;l[h]="unmask"}}catch(e){o={error:e}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}return l},v=(0,B.pi)((0,B.pi)({},p(f)),p(d));try{for(m=(g=(0,B.XA)(Object.entries(v))).next();!m.done;m=g.next())b=(y=(0,B.CR)(m.value,2))[0],w=y[1],"mask"===w?h.maskSelector.push(b):"block"===w?h.blockSelector.push(b):"unmask"===w&&h.unmaskSelector.push(b)}catch(e){S={error:e}}finally{try{m&&!m.done&&(E=g.return)&&E.call(g)}finally{if(S)throw S.error}}i.privacyConfig=tG(h,this.localConfig.loggerProvider)}return this.localConfig.loggerProvider.debug(JSON.stringify({name:"session replay joined config",config:tJ(i)},null,2)),[2,i]}})})},e}(),tV="Failed to store session replay events in IndexedDB",tW="1.19.0",t$=function(){function e(e){var t=e.trackServerUrl,r=e.loggerProvider,n=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=r,this.payloadBatcher=n||function(e){return e},this.trackServerUrl=t}return e.prototype.sendEventsList=function(e){this.addToQueue((0,B.pi)((0,B.pi)({},e),{attempts:0,timeout:0}))},e.prototype.addToQueue=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.filter(function(t){return t.attempts<(t.flushMaxRetries||0)?(t.attempts+=1,!0):(e.completeRequest({context:t,err:"Session replay event batch rejected due to exceeded retry count"}),!1)}).forEach(function(t){if(e.queue=e.queue.concat(t),0===t.timeout){e.schedule(0);return}setTimeout(function(){t.timeout=0,e.schedule(0)},t.timeout)})},e.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),(0,B.mG)(this,void 0,void 0,function(){var t,r,n=this;return(0,B.Jh)(this,function(i){switch(i.label){case 0:return t=[],r=[],this.queue.forEach(function(e){return 0===e.timeout?t.push(e):r.push(e)}),this.queue=r,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(t.map(function(t){return n.send(t,e)}))];case 1:return i.sent(),[2]}})})},e.prototype.send=function(e,t){var r,n;return void 0===t&&(t=!0),(0,B.mG)(this,void 0,void 0,function(){var i,o,s,u,a,c,l,d,f,h,p,v;return(0,B.Jh)(this,function(g){switch(g.label){case 0:if(!(i=e.apiKey))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing api key"})];if(!(o=e.deviceId))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing device ID"})];if(s=tq(),u=tW,a=e.sampleRate,c=new URLSearchParams({device_id:o,session_id:"".concat(e.sessionId),type:"".concat(e.type)}),l="".concat((null===(r=e.version)||void 0===r?void 0:r.type)||"standalone","/").concat((null===(n=e.version)||void 0===n?void 0:n.version)||u),0===(d=this.payloadBatcher({version:1,events:e.events})).events.length)return this.completeRequest({context:e}),[2];g.label=1;case 1:return g.trys.push([1,3,,4]),f={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(i),"X-Client-Version":u,"X-Client-Library":l,"X-Client-Url":s,"X-Client-Sample-Rate":"".concat(a)},body:JSON.stringify(d),method:"POST"},[4,fetch("".concat(tB(e.serverZone,this.trackServerUrl),"?").concat(c.toString()),f)];case 2:if(null===(h=g.sent()))return this.completeRequest({context:e,err:"Unexpected error occurred"}),[2];if(t)this.handleReponse(h.status,e);else{p="";try{p=JSON.stringify(h.body,null,2)}catch(e){}this.completeRequest({context:e,success:"".concat(h.status,": ").concat(p)})}return[3,4];case 3:return v=g.sent(),this.completeRequest({context:e,err:v}),[3,4];case 4:return[2]}})})},e.prototype.handleReponse=function(e,t){switch(new es().buildStatus(e)){case w.Success:this.handleSuccessResponse(t);break;case w.Failed:this.handleOtherResponse(t);break;default:this.completeRequest({context:t,err:"Network error occurred, event batch rejected"})}},e.prototype.handleSuccessResponse=function(e){var t=Math.round(new Blob(e.events).size/1024);this.completeRequest({context:e,success:"Session replay event batch tracked successfully for session id ".concat(e.sessionId,", size of events: ").concat(t," KB")})},e.prototype.handleOtherResponse=function(e){this.addToQueue((0,B.pi)((0,B.pi)({},e),{timeout:e.attempts*this.retryTimeout}))},e.prototype.completeRequest=function(e){var t=e.context,r=e.err,n=e.success;t.onComplete(),r?this.loggerProvider.warn(r):n&&this.loggerProvider.log(n)},e}();let tK=(e,t)=>t.some(t=>e instanceof t),tZ=new WeakMap,tX=new WeakMap,tQ=new WeakMap,tH={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return tZ.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tY(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tY(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(tY(e.result)),n()},o=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)});return tQ.set(t,e),t}(e);if(tX.has(e))return tX.get(e);let r="function"==typeof(t=e)?(f||(f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(t0(this),e),tY(this.request)}:function(...e){return tY(t.apply(t0(this),e))}:(t instanceof IDBTransaction&&function(e){if(tZ.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),n()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});tZ.set(e,t)}(t),tK(t,d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,tH):t;return r!==e&&(tX.set(e,r),tQ.set(r,e)),r}let t0=e=>tQ.get(e),t1=["get","getKey","getAll","getAllKeys","count"],t2=["put","add","delete","clear"],t3=new Map;function t4(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(t3.get(t))return t3.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=t2.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||t1.includes(r)))return;let o=async function(e,...t){let o=this.transaction(e,i?"readwrite":"readonly"),s=o.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),i&&o.done]))[0]};return t3.set(t,o),o}tH={...h=tH,get:(e,t,r)=>t4(e,t)||h.get(e,t,r),has:(e,t)=>!!t4(e,t)||h.has(e,t)};let t5=["continue","continuePrimaryKey","advance"],t6={},t8=new WeakMap,t7=new WeakMap,t9={get(e,t){if(!t5.includes(t))return e[t];let r=t6[t];return r||(r=t6[t]=function(...e){t8.set(this,t7.get(this)[t](...e))}),r}};async function*re(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let r=new Proxy(t,t9);for(t7.set(r,t),tQ.set(r,t0(t));t;)yield r,t=await (t8.get(r)||t.continue()),t8.delete(r)}function rt(e,t){return t===Symbol.asyncIterator&&tK(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&tK(e,[IDBIndex,IDBObjectStore])}tH={...p=tH,get:(e,t,r)=>rt(e,t)?re:p.get(e,t,r),has:(e,t)=>rt(e,t)||p.has(e,t)};var rr=function(){function e(e){var t,r,n,i=this;this.minInterval=500,this.maxInterval=1e4,this.maxPersistedEventsSize=1e6,this.interval=this.minInterval,this._timeAtLastSplit=Date.now(),this.shouldSplitEventsList=function(e,t){var r=new Blob([t]).size;return new Blob(e).size+r>=i.maxPersistedEventsSize||Date.now()-i.timeAtLastSplit>i.interval&&!!e.length&&(i.interval=Math.min(i.maxInterval,i.interval+i.minInterval),i._timeAtLastSplit=Date.now(),!0)},this.loggerProvider=e.loggerProvider,this.minInterval=null!==(t=e.minInterval)&&void 0!==t?t:this.minInterval,this.maxInterval=null!==(r=e.maxInterval)&&void 0!==r?r:this.maxInterval,this.maxPersistedEventsSize=null!==(n=e.maxPersistedEventsSize)&&void 0!==n?n:this.maxPersistedEventsSize}return Object.defineProperty(e.prototype,"timeAtLastSplit",{get:function(){return this._timeAtLastSplit},enumerable:!1,configurable:!0}),e}();(T=S||(S={})).RECORDING="recording",T.SENT="sent";var rn="sessionCurrentSequence",ri="sequencesToSend",ro=function(){var e=(0,er.l)();return new Promise(function(t,r){if(!e)return r(Error("Global scope not found"));if(!e.indexedDB)return r(Error("Session Replay: cannot find indexedDB"));try{var n=e.indexedDB.open("keyval-store");n.onupgradeneeded=function(){1===n.result.version&&(n.result.close(),n.transaction&&n.transaction.abort(),e.indexedDB.deleteDatabase("keyval-store"),t())},n.onsuccess=function(){t(n.result)}}catch(e){r(e)}})},rs=function(e){return(0,B.mG)(void 0,void 0,void 0,function(){return(0,B.Jh)(this,function(t){switch(t.label){case 0:if(!(e.length>0))return[3,2];return[4,Promise.all(e.splice(0,10))];case 1:return t.sent(),[3,0];case 2:return[2]}})})},ru=function(e){var t,r;return e.objectStoreNames.contains(rn)||(r=e.createObjectStore(rn,{keyPath:"sessionId"})),e.objectStoreNames.contains(ri)||(t=e.createObjectStore(ri,{keyPath:"sequenceId",autoIncrement:!0})).createIndex("sessionId","sessionId"),{sequencesStore:t,currentSequenceStore:r}},ra=function(e){function t(t){var r=e.call(this,t)||this;return r.getSequencesToSend=function(){return(0,B.mG)(r,void 0,void 0,function(){var e,t,r,n,i,o;return(0,B.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e=[],[4,this.db.transaction("sequencesToSend").store.openCursor()];case 1:t=s.sent(),s.label=2;case 2:if(!t)return[3,4];return n=(r=t.value).sessionId,i=r.events,e.push({events:i,sequenceId:t.key,sessionId:n}),[4,t.continue()];case 3:return t=s.sent(),[3,2];case 4:return[2,e];case 5:return o=s.sent(),this.loggerProvider.warn("".concat(tV,": ").concat(o)),[3,6];case 6:return[2,void 0]}})})},r.storeCurrentSequence=function(e){return(0,B.mG)(r,void 0,void 0,function(){var t,r,n;return(0,B.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,this.db.get(rn,e)];case 1:if(!(t=i.sent()))return[2,void 0];return[4,this.db.put(ri,{sessionId:e,events:t.events})];case 2:return r=i.sent(),[4,this.db.put(rn,{sessionId:e,events:[]})];case 3:return i.sent(),[2,(0,B.pi)((0,B.pi)({},t),{sessionId:e,sequenceId:r})];case 4:return n=i.sent(),this.loggerProvider.warn("".concat(tV,": ").concat(n)),[3,5];case 5:return[2,void 0]}})})},r.addEventToCurrentSequence=function(e,t){return(0,B.mG)(r,void 0,void 0,function(){var r,n,i,o,s,u;return(0,B.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,10,,11]),[4,(r=this.db.transaction(rn,"readwrite")).store.get(e)];case 1:if(n=a.sent())return[3,3];return[4,r.store.put({sessionId:e,events:[t]})];case 2:return a.sent(),[2];case 3:if(i=void 0,!this.shouldSplitEventsList(n.events,t))return[3,5];return i=n.events,[4,r.store.put({sessionId:e,events:[t]})];case 4:return a.sent(),[3,7];case 5:return o=n.events.concat(t),[4,r.store.put({sessionId:e,events:o})];case 6:a.sent(),a.label=7;case 7:return[4,r.done];case 8:if(a.sent(),!i)return[2,void 0];return[4,this.storeSendingEvents(e,i)];case 9:if(!(s=a.sent()))return[2,void 0];return[2,{events:i,sessionId:e,sequenceId:s}];case 10:return u=a.sent(),this.loggerProvider.warn("".concat(tV,": ").concat(u)),[3,11];case 11:return[2,void 0]}})})},r.storeSendingEvents=function(e,t){return(0,B.mG)(r,void 0,void 0,function(){var r;return(0,B.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.db.put(ri,{sessionId:e,events:t})];case 1:return[2,n.sent()];case 2:return r=n.sent(),this.loggerProvider.warn("".concat(tV,": ").concat(r)),[3,3];case 3:return[2,void 0]}})})},r.cleanUpSessionEventsStore=function(e,t){return(0,B.mG)(r,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.db.delete(ri,t)];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),this.loggerProvider.warn("".concat(tV,": ").concat(e)),[3,4];case 4:return[2]}})})},r.transitionFromKeyValStore=function(e){return(0,B.mG)(r,void 0,void 0,function(){var t,r,n,i,o,s,u,a=this;return(0,B.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,ro()];case 1:if(!(t=c.sent()))return[2];r=function(e,t){return(0,B.mG)(a,void 0,void 0,function(){var r,n,i=this;return(0,B.Jh)(this,function(o){switch(o.label){case 0:return r=t.sessionSequences,n=[],Object.keys(r).forEach(function(o){var s=parseInt(o,10),u=r[s];if(s===t.currentSequenceId){var a=u.events.map(function(t){return(0,B.mG)(i,void 0,void 0,function(){return(0,B.Jh)(this,function(r){return[2,this.addEventToCurrentSequence(e,t)]})})});n.concat(a)}else u.status!==S.SENT&&n.push(i.storeSendingEvents(e,u.events))}),[4,rs(n)];case 1:return o.sent(),[2]}})})},n="".concat(z,"_").concat(this.apiKey.substring(0,10)),c.label=2;case 2:return c.trys.push([2,4,,5]),i=t.transaction("keyval").objectStore("keyval").getAll(n),[4,new Promise(function(t){i.onsuccess=function(n){return(0,B.mG)(a,void 0,void 0,function(){var i,o,s,u=this;return(0,B.Jh)(this,function(a){switch(a.label){case 0:if(!(o=(i=n&&n.target.result)&&i[0]))return[3,2];return s=[],Object.keys(o).forEach(function(t){var n=parseInt(t,10),i=o[n];if(e===n)s.push(r(n,i));else{var a=i.sessionSequences;Object.keys(a).forEach(function(e){var t=parseInt(e,10);a[t].status!==S.SENT&&s.push(u.storeSendingEvents(n,a[t].events))})}}),[4,rs(s)];case 1:a.sent(),a.label=2;case 2:return t(),[2]}})})}})];case 3:return c.sent(),(o=(0,er.l)())&&o.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return s=c.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(s)),[3,5];case 5:return[3,7];case 6:return u=c.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(u,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}})})},r.apiKey=t.apiKey,r.db=t.db,r}return(0,B.ZT)(t,e),t.new=function(e,r,n){return(0,B.mG)(this,void 0,void 0,function(){var i,o,s,u;return(0,B.Jh)(this,function(a){switch(a.label){case 0:var c;return a.trys.push([0,3,,4]),i="replay"===e?"":"_".concat(e),[4,(c="".concat(r.apiKey.substring(0,10),"_amp_session_replay_events").concat(i),(0,B.mG)(void 0,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return[4,function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){let s=indexedDB.open(e,1),u=tY(s);return n&&s.addEventListener("upgradeneeded",e=>{n(tY(s.result),e.oldVersion,e.newVersion,tY(s.transaction),e)}),r&&s.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),u.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),u}(c,0,{upgrade:ru})];case 1:return[2,e.sent()]}})}))];case 1:return o=a.sent(),[4,(s=new t((0,B.pi)((0,B.pi)({},r),{db:o}))).transitionFromKeyValStore(n)];case 2:return a.sent(),[2,s];case 3:return u=a.sent(),r.loggerProvider.warn("".concat(tV,": ").concat(u)),[3,4];case 4:return[2]}})})},t.prototype.getCurrentSequenceEvents=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t,r,n,i,o,s;return(0,B.Jh)(this,function(u){switch(u.label){case 0:if(!e)return[3,2];return[4,this.db.get("sessionCurrentSequence",e)];case 1:if(!(t=u.sent()))return[2,void 0];return[2,[t]];case 2:r=[],u.label=3;case 3:return u.trys.push([3,8,9,10]),[4,this.db.getAll("sessionCurrentSequence")];case 4:i=(n=B.XA.apply(void 0,[u.sent()])).next(),u.label=5;case 5:if(i.done)return[3,7];t=i.value,r.push(t),u.label=6;case 6:return i=n.next(),[3,5];case 7:return[3,10];case 8:return o={error:u.sent()},[3,10];case 9:try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}return[7];case 10:return[2,r]}})})},t}(rr),rc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finalizedSequences={},t.sequences={},t.sequenceId=0,t}return(0,B.ZT)(t,e),t.prototype.resetCurrentSequence=function(e){this.sequences[e]=[]},t.prototype.addSequence=function(e){var t=this.sequenceId++,r=(0,B.ev)([],(0,B.CR)(this.sequences[e]),!1);return this.finalizedSequences[t]={sessionId:e,events:r},this.resetCurrentSequence(e),{sequenceId:t,events:r,sessionId:e}},t.prototype.getSequencesToSend=function(){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return[2,Object.entries(this.finalizedSequences).map(function(e){var t=(0,B.CR)(e,2),r=t[0],n=t[1],i=n.sessionId,o=n.events;return{sequenceId:Number(r),sessionId:i,events:o}})]})})},t.prototype.storeCurrentSequence=function(e){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(t){return this.sequences[e]?[2,this.addSequence(e)]:[2,void 0]})})},t.prototype.addEventToCurrentSequence=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){var r;return(0,B.Jh)(this,function(n){return this.sequences[e]||this.resetCurrentSequence(e),this.shouldSplitEventsList(this.sequences[e],t)&&(r=this.addSequence(e)),this.sequences[e].push(t),[2,r]})})},t.prototype.storeSendingEvents=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(r){return this.finalizedSequences[this.sequenceId]={sessionId:e,events:t},[2,this.sequenceId++]})})},t.prototype.cleanUpSessionEventsStore=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(e){return void 0!==t&&delete this.finalizedSequences[t],[2]})})},t}(rr),rl=function(e){var t=e.config,r=e.sessionId,n=e.minInterval,i=e.maxInterval,o=e.type,s=e.payloadBatcher,u=e.storeType;return(0,B.mG)(void 0,void 0,void 0,function(){var e,a,c,l,d,f;function h(t){return void 0===t&&(t=!1),(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(r){return[2,e.flush(t)]})})}return(0,B.Jh)(this,function(p){switch(p.label){case 0:if(e=new t$((0,B.pi)((0,B.pi)({},t),{loggerProvider:t.loggerProvider,payloadBatcher:s})),a=function(){return new rc({loggerProvider:t.loggerProvider,maxInterval:i,minInterval:n})},c=function(){return(0,B.mG)(void 0,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(s){switch(s.label){case 0:return[4,ra.new(o,{loggerProvider:t.loggerProvider,minInterval:n,maxInterval:i,apiKey:t.apiKey},r)];case 1:return e=s.sent(),t.loggerProvider.log("Failed to initialize idb store, falling back to memory store."),[2,null!=e?e:a()]}})})},"idb"!==u)return[3,2];return[4,c()];case 1:return d=p.sent(),[3,3];case 2:d=a(),p.label=3;case 3:return l=d,f=function(r){var n=r.events,i=r.sessionId,s=r.deviceId,u=r.sequenceId;t.debugMode&&tF().then(function(e){var r=e.totalStorageSize,n=e.percentOfQuota,i=e.usageDetails;t.loggerProvider.debug("Total storage size: ".concat(r," KB, percentage of quota: ").concat(n,"%, usage details: ").concat(i))}).catch(function(){}),e.sendEventsList({events:n,sessionId:i,flushMaxRetries:t.flushMaxRetries,apiKey:t.apiKey,deviceId:s,sampleRate:t.sampleRate,serverZone:t.serverZone,version:t.version,type:o,onComplete:function(){return(0,B.mG)(void 0,void 0,void 0,function(){return(0,B.Jh)(this,function(e){switch(e.label){case 0:return[4,l.cleanUpSessionEventsStore(i,u)];case 1:return e.sent(),[2]}})})}})},[2,{sendCurrentSequenceEvents:function(e){var r=e.sessionId,n=e.deviceId;l.storeCurrentSequence(r).then(function(e){e&&f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:n})}).catch(function(e){t.loggerProvider.warn("Failed to get current sequence of session replay events for session:",e)})},addEvent:function(e){var r=e.event,n=e.sessionId,i=e.deviceId;l.addEventToCurrentSequence(n,r.data).then(function(e){return e&&f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:i})}).catch(function(e){t.loggerProvider.warn("Failed to add event to session replay capture:",e)})},sendStoredEvents:function(e){var t=e.deviceId;return(0,B.mG)(void 0,void 0,void 0,function(){var e;return(0,B.Jh)(this,function(r){switch(r.label){case 0:return[4,l.getSequencesToSend()];case 1:return(e=r.sent())&&e.forEach(function(e){f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:t})}),[2]}})})},flush:h}]}})})},rd=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new Map;e.forEach(function(e){r.set(e.name,e.manager)}),this.managers=r}return e.prototype.sendStoredEvents=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(r){switch(r.label){case 0:return t=[],this.managers.forEach(function(r){t.push(r.sendStoredEvents(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.addEvent=function(e){var t,r=e.sessionId,n=e.event,i=e.deviceId;null===(t=this.managers.get(n.type))||void 0===t||t.addEvent({sessionId:r,event:n,deviceId:i})},e.prototype.sendCurrentSequenceEvents=function(e){var t=e.sessionId,r=e.deviceId;this.managers.forEach(function(e){e.sendCurrentSequenceEvents({sessionId:t,deviceId:r})})},e.prototype.flush=function(e){return(0,B.mG)(this,void 0,void 0,function(){var t;return(0,B.Jh)(this,function(r){switch(r.label){case 0:return t=[],this.managers.forEach(function(r){t.push(r.flush(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e}(),rf=((R=rf||{})[R.DomContentLoaded=0]="DomContentLoaded",R[R.Load=1]="Load",R[R.FullSnapshot=2]="FullSnapshot",R[R.IncrementalSnapshot=3]="IncrementalSnapshot",R[R.Meta=4]="Meta",R[R.Custom=5]="Custom",R[R.Plugin=6]="Plugin",R),rh=((A=rh||{})[A.Mutation=0]="Mutation",A[A.MouseMove=1]="MouseMove",A[A.MouseInteraction=2]="MouseInteraction",A[A.Scroll=3]="Scroll",A[A.ViewportResize=4]="ViewportResize",A[A.Input=5]="Input",A[A.TouchMove=6]="TouchMove",A[A.MediaInteraction=7]="MediaInteraction",A[A.StyleSheetRule=8]="StyleSheetRule",A[A.CanvasMutation=9]="CanvasMutation",A[A.Font=10]="Font",A[A.Log=11]="Log",A[A.Drag=12]="Drag",A[A.StyleDeclaration=13]="StyleDeclaration",A[A.Selection=14]="Selection",A[A.AdoptedStyleSheet=15]="AdoptedStyleSheet",A[A.CustomElement=16]="CustomElement",A),rp=((L=rp||{})[L.MouseUp=0]="MouseUp",L[L.MouseDown=1]="MouseDown",L[L.Click=2]="Click",L[L.ContextMenu=3]="ContextMenu",L[L.DblClick=4]="DblClick",L[L.Focus=5]="Focus",L[L.Blur=6]="Blur",L[L.TouchStart=7]="TouchStart",L[L.TouchMove_Departed=8]="TouchMove_Departed",L[L.TouchEnd=9]="TouchEnd",L[L.TouchCancel=10]="TouchCancel",L),rv=((M=rv||{})[M.Mouse=0]="Mouse",M[M.Pen=1]="Pen",M[M.Touch=2]="Touch",M),rg=((U=rg||{})[U["2D"]=0]="2D",U[U.WebGL=1]="WebGL",U[U.WebGL2=2]="WebGL2",U),rm=((N=rm||{})[N.Play=0]="Play",N[N.Pause=1]="Pause",N[N.Seeked=2]="Seeked",N[N.VolumeChange=3]="VolumeChange",N[N.RateChange=4]="RateChange",N),ry=((D=ry||{}).Start="start",D.Pause="pause",D.Resume="resume",D.Resize="resize",D.Finish="finish",D.FullsnapshotRebuilded="fullsnapshot-rebuilded",D.LoadStylesheetStart="load-stylesheet-start",D.LoadStylesheetEnd="load-stylesheet-end",D.SkipStart="skip-start",D.SkipEnd="skip-end",D.MouseInteraction="mouse-interaction",D.EventCast="event-cast",D.CustomEvent="custom-event",D.Flush="flush",D.StateChange="state-change",D.PlayBack="play-back",D.Destroy="destroy",D);function rb(e,t,r){for(var n=null,i=[],o=e,s=0;o&&"break"!==function(){var e,u,a,c,l=new Date().getTime()-_.getTime();if(void 0!==E.timeoutMs&&l>E.timeoutMs)throw Error("Timeout: Can't find a unique selector after ".concat(l,"ms"));var d=rk((e=o.getAttribute("id"))&&E.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null)||rk.apply(void 0,(0,B.ev)([],(0,B.CR)(Array.from(o.attributes).filter(function(e){return E.attr(e.name,e.value)}).map(function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}})),!1))||rk.apply(void 0,(0,B.ev)([],(0,B.CR)(Array.from(o.classList).filter(E.className).map(function(e){return{name:"."+CSS.escape(e),penalty:1}})),!1))||rk((u=o.tagName.toLowerCase(),E.tagName(u)?{name:u,penalty:2}:null))||[r_()],f=function(e){var t=e.parentNode;if(!t)return null;var r=t.firstChild;if(!r)return null;for(var n=0;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==e);)r=r.nextSibling;return n}(o);if("all"==t)f&&(d=d.concat(d.filter(rC).map(function(e){return rx(e,f)})));else if("two"==t)d=d.slice(0,1),f&&(d=d.concat(d.filter(rC).map(function(e){return rx(e,f)})));else if("one"==t){var h=(0,B.CR)(d=d.slice(0,1),1)[0];f&&rC(h)&&(d=[rx(h,f)])}else"none"==t&&(d=[r_()],f&&(d=[rx(d[0],f)]));try{for(var p=(a=void 0,(0,B.XA)(d)),v=p.next();!v.done;v=p.next()){var h=v.value;h.level=s}}catch(e){a={error:e}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}if(i.push(d),i.length>=E.seedMinLength&&(n=rw(i,r)))return"break";o=o.parentElement,s++}(););return(n||(n=rw(i,r)),!n&&r)?r():n}function rw(e,t){var r,n,i=rO(function e(t,r){var n,i,o,s,u;return void 0===r&&(r=[]),(0,B.Jh)(this,function(a){switch(a.label){case 0:if(!(t.length>0))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),i=(n=(0,B.XA)(t[0])).next(),a.label=2;case 2:if(i.done)return[3,5];return o=i.value,[5,(0,B.XA)(e(t.slice(1,t.length),r.concat(o)))];case 3:a.sent(),a.label=4;case 4:return i=n.next(),[3,2];case 5:return[3,8];case 6:return s={error:a.sent()},[3,8];case 7:try{i&&!i.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,r];case 10:a.sent(),a.label=11;case 11:return[2]}})}(e));if(i.length>E.threshold)return t?t():null;try{for(var o=(0,B.XA)(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(rI(u))return u}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null}function rS(e){for(var t=e[0],r=t.name,n=1;n<e.length;n++){var i=e[n].level||0;r=t.level===i-1?"".concat(e[n].name," > ").concat(r):"".concat(e[n].name," ").concat(r),t=e[n]}return r}function rE(e){return e.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function rI(e){var t=rS(e);switch(I.querySelectorAll(t).length){case 0:throw Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function r_(){return{name:"*",penalty:3}}function rx(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function rC(e){return"html"!==e.name&&!e.name.startsWith("#")}function rk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.filter(rP);return r.length>0?r:null}function rP(e){return null!=e}function rO(e){return(0,B.ev)([],(0,B.CR)(e),!1).sort(function(e,t){return rE(e)-rE(t)})}var rT=function(e){var t=e.version,r=e.events,n=[];return r.forEach(function(e){var t=JSON.parse(e);t.count=1,"click"===t.type&&n.push(t)}),{version:t,events:n}},rR=function(e){var t=e.version,r=e.events,n=[];return r.forEach(function(e){var t=JSON.parse(e);"click"===t.type&&n.push(t)}),{version:t,events:Object.values(n.reduce(function(e,t){var r=t.x,n=t.y,i=t.selector,o=t.timestamp,s=o-o%36e5,u="".concat(r,":").concat(n,":").concat(null!=i?i:"",":").concat(s);return e[u]?e[u].count+=1:e[u]=(0,B.pi)((0,B.pi)({},t),{timestamp:s,count:1}),e},{}))}},rA=function(e,t){var r=t.eventsManager,n=t.sessionId,i=t.deviceIdFn;return function(t){if(t.type===rp.Click){var o,s=(0,er.l)();if(s){var u=s.location,a=s.innerHeight,c=s.innerWidth;if(u){var l=t.x,d=t.y;if(void 0!==l&&void 0!==d){var f=eo.IM.mirror.getNode(t.id);if(f)try{o=function(e,t){if(_=new Date,e.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var r,n={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};I=(r=(E=(0,B.pi)((0,B.pi)({},n),void 0)).root).nodeType===Node.DOCUMENT_NODE?r:r===n.root?r.ownerDocument:r;var i=rb(e,"all",function(){return rb(e,"two",function(){return rb(e,"one",function(){return rb(e,"none")})})});if(i){var o=rO(function e(t,r,n){var i,o,s;return void 0===n&&(n={counter:0,visited:new Map}),(0,B.Jh)(this,function(u){switch(u.label){case 0:if(!(t.length>2&&t.length>E.optimizedMinLength))return[3,5];i=1,u.label=1;case 1:var a;if(!(i<t.length-1))return[3,5];if(n.counter>E.maxNumberOfTries||(n.counter+=1,(o=(0,B.ev)([],(0,B.CR)(t),!1)).splice(i,1),s=rS(o),n.visited.has(s)))return[2];if(!(rI(o)&&(a=o,I.querySelector(rS(a))===r)))return[3,4];return[4,o];case 2:return u.sent(),n.visited.set(s,!0),[5,(0,B.XA)(e(o,r,n))];case 3:u.sent(),u.label=4;case 4:return i++,[3,1];case 5:return[2]}})}(i,e));return o.length>0&&(i=o[0]),rS(i)}throw Error("Selector was not found.")}(f)}catch(t){e.debug("error resolving selector from finder")}var h=eo.P6.getWindowScroll(s),p={x:l+h.left,y:d+h.top,selector:o,viewportHeight:a,viewportWidth:c,pageUrl:u.href,timestamp:Date.now(),type:"click"},v=i();v&&r.addEvent({sessionId:n,event:{type:"interaction",data:JSON.stringify(p)},deviceId:v})}}}}}},rL=function(){function e(e,t){var r=(0,er.l)();r&&r.navigator&&"function"==typeof r.navigator.sendBeacon?this.sendBeacon=function(e,t){try{if(r.navigator.sendBeacon(e,JSON.stringify(t)))return!0}catch(e){}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(e,t){var r=new XMLHttpRequest;return r.open("POST",e,!0),r.setRequestHeader("Accept","*/*"),r.send(JSON.stringify(t)),!0},this.basePageUrl=tB(t.serverZone,t.trackServerUrl),this.apiKey=t.apiKey,this.context=e}return e.prototype.send=function(e,t){var r=this.context,n=r.sessionId,i=r.type,o=new URLSearchParams({device_id:e,session_id:String(n),type:String(i),api_key:this.apiKey}),s="".concat(this.basePageUrl,"?").concat(o.toString());this.sendBeacon(s,t)||this.sendXhr(s,t)},e}(),rM=eo.P6.getWindowHeight,rU=eo.P6.getWindowWidth,rN=function(){function e(e){var t=this;this.timestamp=Date.now(),this.hook=function(e){t.update(e)},this.send=function(e){return function(r){var n=e(),i=(0,er.l)();i&&n&&t.transport.send(n,{version:1,events:[{maxScrollX:t._maxScrollX,maxScrollY:t._maxScrollY,maxScrollWidth:t._maxScrollWidth,maxScrollHeight:t._maxScrollHeight,viewportHeight:rM(),viewportWidth:rU(),pageUrl:i.location.href,timestamp:t.timestamp,type:"scroll"}]})}},this._maxScrollX=0,this._maxScrollY=0,this._maxScrollWidth=rU(),this._maxScrollHeight=rM(),this.transport=e}return e.default=function(t,r){return new e(new rL(t,r))},Object.defineProperty(e.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),e.prototype.update=function(e){var t=Date.now();if(e.x>this._maxScrollX){var r=rU();this._maxScrollX=e.x;var n=e.x+r;n>this._maxScrollWidth&&(this._maxScrollWidth=n),this.timestamp=t}if(e.y>this._maxScrollY){var i=rM();this._maxScrollY=e.y;var o=e.y+i;o>this._maxScrollHeight&&(this._maxScrollHeight=o),this.timestamp=t}},e}(),rD=function(e){var t=e.sessionId,r=e.deviceId;this.deviceId=r,this.sessionId=t,t&&r&&(this.sessionReplayId="".concat(r,"/").concat(t))},rj=Uint8Array,rq=Uint16Array,rB=Uint32Array,rF=new rj([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rJ=new rj([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rG=new rj([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rz=function(e,t){for(var r=new rq(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new rB(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},rV=rz(rF,2),rW=rV[0],r$=rV[1];rW[28]=258,r$[258]=28;for(var rK=rz(rJ,0),rZ=(rK[0],rK[1]),rX=new rq(32768),rQ=0;rQ<32768;++rQ){var rH=(43690&rQ)>>>1|(21845&rQ)<<1;rH=(61680&(rH=(52428&rH)>>>2|(13107&rH)<<2))>>>4|(3855&rH)<<4,rX[rQ]=((65280&rH)>>>8|(255&rH)<<8)>>>1}for(var rY=function(e,t,r){for(var n,i=e.length,o=0,s=new rq(t);o<i;++o)++s[e[o]-1];var u=new rq(t);for(o=0;o<t;++o)u[o]=u[o-1]+s[o-1]<<1;if(r){n=new rq(1<<t);var a=15-t;for(o=0;o<i;++o)if(e[o])for(var c=o<<4|e[o],l=t-e[o],d=u[e[o]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)n[rX[d]>>>a]=c}else for(o=0,n=new rq(i);o<i;++o)n[o]=rX[u[e[o]-1]++]>>>15-e[o];return n},r0=new rj(288),rQ=0;rQ<144;++rQ)r0[rQ]=8;for(var rQ=144;rQ<256;++rQ)r0[rQ]=9;for(var rQ=256;rQ<280;++rQ)r0[rQ]=7;for(var rQ=280;rQ<288;++rQ)r0[rQ]=8;for(var r1=new rj(32),rQ=0;rQ<32;++rQ)r1[rQ]=5;var r2=rY(r0,9,0),r3=rY(r1,5,0),r4=function(e){return(e/8>>0)+(7&e&&1)},r5=function(e,t,r){(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof rq?rq:e instanceof rB?rB:rj)(r-t);return n.set(e.subarray(t,r)),n},r6=function(e,t,r){r<<=7&t;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},r8=function(e,t,r){r<<=7&t;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},r7=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return[new rj(0),0];if(1==i){var s=new rj(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var u=r[0],a=r[1],c=0,l=1,d=2;for(r[0]={s:-1,f:u.f+a.f,l:u,r:a};l!=i-1;)u=r[r[c].f<r[d].f?c++:d++],a=r[c!=l&&r[c].f<r[d].f?c++:d++],r[l++]={s:-1,f:u.f+a.f,l:u,r:a};for(var f=o[0].s,n=1;n<i;++n)o[n].s>f&&(f=o[n].s);var h=new rq(f+1),p=r9(r[l-1],h,0);if(p>t){var n=0,v=0,g=p-t,m=1<<g;for(o.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});n<i;++n){var y=o[n].s;if(h[y]>t)v+=m-(1<<p-h[y]),h[y]=t;else break}for(v>>>=g;v>0;){var b=o[n].s;h[b]<t?v-=1<<t-h[b]++-1:++n}for(;n>=0&&v;--n){var w=o[n].s;h[w]==t&&(--h[w],++v)}p=t}return[new rj(h),p]},r9=function(e,t,r){return -1==e.s?Math.max(r9(e.l,t,r+1),r9(e.r,t,r+1)):t[e.s]=r},ne=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new rq(++t),n=0,i=e[0],o=1,s=function(e){r[n++]=e},u=1;u<=t;++u)if(e[u]==i&&u!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[u]}return[r.subarray(0,n),t]},nt=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},nr=function(e,t,r){var n=r.length,i=r4(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},nn=function(e,t,r,n,i,o,s,u,a,c,l){r6(t,l++,r),++i[256];for(var d,f,h,p,v=r7(i,15),g=v[0],m=v[1],y=r7(o,15),b=y[0],w=y[1],S=ne(g),E=S[0],I=S[1],_=ne(b),x=_[0],C=_[1],k=new rq(19),P=0;P<E.length;++P)k[31&E[P]]++;for(var P=0;P<x.length;++P)k[31&x[P]]++;for(var O=r7(k,7),T=O[0],R=O[1],A=19;A>4&&!T[rG[A-1]];--A);var L=c+5<<3,M=nt(i,r0)+nt(o,r1)+s,U=nt(i,g)+nt(o,b)+s+14+3*A+nt(k,T)+(2*k[16]+3*k[17]+7*k[18]);if(L<=M&&L<=U)return nr(t,l,e.subarray(a,a+c));if(r6(t,l,1+(U<M)),l+=2,U<M){d=rY(g,m,0),f=g,h=rY(b,w,0),p=b;var N=rY(T,R,0);r6(t,l,I-257),r6(t,l+5,C-1),r6(t,l+10,A-4),l+=14;for(var P=0;P<A;++P)r6(t,l+3*P,T[rG[P]]);l+=3*A;for(var D=[E,x],j=0;j<2;++j)for(var q=D[j],P=0;P<q.length;++P){var B=31&q[P];r6(t,l,N[B]),l+=T[B],B>15&&(r6(t,l,q[P]>>>5&127),l+=q[P]>>>12)}}else d=r2,f=r0,h=r3,p=r1;for(var P=0;P<u;++P)if(n[P]>255){var B=n[P]>>>18&31;r8(t,l,d[B+257]),l+=f[B+257],B>7&&(r6(t,l,n[P]>>>23&31),l+=rF[B]);var F=31&n[P];r8(t,l,h[F]),l+=p[F],F>3&&(r8(t,l,n[P]>>>5&8191),l+=rJ[F])}else r8(t,l,d[n[P]]),l+=f[n[P]];return r8(t,l,d[256]),l+f[256]},ni=new rB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),no=function(e,t,r,n,i,o){var s=e.length,u=new rj(n+s+5*(1+Math.floor(s/7e3))+i),a=u.subarray(n,u.length-i),c=0;if(!t||s<8)for(var l=0;l<=s;l+=65535){var d=l+65535;d<s?c=nr(a,c,e.subarray(l,d)):(a[l]=o,c=nr(a,c,e.subarray(l,s)))}else{for(var f=ni[t-1],h=f>>>13,p=8191&f,v=(1<<r)-1,g=new rq(32768),m=new rq(v+1),y=Math.ceil(r/3),b=2*y,w=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&v},S=new rB(25e3),E=new rq(288),I=new rq(32),_=0,x=0,l=0,C=0,k=0,P=0;l<s;++l){var O=w(l),T=32767&l,R=m[O];if(g[T]=R,m[O]=T,k<=l){var A=s-l;if((_>7e3||C>24576)&&A>423){c=nn(e,a,0,S,E,I,x,C,P,l-P,c),C=_=x=0,P=l;for(var L=0;L<286;++L)E[L]=0;for(var L=0;L<30;++L)I[L]=0}var M=2,U=0,N=p,D=T-R&32767;if(A>2&&O==w(l-D))for(var j=Math.min(h,A)-1,q=Math.min(32767,l),B=Math.min(258,A);D<=q&&--N&&T!=R;){if(e[l+M]==e[l+M-D]){for(var F=0;F<B&&e[l+F]==e[l+F-D];++F);if(F>M){if(M=F,U=D,F>j)break;for(var J=Math.min(D,F-2),G=0,L=0;L<J;++L){var z=l-D+L+32768&32767,V=g[z],W=z-V+32768&32767;W>G&&(G=W,R=z)}}}R=g[T=R],D+=T-R+32768&32767}if(U){S[C++]=268435456|r$[M]<<18|rZ[U];var $=31&r$[M],K=31&rZ[U];x+=rF[$]+rJ[K],++E[257+$],++I[K],k=l+M,++_}else S[C++]=e[l],++E[e[l]]}}c=nn(e,a,o,S,E,I,x,C,P,l-P,c)}return r5(u,0,n+r4(c)+i)},ns=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length,s=0;s!=o;){for(var u=Math.min(s+5552,o);s<u;++s)n+=r[s],i+=n;n%=65521,i%=65521}e=n,t=i},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+((255&e)<<23)*2}}},nu=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},na=function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)};let nc=e=>{var t,r,n,i,o;return function(e,t){var r="";if(!t&&"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var n=0;n<e.length;){var i=e[n++];i<128||t?r+=String.fromCharCode(i):i<224?r+=String.fromCharCode((31&i)<<6|63&e[n++]):i<240?r+=String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):r+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i)}return r}((t=function(e,t){var r=e.length;if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);for(var n=new rj(e.length+(e.length>>>1)),i=0,o=function(e){n[i++]=e},s=0;s<r;++s){if(i+5>n.length){var u=new rj(i+8+(r-s<<1));u.set(n),n=u}var a=e.charCodeAt(s);a<128?o(a):(a<2048?o(192|a>>>6):(a>55295&&a<57344?(o(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++s))>>>18),o(128|a>>>12&63)):o(224|a>>>12),o(128|a>>>6&63)),o(128|63&a))}return r5(n,0,i)}(JSON.stringify({...e,v:"v1"})),void 0===r&&(r={}),(n=ns()).p(t),na(o=no(t,null==(i=r).level?6:i.level,null==i.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+i.mem,2,4,!0),r),nu(o,o.length-4,n.d()),o),!0)};var nl=function(){function e(e,t,r,n){var i,o,s,u=this;this.taskQueue=[],this.isProcessing=!1,this.compressEvent=function(e){return JSON.stringify(nc(e))},this.addCompressedEventToManager=function(e,t){u.eventsManager&&u.deviceId&&u.eventsManager.addEvent({event:{type:"replay",data:e},sessionId:t,deviceId:u.deviceId})},this.addCompressedEvent=function(e,t){if(u.worker)u.worker.postMessage({event:e,sessionId:t});else{var r=u.compressEvent(e);u.addCompressedEventToManager(r,t)}},this.terminate=function(){var e;null===(e=u.worker)||void 0===e||e.terminate()};var a=(0,er.l)();this.canUseIdleCallback=a&&"requestIdleCallback"in a,this.eventsManager=e,this.config=t,this.deviceId=r,this.timeout=(null===(i=t.performanceConfig)||void 0===i?void 0:i.timeout)||2e3;var c=null!==(o=({}).COMPRESSION_WEBWORKER_BODY)&&void 0!==o?o:n;if((null===(s=this.config.experimental)||void 0===s?void 0:s.useWebWorker)&&a&&a.Worker&&c){t.loggerProvider.log("[Experimental] Enabling web worker for compression");var l=new Worker(URL.createObjectURL(new Blob([c],{type:"application/javascript"})));l.onerror=function(e){t.loggerProvider.error(e)},l.onmessage=function(e){var t=e.data,r=t.compressedEvent,n=t.sessionId;u.addCompressedEventToManager(r,n)},this.worker=l}}return e.prototype.scheduleIdleProcessing=function(){var e=this;this.isProcessing||(this.isProcessing=!0,requestIdleCallback(function(t){e.processQueue(t)},{timeout:this.timeout}))},e.prototype.enqueueEvent=function(e,t){var r;this.canUseIdleCallback&&(null===(r=this.config.performanceConfig)||void 0===r?void 0:r.enabled)?(this.config.loggerProvider.debug("Enqueuing event for processing during idle time."),this.taskQueue.push({event:e,sessionId:t}),this.scheduleIdleProcessing()):(this.config.loggerProvider.debug("Processing event without idle callback."),this.addCompressedEvent(e,t))},e.prototype.processQueue=function(e){for(var t=this;this.taskQueue.length>0&&(e.timeRemaining()>0||e.didTimeout);){var r=this.taskQueue.shift();if(r){var n=r.event,i=r.sessionId;this.addCompressedEvent(n,i)}}this.taskQueue.length>0?requestIdleCallback(function(e){t.processQueue(e)},{timeout:this.timeout}):this.isProcessing=!1},e}(),nd=function(){function e(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.eventCount=0,this.pageLeaveFns=[],this.teardownEventListeners=function(t){var r=(0,er.l)();r&&(r.removeEventListener("blur",e.blurListener),r.removeEventListener("focus",e.focusListener),t||r.addEventListener("blur",e.blurListener),t||r.addEventListener("focus",e.focusListener),r.self&&"onpagehide"in r.self?(r.removeEventListener("pagehide",e.pageLeaveListener),t||r.addEventListener("pagehide",e.pageLeaveListener)):(r.removeEventListener("beforeunload",e.pageLeaveListener),t||r.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents()},this.pageLeaveListener=function(t){e.pageLeaveFns.forEach(function(e){e(t)})},this.addCustomRRWebEvent=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n=!0),(0,B.mG)(e,void 0,void 0,function(){var e,i,o,s;return(0,B.Jh)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,3,,4]),e=void 0,!(i=this.config)||(e={config:tJ(i),version:tW},!n))return[3,2];return[4,tF()];case 1:o=u.sent(),e=(0,B.pi)((0,B.pi)({},o),e),u.label=2;case 2:return this.recordCancelCallback?eo.IM.addCustomEvent(t,(0,B.pi)((0,B.pi)({},r),e)):this.loggerProvider.debug("Not able to add custom replay capture event ".concat(t," due to no ongoing recording.")),[3,4];case 3:return s=u.sent(),this.loggerProvider.debug("Error while adding custom replay capture event: ",s),[3,4];case 4:return[2]}})})},this.stopRecordingEvents=function(){try{e.loggerProvider.log("Session Replay capture stopping."),e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null}catch(t){e.loggerProvider.warn("Error occurred while stopping replay capture: ".concat(t.toString()))}},this.loggerProvider=new G}return e.prototype.init=function(e,t){return ei(this._init(e,t))},e.prototype._init=function(e,t){var r,n,i,o;return(0,B.mG)(this,void 0,void 0,function(){var s,u,a,c,l,d,f,h,p;return(0,B.Jh)(this,function(v){switch(v.label){case 0:return this.loggerProvider=t.loggerProvider||new G,Object.prototype.hasOwnProperty.call(t,"logLevel")&&this.loggerProvider.enable(t.logLevel),this.identifiers=new rD({sessionId:t.sessionId,deviceId:t.deviceId}),s=this,[4,(0,B.mG)(void 0,void 0,void 0,function(){var r;return(0,B.Jh)(this,function(n){switch(n.label){case 0:return[4,el({localConfig:r=new et(e,t),configKeys:["sessionReplay"]})];case 1:return[2,new tz(n.sent(),r)]}})})];case 1:return s.joinedConfigGenerator=v.sent(),u=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 2:u.config=v.sent(),t.sessionId&&(null===(r=this.config.interactionConfig)||void 0===r?void 0:r.enabled)&&(a=rN.default({sessionId:t.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[a.send(this.getDeviceId.bind(this)).bind(a)],this.scrollHook=a.hook.bind(a)),c=[],"idb"!==(l=this.config.storeType)||(null===(n=(0,er.l)())||void 0===n?void 0:n.indexedDB)||(l="memory",this.loggerProvider.warn("Could not use preferred indexedDB storage, reverting to in memory option.")),this.loggerProvider.log("Using ".concat(l," for event storage.")),v.label=3;case 3:return v.trys.push([3,5,,6]),[4,rl({config:this.config,sessionId:this.identifiers.sessionId,type:"replay",storeType:l})];case 4:return d=v.sent(),c.push({name:"replay",manager:d}),[3,6];case 5:return f=v.sent(),this.loggerProvider.warn("Error occurred while creating replay events manager: ".concat(f.toString())),[3,6];case 6:if(!(null===(i=this.config.interactionConfig)||void 0===i?void 0:i.enabled))return[3,10];h=this.config.interactionConfig.batch?rR:rT,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,rl({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:null!==(o=this.config.interactionConfig.trackEveryNms)&&void 0!==o?o:3e4,maxInterval:6e4,payloadBatcher:h,storeType:l})];case 8:return p=v.sent(),c.push({name:"interaction",manager:p}),[3,10];case 9:return f=v.sent(),this.loggerProvider.warn("Error occurred while creating interaction events manager: ".concat(f.toString())),[3,10];case 10:return this.eventsManager=new(rd.bind.apply(rd,(0,B.ev)([void 0],(0,B.CR)(c),!1))),this.eventCompressor&&this.eventCompressor.terminate(),this.eventCompressor=new nl(this.eventsManager,this.config,this.getDeviceId()),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),this.initialize(!0),[2]}})})},e.prototype.setSessionId=function(e,t){return ei(this.asyncSetSessionId(e,t))},e.prototype.asyncSetSessionId=function(e,t){return(0,B.mG)(this,void 0,void 0,function(){var r,n,i;return(0,B.Jh)(this,function(o){switch(o.label){case 0:if((r=this.identifiers&&this.identifiers.sessionId)&&this.sendEvents(r),n=t||this.getDeviceId(),this.identifiers=new rD({sessionId:e,deviceId:n}),!(this.joinedConfigGenerator&&r))return[3,2];return i=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 1:i.config=o.sent(),o.label=2;case 2:return this.recordEvents(),[2]}})})},e.prototype.getSessionReplayProperties=function(){var e,t=this.config,r=this.identifiers;if(!t||!r)return this.loggerProvider.warn("Session replay init has not been called, cannot get session replay properties."),{};var n=this.getShouldRecord(),i={};return n&&((e={})[X]=r.sessionReplayId?r.sessionReplayId:null,i=e,t.debugMode&&(i[H]=JSON.stringify({appHash:tj(t.apiKey).toString()}))),this.addCustomRRWebEvent(b.GET_SR_PROPS,{shouldRecord:n,eventProperties:i},10===this.eventCount),10===this.eventCount&&(this.eventCount=0),this.eventCount++,i},e.prototype.sendEvents=function(e){var t,r=e||(null===(t=this.identifiers)||void 0===t?void 0:t.sessionId),n=this.getDeviceId();this.eventsManager&&r&&n&&this.eventsManager.sendCurrentSequenceEvents({sessionId:r,deviceId:n})},e.prototype.initialize=function(e){if(void 0===e&&(e=!1),!(null===(t=this.identifiers)||void 0===t?void 0:t.sessionId)){this.loggerProvider.log("Session is not being recorded due to lack of session id.");return}var t,r=this.getDeviceId();if(!r){this.loggerProvider.log("Session is not being recorded due to lack of device id.");return}this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:r}),this.recordEvents()},e.prototype.shouldOptOut=function(){if(null===(t=this.config)||void 0===t?void 0:t.instanceName){var e,t,r,n;n=(void 0===(e=this.config.instanceName)&&(e="$default_instance"),en.V.getInstance(e)).identityStore.getIdentity().optOut}return void 0!==n?n:null===(r=this.config)||void 0===r?void 0:r.optOut},e.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e,t,r=(e=this.identifiers.sessionId,t=this.config.sampleRate,31*Math.abs(tj(e.toString()))%1e6/1e6<t);return r||this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate.")),r},e.prototype.getBlockSelectors=function(){var e,t,r,n=null!==(r=null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.blockSelector)&&void 0!==r?r:[];if(0!==n.length)return n},e.prototype.getMaskTextSelectors=function(){if((null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.defaultMaskLevel)==="conservative")return"*";var e,t,r,n,i=null===(n=null===(r=this.config)||void 0===r?void 0:r.privacyConfig)||void 0===n?void 0:n.maskSelector;if(i)return i},e.prototype.recordEvents=function(){var e,t=this,r=this.config,n=this.getShouldRecord(),i=null===(e=this.identifiers)||void 0===e?void 0:e.sessionId;if(n&&i&&r){this.stopRecordingEvents();var o=r.privacyConfig,s=r.interactionConfig,u=(null==s?void 0:s.enabled)?{mouseInteraction:this.eventsManager&&rA(this.loggerProvider,{eventsManager:this.eventsManager,sessionId:i,deviceIdFn:this.getDeviceId.bind(this)}),scroll:this.scrollHook}:{};this.loggerProvider.log("Session Replay capture beginning for ".concat(i,".")),this.recordCancelCallback=(0,eo.IM)({emit:function(e){if(t.shouldOptOut()){t.loggerProvider.log("Opting session ".concat(i," out of recording due to optOut config.")),t.stopRecordingEvents(),t.sendEvents();return}t.eventCompressor&&t.eventCompressor.enqueueEvent(e,i)},inlineStylesheet:r.shouldInlineStylesheet,hooks:u,maskAllInputs:!0,maskTextClass:Y,blockClass:"amp-block",blockSelector:this.getBlockSelectors(),maskInputFn:tD("input",o),maskTextFn:tD("text",o),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,errorHandler:function(e){if(e.message.includes("insertRule")&&e.message.includes("CSSStyleSheet")||e._external_)throw e;return t.loggerProvider.warn("Error while capturing replay: ",e.toString()),!0}}),this.addCustomRRWebEvent(b.DEBUG_INFO)}},e.prototype.getDeviceId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.deviceId},e.prototype.getSessionId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.sessionId},e.prototype.flush=function(e){var t;return void 0===e&&(e=!1),(0,B.mG)(this,void 0,void 0,function(){return(0,B.Jh)(this,function(r){return[2,null===(t=this.eventsManager)||void 0===t?void 0:t.flush(e)]})})},e.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},e}(),nf=function(e){return function(){var t=e.config||ee();return{logger:t.loggerProvider,logLevel:t.logLevel}}},nh={init:q((j=new nd).init.bind(j),"init",nf(j)),setSessionId:q(j.setSessionId.bind(j),"setSessionId",nf(j)),getSessionId:q(j.getSessionId.bind(j),"getSessionId",nf(j)),getSessionReplayProperties:q(j.getSessionReplayProperties.bind(j),"getSessionReplayProperties",nf(j)),flush:q(j.flush.bind(j),"flush",nf(j)),shutdown:q(j.shutdown.bind(j),"shutdown",nf(j))},np=nh.init,nv=nh.setSessionId;nh.getSessionId,nh.getSessionReplayProperties,nh.flush,nh.shutdown},3145:function(e,t,r){"use strict";r(8461)},257:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(4227)},5878:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return b}});let n=r(7043),i=r(3099),o=r(7437),s=i._(r(2265)),u=n._(r(4887)),a=n._(r(8293)),c=r(5346),l=r(128),d=r(2589);r(1765);let f=r(5523),h=n._(r(5084)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/sr-demo/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function v(e,t,r,n,i,o,s){let u=null==e?void 0:e.src;e&&e["data-loaded-src"]!==u&&(e["data-loaded-src"]=u,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function g(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let m=(0,s.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:i,height:u,width:a,decoding:c,className:l,style:d,fetchPriority:f,placeholder:h,loading:p,unoptimized:m,fill:y,onLoadRef:b,onLoadingCompleteRef:w,setBlurComplete:S,setShowAltText:E,sizesInput:I,onLoad:_,onError:x,...C}=e;return(0,o.jsx)("img",{...C,...g(f),loading:p,width:a,height:u,decoding:c,"data-nimg":y?"fill":"1",className:l,style:d,sizes:i,srcSet:n,src:r,ref:(0,s.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(x&&(e.src=e.src),e.complete&&v(e,h,b,w,S,m,I))},[r,h,b,w,S,x,m,I,t]),onLoad:e=>{v(e.currentTarget,h,b,w,S,m,I)},onError:e=>{E(!0),"empty"!==h&&S(!0),x&&x(e)}})});function y(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...g(r.fetchPriority)};return t&&u.default.preload?(u.default.preload(r.src,n),null):(0,o.jsx)(a.default,{children:(0,o.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let b=(0,s.forwardRef)((e,t)=>{let r=(0,s.useContext)(f.RouterContext),n=(0,s.useContext)(d.ImageConfigContext),i=(0,s.useMemo)(()=>{var e;let t=p||n||l.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),i=t.deviceSizes.sort((e,t)=>e-t),o=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:i,qualities:o}},[n]),{onLoad:u,onLoadingComplete:a}=e,v=(0,s.useRef)(u);(0,s.useEffect)(()=>{v.current=u},[u]);let g=(0,s.useRef)(a);(0,s.useEffect)(()=>{g.current=a},[a]);let[b,w]=(0,s.useState)(!1),[S,E]=(0,s.useState)(!1),{props:I,meta:_}=(0,c.getImgProps)(e,{defaultLoader:h.default,imgConf:i,blurComplete:b,showAltText:S});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m,{...I,unoptimized:_.unoptimized,placeholder:_.placeholder,fill:_.fill,onLoadRef:v,onLoadingCompleteRef:g,setBlurComplete:w,setShowAltText:E,sizesInput:e.sizes,ref:t}),_.priority?(0,o.jsx)(y,{isAppRouter:!r,imgAttributes:I}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6434:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],u=o[1],c=new i((s+u)*3/4-u),l=0,d=u>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,u=n-i;s<u;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(e,s,s+16383>u?u:s+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!u.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=s(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(O(e,SharedArrayBuffer)||e&&O(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),u.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t,r=0|f(e.length),n=s(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),s(e<0?0:0|f(e))}function d(e){for(var t=e.length<0?0:0|f(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return x(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(i)return n?-1:x(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=T[e[o]];return i}(this,t,r);case"utf8":case"utf-8":return y(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,o=r,0===i&&o===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var o,s=1,u=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,u/=2,a/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<u;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===a)return l*s}else -1!==l&&(o-=o-l),l=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var d=!0,f=0;f<a;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return -1}function y(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,u,a,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:(192&(o=e[i+1]))==128&&(a=(31&c)<<6|63&o)>127&&(l=a);break;case 3:o=e[i+1],s=e[i+2],(192&o)==128&&(192&s)==128&&(a=(15&c)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(l=a);break;case 4:o=e[i+1],s=e[i+2],u=e[i+3],(192&o)==128&&(192&s)==128&&(192&u)==128&&(a=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(l=a)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,i,o){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function S(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function E(e,t,r,n,o){return t=+t,r>>>=0,o||S(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function I(e,t,r,n,o){return t=+t,r>>>=0,o||S(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return(c(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},u.allocUnsafe=function(e){return l(e)},u.allocUnsafeSlow=function(e){return l(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(O(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(O(o,Uint8Array)&&(o=u.from(o)),!u.isBuffer(o))throw TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?y(this,0,e):p.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(O(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),d=0;d<a;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,o,s,u,a,c,l,d,f,h,p,v,g=this.length-t;if((void 0===r||r>g)&&(r=g),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var m=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var u=parseInt(t.substr(2*s,2),16);if(u!=u)break;e[r+s]=u}return s}(this,e,t,r);case"utf8":case"utf-8":return a=t,c=r,P(x(e,this.length-a),this,a,c);case"ascii":return l=t,d=r,P(C(e),this,l,d);case"latin1":case"binary":return i=this,o=e,s=t,u=r,P(C(o),i,s,u);case"base64":return f=t,h=r,P(k(e),this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,v=r,P(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-p),this,p,v);default:if(m)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),m=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var o=0,s=1,u=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var o=r-1,s=1,u=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return E(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return E(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=u.isBuffer(e)?e:u.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var _=/[^+/0-9A-Za-z-_]/g;function x(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function C(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function k(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var T=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,c=a>>1,l=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=u;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=c}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,u,a,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?5960464477539062e-23:0,h=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+d>=1?t+=f/a:t+=f*Math.pow(2,1-d),t*a>=2&&(s++,a/=2),s+d>=l?(u=0,s=l):s+d>=1?(u=(t*a-1)*Math.pow(2,i),s+=d):(u=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&u,h+=p,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;e[r+h]=255&s,h+=p,s/=256,c-=8);e[r+h-p]|=128*v}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,n),s=!1}finally{s&&delete r[e]}return o.exports}n.ab="//";var i=n(72);e.exports=i}()},4227:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function u(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a=[],c=!1,l=-1;function d(){c&&n&&(c=!1,n.length?a=n.concat(a):l=-1,a.length&&f())}function f(){if(!c){var e=u(d);c=!0;for(var t=a.length;t;){for(n=a,a=[];++l<t;)n&&n[l].run();l=-1,t=a.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new h(e,t)),1!==a.length||c||u(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,n),s=!1}finally{s&&delete r[e]}return o.exports}n.ab="//";var i=n(229);e.exports=i}()},1436:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return n}});let n=r(7043)._(r(2265)).default.createContext({})},3964:function(e,t){"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},5346:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return u}}),r(1765);let n=r(6496),i=r(128);function o(e){return void 0!==e.default}function s(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u(e,t){var r,u;let a,c,l,{src:d,sizes:f,unoptimized:h=!1,priority:p=!1,loading:v,className:g,quality:m,width:y,height:b,fill:w=!1,style:S,overrideSrc:E,onLoad:I,onLoadingComplete:_,placeholder:x="empty",blurDataURL:C,fetchPriority:k,decoding:P="async",layout:O,objectFit:T,objectPosition:R,lazyBoundary:A,lazyRoot:L,...M}=e,{imgConf:U,showAltText:N,blurComplete:D,defaultLoader:j}=t,q=U||i.imageConfigDefault;if("allSizes"in q)a=q;else{let e=[...q.deviceSizes,...q.imageSizes].sort((e,t)=>e-t),t=q.deviceSizes.sort((e,t)=>e-t),n=null==(r=q.qualities)?void 0:r.sort((e,t)=>e-t);a={...q,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===j)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let B=M.loader||j;delete M.loader,delete M.srcSet;let F="__next_img_default"in B;if(F){if("custom"===a.loader)throw Error('Image with src "'+d+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=B;B=t=>{let{config:r,...n}=t;return e(n)}}if(O){"fill"===O&&(w=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[O];e&&(S={...S,...e});let t={responsive:"100vw",fill:"100vw"}[O];t&&!f&&(f=t)}let J="",G=s(y),z=s(b);if("object"==typeof(u=d)&&(o(u)||void 0!==u.src)){let e=o(d)?d.default:d;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(c=e.blurWidth,l=e.blurHeight,C=C||e.blurDataURL,J=e.src,!w){if(G||z){if(G&&!z){let t=G/e.width;z=Math.round(e.height*t)}else if(!G&&z){let t=z/e.height;G=Math.round(e.width*t)}}else G=e.width,z=e.height}}let V=!p&&("lazy"===v||void 0===v);(!(d="string"==typeof d?d:J)||d.startsWith("data:")||d.startsWith("blob:"))&&(h=!0,V=!1),a.unoptimized&&(h=!0),F&&d.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(h=!0),p&&(k="high");let W=s(m),$=Object.assign(w?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:T,objectPosition:R}:{},N?{}:{color:"transparent"},S),K=D||"empty"===x?null:"blur"===x?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:G,heightInt:z,blurWidth:c,blurHeight:l,blurDataURL:C||"",objectFit:$.objectFit})+'")':'url("'+x+'")',Z=K?{backgroundSize:$.objectFit||"cover",backgroundPosition:$.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:K}:{},X=function(e){let{config:t,src:r,unoptimized:n,width:i,quality:o,sizes:s,loader:u}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:a,kind:c}=function(e,t,r){let{deviceSizes:n,allSizes:i}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:i,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))],kind:"x"}}(t,i,s),l=a.length-1;return{sizes:s||"w"!==c?s:"100vw",srcSet:a.map((e,n)=>u({config:t,src:r,quality:o,width:e})+" "+("w"===c?e:n+1)+c).join(", "),src:u({config:t,src:r,quality:o,width:a[l]})}}({config:a,src:d,unoptimized:h,width:G,quality:W,sizes:f,loader:B});return{props:{...M,loading:V?"lazy":v,fetchPriority:k,width:G,height:z,decoding:P,className:g,style:{...$,...Z},sizes:X.sizes,srcSet:X.srcSet,src:E||X.src},meta:{unoptimized:h,priority:p,placeholder:x,fill:w}}}},8293:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return v},defaultHead:function(){return d}});let n=r(7043),i=r(3099),o=r(7437),s=i._(r(2265)),u=n._(r(7421)),a=r(1436),c=r(8701),l=r(3964);function d(e){void 0===e&&(e=!1);let t=[(0,o.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,o.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function f(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===s.default.Fragment?e.concat(s.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(1765);let h=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:r}=t;return e.reduce(f,[]).reverse().concat(d(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,n={};return i=>{let o=!0,s=!1;if(i.key&&"number"!=typeof i.key&&i.key.indexOf("$")>0){s=!0;let t=i.key.slice(i.key.indexOf("$")+1);e.has(t)?o=!1:e.add(t)}switch(i.type){case"title":case"base":t.has(i.type)?o=!1:t.add(i.type);break;case"meta":for(let e=0,t=h.length;e<t;e++){let t=h[e];if(i.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?o=!1:r.add(t);else{let e=i.props[t],r=n[t]||new Set;("name"!==t||!s)&&r.has(e)?o=!1:(r.add(e),n[t]=r)}}}}return o}}()).reverse().map((e,t)=>{let n=e.key||t;if(!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,s.default.cloneElement(e,t)}return s.default.cloneElement(e,{key:n})})}let v=function(e){let{children:t}=e,r=(0,s.useContext)(a.AmpStateContext),n=(0,s.useContext)(c.HeadManagerContext);return(0,o.jsx)(u.default,{reduceComponentsToState:p,headManager:n,inAmpMode:(0,l.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6496:function(e,t){"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:i,blurDataURL:o,objectFit:s}=e,u=n?40*n:t,a=i?40*i:r,c=u&&a?"viewBox='0 0 "+u+" "+a+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+c+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(c?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+o+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},2589:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return o}});let n=r(7043)._(r(2265)),i=r(128),o=n.default.createContext(i.imageConfigDefault)},128:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return a},getImageProps:function(){return u}});let n=r(7043),i=r(5346),o=r(5878),s=n._(r(5084));function u(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/sr-demo/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let a=o.Image},5084:function(e,t){"use strict";function r(e){var t;let{config:r,src:n,width:i,quality:o}=e,s=o||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+i+"&q="+s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},5523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=r(7043)._(r(2265)).default.createContext(null)},7421:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(2265),i="undefined"==typeof window,o=i?()=>{}:n.useLayoutEffect,s=i?()=>{}:n.useEffect;function u(e){let{headManager:t,reduceComponentsToState:r}=e;function u(){if(t&&t.mountedInstances){let i=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(i,e))}}if(i){var a;null==t||null==(a=t.mountedInstances)||a.add(e.children),u()}return o(()=>{var r;return null==t||null==(r=t.mountedInstances)||r.add(e.children),()=>{var r;null==t||null==(r=t.mountedInstances)||r.delete(e.children)}}),o(()=>(t&&(t._pendingUpdate=u),()=>{t&&(t._pendingUpdate=u)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},9360:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});for(var n,i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16),s=[],u=0;u<256;++u)s.push((u+256).toString(16).slice(1));var a=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();var u=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=u[a];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(u)}},6200:function(e,t,r){"use strict";r.d(t,{CR:function(){return l},FC:function(){return h},Jh:function(){return a},KL:function(){return p},XA:function(){return c},ZT:function(){return i},_T:function(){return s},ev:function(){return d},mG:function(){return u},pi:function(){return o},qq:function(){return f}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function u(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,u)}a((n=n.apply(e,t||[])).next())})}function a(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(a){return function(u){if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function d(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function f(e){return this instanceof f?(this.v=e,this):new f(e)}function h(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||u(e,t)})},t&&(n[e]=t(n[e])))}function u(e,t){try{var r;(r=i[e](t)).value instanceof f?Promise.resolve(r.value.v).then(a,c):l(o[0][2],r)}catch(e){l(o[0][3],e)}}function a(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),o.shift(),o.length&&u(o[0][0],o[0][1])}}function p(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=c(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}"function"==typeof SuppressedError&&SuppressedError}}]);